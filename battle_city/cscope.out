cscope 15 $HOME/server/battle_city -q 0000001489 0000169213
	@config/clustername.lua

1 
	gma¡”
 = "127.0.0.1:2500"

2 
logš
 = "127.0.0.1:2501"

3 
b©emng
 = "127.0.0.1:2502"

4 
¡İ
 = "127.0.0.1:2503"

	@config/config.lua

1 
loÿl
 
	g
 = "121.42.162.95"

4 
logš
 = {

5 
db
 = {

6 
add»ss
 = "127.0.0.1",

7 
	gdb_Çme
 = "battle_city",

10 
	gg©e_li¡
 = {

12 
add»ss
 = 

,

13 
	gpÜt
 = 10000,

14 
	gmaxş›Á
 = 2048,

19 
	gma¡”
 = {

20 
db
 = {

21 
add»ss
 = "127.0.0.1",

22 
	gdb_Çme
 = "battle_city",

25 
	gg©e_li¡
 = {

27 
add»ss
 = 

,

28 
	gpÜt
 = "10001",

29 
	gmaxş›Á
 = 2048,

32 
	gadd»ss
 = 

,

33 
	gpÜt
 = "10002",

34 
	gmaxş›Á
 = 2048,

39 
	gb©e
 = {

40 
g©e_li¡
 = {

42 
add»ss
 = 

,

43 
	gpÜt
 = "10003",

44 
	gmaxş›Á
 = 2048,

47 
	gadd»ss
 = 

,

48 
	gpÜt
 = "10004",

49 
	gmaxş›Á
 = 2048,

	@luaclib/lua_cjson.c

39 
	~<as£¹.h
>

40 
	~<¡ršg.h
>

41 
	~<m©h.h
>

42 
	~<lim™s.h
>

43 
	~<lua.h
>

44 
	~<Ïuxlib.h
>

46 
	~"¡rbuf.h
"

47 
	~"åcÚv.h
"

49 #iâdeà
CJSON_MODNAME


50 
	#CJSON_MODNAME
 "cjsÚ"

	)

53 #iâdeà
CJSON_VERSION


54 
	#CJSON_VERSION
 "2.1.0"

	)

58 #ià!
defšed
(
isšf
è&& (defšed(
USE_INTERNAL_ISINF
è|| defšed(
MISSING_ISINF
))

59 
	#isšf
(
x
è(!
	`i¢ª
(xè&& i¢ª((xè- (x)))

	)

62 
	#DEFAULT_SPARSE_CONVERT
 0

	)

63 
	#DEFAULT_SPARSE_RATIO
 2

	)

64 
	#DEFAULT_SPARSE_SAFE
 10

	)

65 
	#DEFAULT_ENCODE_MAX_DEPTH
 1000

	)

66 
	#DEFAULT_DECODE_MAX_DEPTH
 1000

	)

67 
	#DEFAULT_ENCODE_INVALID_NUMBERS
 0

	)

68 
	#DEFAULT_DECODE_INVALID_NUMBERS
 1

	)

69 
	#DEFAULT_ENCODE_KEEP_BUFFER
 1

	)

70 
	#DEFAULT_ENCODE_NUMBER_PRECISION
 14

	)

72 #ifdeà
DISABLE_INVALID_NUMBERS


73 #undeà
DEFAULT_DECODE_INVALID_NUMBERS


74 
	#DEFAULT_DECODE_INVALID_NUMBERS
 0

	)

78 
	mT_OBJ_BEGIN
,

79 
	mT_OBJ_END
,

80 
	mT_ARR_BEGIN
,

81 
	mT_ARR_END
,

82 
	mT_STRING
,

83 
	mT_NUMBER
,

84 
	mT_BOOLEAN
,

85 
	mT_NULL
,

86 
	mT_COLON
,

87 
	mT_COMMA
,

88 
	mT_END
,

89 
	mT_WHITESPACE
,

90 
	mT_ERROR
,

91 
	mT_UNKNOWN


92 } 
	tjsÚ_tok’_ty³_t
;

94 cÚ¡ *
	gjsÚ_tok’_ty³_Çme
[] = {

109 
NULL


113 
jsÚ_tok’_ty³_t
 
	mch2tok’
[256];

114 
	mesÿ³2ch¬
[256];

118 
¡rbuf_t
 
	m’code_buf
;

120 
	m’code_¥¬£_cÚv”t
;

121 
	m’code_¥¬£_¿tio
;

122 
	m’code_¥¬£_§ã
;

123 
	m’code_max_d•th
;

124 
	m’code_šv®id_numb”s
;

125 
	m’code_numb”_´ecisiÚ
;

126 
	m’code_k“p_bufãr
;

128 
	mdecode_šv®id_numb”s
;

129 
	mdecode_max_d•th
;

130 } 
	tjsÚ_cÚfig_t
;

133 cÚ¡ *
	md©a
;

134 cÚ¡ *
	m±r
;

135 
¡rbuf_t
 *
	mtmp
;

136 
jsÚ_cÚfig_t
 *
	mcfg
;

137 
	mcu¼’t_d•th
;

138 } 
	tjsÚ_·r£_t
;

141 
jsÚ_tok’_ty³_t
 
	mty³
;

142 
	mšdex
;

144 cÚ¡ *
	m¡ršg
;

145 
	mnumb”
;

146 
	mboŞ—n
;

147 } 
	mv®ue
;

148 
	m¡ršg_Ën
;

149 } 
	tjsÚ_tok’_t
;

151 cÚ¡ *
	gch¬2esÿ³
[256] = {

160 
NULL
, NULL, "\\\"", NULL, NULL, NULL, NULL, NULL,

161 
NULL
, NULL, NULL, NULL, NULL, NULL, NULL, "\\/",

162 
NULL
, NULL, NULL, NULL, NULL, NULL, NULL, NULL,

163 
NULL
, NULL, NULL, NULL, NULL, NULL, NULL, NULL,

164 
NULL
, NULL, NULL, NULL, NULL, NULL, NULL, NULL,

165 
NULL
, NULL, NULL, NULL, NULL, NULL, NULL, NULL,

166 
NULL
, NULL, NULL, NULL, NULL, NULL, NULL, NULL,

167 
NULL
, NULL, NULL, NULL, "\\\\", NULL, NULL, NULL,

168 
NULL
, NULL, NULL, NULL, NULL, NULL, NULL, NULL,

169 
NULL
, NULL, NULL, NULL, NULL, NULL, NULL, NULL,

170 
NULL
, NULL, NULL, NULL, NULL, NULL, NULL, NULL,

171 
NULL
, NULL, NULL, NULL, NULL, NULL, NULL, "\\u007f",

172 
NULL
, NULL, NULL, NULL, NULL, NULL, NULL, NULL,

173 
NULL
, NULL, NULL, NULL, NULL, NULL, NULL, NULL,

174 
NULL
, NULL, NULL, NULL, NULL, NULL, NULL, NULL,

175 
NULL
, NULL, NULL, NULL, NULL, NULL, NULL, NULL,

176 
NULL
, NULL, NULL, NULL, NULL, NULL, NULL, NULL,

177 
NULL
, NULL, NULL, NULL, NULL, NULL, NULL, NULL,

178 
NULL
, NULL, NULL, NULL, NULL, NULL, NULL, NULL,

179 
NULL
, NULL, NULL, NULL, NULL, NULL, NULL, NULL,

180 
NULL
, NULL, NULL, NULL, NULL, NULL, NULL, NULL,

181 
NULL
, NULL, NULL, NULL, NULL, NULL, NULL, NULL,

182 
NULL
, NULL, NULL, NULL, NULL, NULL, NULL, NULL,

183 
NULL
, NULL, NULL, NULL, NULL, NULL, NULL, NULL,

184 
NULL
, NULL, NULL, NULL, NULL, NULL, NULL, NULL,

185 
NULL
, NULL, NULL, NULL, NULL, NULL, NULL, NULL,

186 
NULL
, NULL, NULL, NULL, NULL, NULL, NULL, NULL,

187 
NULL
, NULL, NULL, NULL, NULL, NULL, NULL, NULL,

192 
jsÚ_cÚfig_t
 *
	$jsÚ_ãtch_cÚfig
(
lua_S‹
 *
l
)

194 
jsÚ_cÚfig_t
 *
cfg
;

196 
cfg
 = 
	`lua_tou£rd©a
(
l
, 
	`lua_upv®uešdex
(1));

197 ià(!
cfg
)

198 
	`luaL_”rÜ
(
l
, "BUG: Unableo fetch CJSON configuration");

200  
cfg
;

201 
	}
}

206 
jsÚ_cÚfig_t
 *
	$jsÚ_¬g_š™
(
lua_S‹
 *
l
, 
¬gs
)

208 
	`luaL_¬gcheck
(
l
, 
	`lua_g‘tİ
Öè<ğ
¬gs
,‡rgs + 1,

211 
	`lua_g‘tİ
(
l
è< 
¬gs
)

212 
	`lua_pushn
(
l
);

214  
	`jsÚ_ãtch_cÚfig
(
l
);

215 
	}
}

218 
	$jsÚ_š‹g”_İtiÚ
(
lua_S‹
 *
l
, 
İtšdex
, *
£‰šg
,

219 
mš
, 
max
)

221 
”rmsg
[64];

222 
v®ue
;

224 ià(!
	`lua_i¢
(
l
, 
İtšdex
)) {

225 
v®ue
 = 
	`luaL_checkš‹g”
(
l
, 
İtšdex
);

226 
	`¢´štf
(
”rmsg
, Ó¼msg), "ex³ùed iÁeg” b‘w“À%d‡nd %d", 
mš
, 
max
);

227 
	`luaL_¬gcheck
(
l
, 
mš
 <ğ
v®ue
 && v®u<ğ
max
, 1, 
”rmsg
);

228 *
£‰šg
 = 
v®ue
;

231 
	`lua_pushš‹g”
(
l
, *
£‰šg
);

234 
	}
}

237 
	$jsÚ_’um_İtiÚ
(
lua_S‹
 *
l
, 
İtšdex
, *
£‰šg
,

238 cÚ¡ **
İtiÚs
, 
boŞ_Œue
)

240 cÚ¡ *
boŞ_İtiÚs
[] = { "off", "Ú", 
NULL
 };

242 ià(!
İtiÚs
) {

243 
İtiÚs
 = 
boŞ_İtiÚs
;

244 
boŞ_Œue
 = 1;

247 ià(!
	`lua_i¢
(
l
, 
İtšdex
)) {

248 ià(
boŞ_Œue
 && 
	`lua_isboŞ—n
(
l
, 
İtšdex
))

249 *
£‰šg
 = 
	`lua_toboŞ—n
(
l
, 
İtšdex
è* 
boŞ_Œue
;

251 *
£‰šg
 = 
	`luaL_checkİtiÚ
(
l
, 
İtšdex
, 
NULL
, 
İtiÚs
);

254 ià(
boŞ_Œue
 && (*
£‰šg
 == 0 || *setting == bool_true))

255 
	`lua_pushboŞ—n
(
l
, *
£‰šg
);

257 
	`lua_push¡ršg
(
l
, 
İtiÚs
[*
£‰šg
]);

260 
	}
}

266 
	$jsÚ_cfg_’code_¥¬£_¬¿y
(
lua_S‹
 *
l
)

268 
jsÚ_cÚfig_t
 *
cfg
 = 
	`jsÚ_¬g_š™
(
l
, 3);

270 
	`jsÚ_’um_İtiÚ
(
l
, 1, &
cfg
->
’code_¥¬£_cÚv”t
, 
NULL
, 1);

271 
	`jsÚ_š‹g”_İtiÚ
(
l
, 2, &
cfg
->
’code_¥¬£_¿tio
, 0, 
INT_MAX
);

272 
	`jsÚ_š‹g”_İtiÚ
(
l
, 3, &
cfg
->
’code_¥¬£_§ã
, 0, 
INT_MAX
);

275 
	}
}

279 
	$jsÚ_cfg_’code_max_d•th
(
lua_S‹
 *
l
)

281 
jsÚ_cÚfig_t
 *
cfg
 = 
	`jsÚ_¬g_š™
(
l
, 1);

283  
	`jsÚ_š‹g”_İtiÚ
(
l
, 1, &
cfg
->
’code_max_d•th
, 1, 
INT_MAX
);

284 
	}
}

288 
	$jsÚ_cfg_decode_max_d•th
(
lua_S‹
 *
l
)

290 
jsÚ_cÚfig_t
 *
cfg
 = 
	`jsÚ_¬g_š™
(
l
, 1);

292  
	`jsÚ_š‹g”_İtiÚ
(
l
, 1, &
cfg
->
decode_max_d•th
, 1, 
INT_MAX
);

293 
	}
}

296 
	$jsÚ_cfg_’code_numb”_´ecisiÚ
(
lua_S‹
 *
l
)

298 
jsÚ_cÚfig_t
 *
cfg
 = 
	`jsÚ_¬g_š™
(
l
, 1);

300  
	`jsÚ_š‹g”_İtiÚ
(
l
, 1, &
cfg
->
’code_numb”_´ecisiÚ
, 1, 14);

301 
	}
}

304 
	$jsÚ_cfg_’code_k“p_bufãr
(
lua_S‹
 *
l
)

306 
jsÚ_cÚfig_t
 *
cfg
 = 
	`jsÚ_¬g_š™
(
l
, 1);

307 
Şd_v®ue
;

309 
Şd_v®ue
 = 
cfg
->
’code_k“p_bufãr
;

311 
	`jsÚ_’um_İtiÚ
(
l
, 1, &
cfg
->
’code_k“p_bufãr
, 
NULL
, 1);

314 ià(
Şd_v®ue
 ^ 
cfg
->
’code_k“p_bufãr
) {

315 ià(
cfg
->
’code_k“p_bufãr
)

316 
	`¡rbuf_š™
(&
cfg
->
’code_buf
, 0);

318 
	`¡rbuf_ä“
(&
cfg
->
’code_buf
);

322 
	}
}

324 #ià
defšed
(
DISABLE_INVALID_NUMBERS
è&& !defšed(
USE_INTERNAL_FPCONV
)

325 
	$jsÚ_v”ify_šv®id_numb”_£‰šg
(
lua_S‹
 *
l
, *
£‰šg
)

327 ià(*
£‰šg
 == 1) {

328 *
£‰šg
 = 0;

329 
	`luaL_”rÜ
(
l
, "Infinity, NaN,‡nd/or hexadecimal‚umbers‡re‚ot supported.");

331 
	}
}

333 
	#jsÚ_v”ify_šv®id_numb”_£‰šg
(
l
, 
s
èdØ{ } 0)

	)

336 
	$jsÚ_cfg_’code_šv®id_numb”s
(
lua_S‹
 *
l
)

338 cÚ¡ *
İtiÚs
[] = { "off", "Ú", "nuÎ", 
NULL
 };

339 
jsÚ_cÚfig_t
 *
cfg
 = 
	`jsÚ_¬g_š™
(
l
, 1);

341 
	`jsÚ_’um_İtiÚ
(
l
, 1, &
cfg
->
’code_šv®id_numb”s
, 
İtiÚs
, 1);

343 
	`jsÚ_v”ify_šv®id_numb”_£‰šg
(
l
, &
cfg
->
’code_šv®id_numb”s
);

346 
	}
}

348 
	$jsÚ_cfg_decode_šv®id_numb”s
(
lua_S‹
 *
l
)

350 
jsÚ_cÚfig_t
 *
cfg
 = 
	`jsÚ_¬g_š™
(
l
, 1);

352 
	`jsÚ_’um_İtiÚ
(
l
, 1, &
cfg
->
decode_šv®id_numb”s
, 
NULL
, 1);

354 
	`jsÚ_v”ify_šv®id_numb”_£‰šg
(
l
, &
cfg
->
’code_šv®id_numb”s
);

357 
	}
}

359 
	$jsÚ_de¡roy_cÚfig
(
lua_S‹
 *
l
)

361 
jsÚ_cÚfig_t
 *
cfg
;

363 
cfg
 = 
	`lua_tou£rd©a
(
l
, 1);

364 ià(
cfg
)

365 
	`¡rbuf_ä“
(&
cfg
->
’code_buf
);

366 
cfg
 = 
NULL
;

369 
	}
}

371 
	$jsÚ_ü—‹_cÚfig
(
lua_S‹
 *
l
)

373 
jsÚ_cÚfig_t
 *
cfg
;

374 
i
;

376 
cfg
 = 
	`lua_Ãwu£rd©a
(
l
, (*cfg));

379 
	`lua_ÃwbË
(
l
);

380 
	`lua_pushcfunùiÚ
(
l
, 
jsÚ_de¡roy_cÚfig
);

381 
	`lua_£tf›ld
(
l
, -2, "__gc");

382 
	`lua_£tm‘©abË
(
l
, -2);

384 
cfg
->
’code_¥¬£_cÚv”t
 = 
DEFAULT_SPARSE_CONVERT
;

385 
cfg
->
’code_¥¬£_¿tio
 = 
DEFAULT_SPARSE_RATIO
;

386 
cfg
->
’code_¥¬£_§ã
 = 
DEFAULT_SPARSE_SAFE
;

387 
cfg
->
’code_max_d•th
 = 
DEFAULT_ENCODE_MAX_DEPTH
;

388 
cfg
->
decode_max_d•th
 = 
DEFAULT_DECODE_MAX_DEPTH
;

389 
cfg
->
’code_šv®id_numb”s
 = 
DEFAULT_ENCODE_INVALID_NUMBERS
;

390 
cfg
->
decode_šv®id_numb”s
 = 
DEFAULT_DECODE_INVALID_NUMBERS
;

391 
cfg
->
’code_k“p_bufãr
 = 
DEFAULT_ENCODE_KEEP_BUFFER
;

392 
cfg
->
’code_numb”_´ecisiÚ
 = 
DEFAULT_ENCODE_NUMBER_PRECISION
;

394 #ià
DEFAULT_ENCODE_KEEP_BUFFER
 > 0

395 
	`¡rbuf_š™
(&
cfg
->
’code_buf
, 0);

401 
i
 = 0; i < 256; i++)

402 
cfg
->
ch2tok’
[
i
] = 
T_ERROR
;

405 
cfg
->
ch2tok’
['{'] = 
T_OBJ_BEGIN
;

406 
cfg
->
ch2tok’
['}'] = 
T_OBJ_END
;

407 
cfg
->
ch2tok’
['['] = 
T_ARR_BEGIN
;

408 
cfg
->
ch2tok’
[']'] = 
T_ARR_END
;

409 
cfg
->
ch2tok’
[','] = 
T_COMMA
;

410 
cfg
->
ch2tok’
[':'] = 
T_COLON
;

411 
cfg
->
ch2tok’
['\0'] = 
T_END
;

412 
cfg
->
ch2tok’
[' '] = 
T_WHITESPACE
;

413 
cfg
->
ch2tok’
['\t'] = 
T_WHITESPACE
;

414 
cfg
->
ch2tok’
['\n'] = 
T_WHITESPACE
;

415 
cfg
->
ch2tok’
['\r'] = 
T_WHITESPACE
;

418 
cfg
->
ch2tok’
['f'] = 
T_UNKNOWN
;

419 
cfg
->
ch2tok’
['i'] = 
T_UNKNOWN
;

420 
cfg
->
ch2tok’
['I'] = 
T_UNKNOWN
;

421 
cfg
->
ch2tok’
['n'] = 
T_UNKNOWN
;

422 
cfg
->
ch2tok’
['N'] = 
T_UNKNOWN
;

423 
cfg
->
ch2tok’
['t'] = 
T_UNKNOWN
;

424 
cfg
->
ch2tok’
['"'] = 
T_UNKNOWN
;

425 
cfg
->
ch2tok’
['+'] = 
T_UNKNOWN
;

426 
cfg
->
ch2tok’
['-'] = 
T_UNKNOWN
;

427 
i
 = 0; i < 10; i++)

428 
cfg
->
ch2tok’
['0' + 
i
] = 
T_UNKNOWN
;

431 
i
 = 0; i < 256; i++)

432 
cfg
->
esÿ³2ch¬
[
i
] = 0;

433 
cfg
->
esÿ³2ch¬
['"'] = '"';

434 
cfg
->
esÿ³2ch¬
['\\'] = '\\';

435 
cfg
->
esÿ³2ch¬
['/'] = '/';

436 
cfg
->
esÿ³2ch¬
['b'] = '\b';

437 
cfg
->
esÿ³2ch¬
['t'] = '\t';

438 
cfg
->
esÿ³2ch¬
['n'] = '\n';

439 
cfg
->
esÿ³2ch¬
['f'] = '\f';

440 
cfg
->
esÿ³2ch¬
['r'] = '\r';

441 
cfg
->
esÿ³2ch¬
['u'] = 'u';

442 
	}
}

446 
	$jsÚ_’code_exû±iÚ
(
lua_S‹
 *
l
, 
jsÚ_cÚfig_t
 *
cfg
, 
¡rbuf_t
 *
jsÚ
, 
lšdex
,

447 cÚ¡ *
»asÚ
)

449 ià(!
cfg
->
’code_k“p_bufãr
)

450 
	`¡rbuf_ä“
(
jsÚ
);

451 
	`luaL_”rÜ
(
l
, "Cannot serialise %s: %s",

452 
	`lua_ty³Çme
(
l
, 
	`lua_ty³
Ö, 
lšdex
)), 
»asÚ
);

453 
	}
}

461 
	$jsÚ_­³nd_¡ršg
(
lua_S‹
 *
l
, 
¡rbuf_t
 *
jsÚ
, 
lšdex
)

463 cÚ¡ *
esc¡r
;

464 
i
;

465 cÚ¡ *
¡r
;

466 
size_t
 
Ën
;

468 
¡r
 = 
	`lua_tŞ¡ršg
(
l
, 
lšdex
, &
Ën
);

474 
	`¡rbuf_’su»_em±y_Ëngth
(
jsÚ
, 
Ën
 * 6 + 2);

476 
	`¡rbuf_­³nd_ch¬_un§ã
(
jsÚ
, '\"');

477 
i
 = 0; i < 
Ën
; i++) {

478 
esc¡r
 = 
ch¬2esÿ³
[()
¡r
[
i
]];

479 ià(
esc¡r
)

480 
	`¡rbuf_­³nd_¡ršg
(
jsÚ
, 
esc¡r
);

482 
	`¡rbuf_­³nd_ch¬_un§ã
(
jsÚ
, 
¡r
[
i
]);

484 
	`¡rbuf_­³nd_ch¬_un§ã
(
jsÚ
, '\"');

485 
	}
}

491 
	$lua_¬¿y_Ëngth
(
lua_S‹
 *
l
, 
jsÚ_cÚfig_t
 *
cfg
, 
¡rbuf_t
 *
jsÚ
)

493 
k
;

494 
max
;

495 
™ems
;

497 
max
 = 0;

498 
™ems
 = 0;

500 
	`lua_pushn
(
l
);

502 
	`lua_Ãxt
(
l
, -2) != 0) {

504 ià(
	`lua_ty³
(
l
, -2è=ğ
LUA_TNUMBER
 &&

505 (
k
 = 
	`lua_tÚumb”
(
l
, -2))) {

507 ià(
	`æoÜ
(
k
) == k && k >= 1) {

508 ià(
k
 > 
max
)

509 
max
 = 
k
;

510 
™ems
++;

511 
	`lua_pİ
(
l
, 1);

517 
	`lua_pİ
(
l
, 2);

522 ià(
cfg
->
’code_¥¬£_¿tio
 > 0 &&

523 
max
 > 
™ems
 * 
cfg
->
’code_¥¬£_¿tio
 &&

524 
max
 > 
cfg
->
’code_¥¬£_§ã
) {

525 ià(!
cfg
->
’code_¥¬£_cÚv”t
)

526 
	`jsÚ_’code_exû±iÚ
(
l
, 
cfg
, 
jsÚ
, -1, "excessively sparse‡rray");

531  
max
;

532 
	}
}

534 
	$jsÚ_check_’code_d•th
(
lua_S‹
 *
l
, 
jsÚ_cÚfig_t
 *
cfg
,

535 
cu¼’t_d•th
, 
¡rbuf_t
 *
jsÚ
)

547 ià(
cu¼’t_d•th
 <ğ
cfg
->
’code_max_d•th
 && 
	`lua_check¡ack
(
l
, 3))

550 ià(!
cfg
->
’code_k“p_bufãr
)

551 
	`¡rbuf_ä“
(
jsÚ
);

553 
	`luaL_”rÜ
(
l
, "Cannot serialise,ƒxcessive‚esting (%d)",

554 
cu¼’t_d•th
);

555 
	}
}

557 
jsÚ_­³nd_d©a
(
lua_S‹
 *
l
, 
jsÚ_cÚfig_t
 *
cfg
,

558 
cu¼’t_d•th
, 
¡rbuf_t
 *
jsÚ
);

564 
	$jsÚ_­³nd_¬¿y
(
lua_S‹
 *
l
, 
jsÚ_cÚfig_t
 *
cfg
, 
cu¼’t_d•th
,

565 
¡rbuf_t
 *
jsÚ
, 
¬¿y_Ëngth
)

567 
comma
, 
i
;

569 
	`¡rbuf_­³nd_ch¬
(
jsÚ
, '[');

571 
comma
 = 0;

572 
i
 = 1; i <ğ
¬¿y_Ëngth
; i++) {

573 ià(
comma
)

574 
	`¡rbuf_­³nd_ch¬
(
jsÚ
, ',');

576 
comma
 = 1;

578 
	`lua_¿wg‘i
(
l
, -1, 
i
);

579 
	`jsÚ_­³nd_d©a
(
l
, 
cfg
, 
cu¼’t_d•th
, 
jsÚ
);

580 
	`lua_pİ
(
l
, 1);

583 
	`¡rbuf_­³nd_ch¬
(
jsÚ
, ']');

584 
	}
}

586 
	$jsÚ_­³nd_numb”
(
lua_S‹
 *
l
, 
jsÚ_cÚfig_t
 *
cfg
,

587 
¡rbuf_t
 *
jsÚ
, 
lšdex
)

589 
num
 = 
	`lua_tÚumb”
(
l
, 
lšdex
);

590 
Ën
;

592 ià(
cfg
->
’code_šv®id_numb”s
 == 0) {

594 ià(
	`isšf
(
num
è|| 
	`i¢ª
(num))

595 
	`jsÚ_’code_exû±iÚ
(
l
, 
cfg
, 
jsÚ
, 
lšdex
, "must‚ot be NaN or Inf");

596 } ià(
cfg
->
’code_šv®id_numb”s
 == 1) {

599 ià(
	`i¢ª
(
num
)) {

600 
	`¡rbuf_­³nd_mem
(
jsÚ
, "nan", 3);

605 ià(
	`isšf
(
num
è|| 
	`i¢ª
(num)) {

606 
	`¡rbuf_­³nd_mem
(
jsÚ
, "null", 4);

611 
	`¡rbuf_’su»_em±y_Ëngth
(
jsÚ
, 
FPCONV_G_FMT_BUFSIZE
);

612 
Ën
 = 
	`åcÚv_g_fmt
(
	`¡rbuf_em±y_±r
(
jsÚ
), 
num
, 
cfg
->
’code_numb”_´ecisiÚ
);

613 
	`¡rbuf_ex‹nd_Ëngth
(
jsÚ
, 
Ën
);

614 
	}
}

616 
	$jsÚ_­³nd_objeù
(
lua_S‹
 *
l
, 
jsÚ_cÚfig_t
 *
cfg
,

617 
cu¼’t_d•th
, 
¡rbuf_t
 *
jsÚ
)

619 
comma
, 
keyty³
;

622 
	`¡rbuf_­³nd_ch¬
(
jsÚ
, '{');

624 
	`lua_pushn
(
l
);

626 
comma
 = 0;

627 
	`lua_Ãxt
(
l
, -2) != 0) {

628 ià(
comma
)

629 
	`¡rbuf_­³nd_ch¬
(
jsÚ
, ',');

631 
comma
 = 1;

634 
keyty³
 = 
	`lua_ty³
(
l
, -2);

635 ià(
keyty³
 =ğ
LUA_TNUMBER
) {

636 
	`¡rbuf_­³nd_ch¬
(
jsÚ
, '"');

637 
	`jsÚ_­³nd_numb”
(
l
, 
cfg
, 
jsÚ
, -2);

638 
	`¡rbuf_­³nd_mem
(
jsÚ
, "\":", 2);

639 } ià(
keyty³
 =ğ
LUA_TSTRING
) {

640 
	`jsÚ_­³nd_¡ršg
(
l
, 
jsÚ
, -2);

641 
	`¡rbuf_­³nd_ch¬
(
jsÚ
, ':');

643 
	`jsÚ_’code_exû±iÚ
(
l
, 
cfg
, 
jsÚ
, -2,

649 
	`jsÚ_­³nd_d©a
(
l
, 
cfg
, 
cu¼’t_d•th
, 
jsÚ
);

650 
	`lua_pİ
(
l
, 1);

654 
	`¡rbuf_­³nd_ch¬
(
jsÚ
, '}');

655 
	}
}

658 
	$jsÚ_­³nd_d©a
(
lua_S‹
 *
l
, 
jsÚ_cÚfig_t
 *
cfg
,

659 
cu¼’t_d•th
, 
¡rbuf_t
 *
jsÚ
)

661 
Ën
;

663 
	`lua_ty³
(
l
, -1)) {

664 
LUA_TSTRING
:

665 
	`jsÚ_­³nd_¡ršg
(
l
, 
jsÚ
, -1);

667 
LUA_TNUMBER
:

668 
	`jsÚ_­³nd_numb”
(
l
, 
cfg
, 
jsÚ
, -1);

670 
LUA_TBOOLEAN
:

671 ià(
	`lua_toboŞ—n
(
l
, -1))

672 
	`¡rbuf_­³nd_mem
(
jsÚ
, "true", 4);

674 
	`¡rbuf_­³nd_mem
(
jsÚ
, "false", 5);

676 
LUA_TTABLE
:

677 
cu¼’t_d•th
++;

678 
	`jsÚ_check_’code_d•th
(
l
, 
cfg
, 
cu¼’t_d•th
, 
jsÚ
);

679 
Ën
 = 
	`lua_¬¿y_Ëngth
(
l
, 
cfg
, 
jsÚ
);

680 ià(
Ën
 > 0)

681 
	`jsÚ_­³nd_¬¿y
(
l
, 
cfg
, 
cu¼’t_d•th
, 
jsÚ
, 
Ën
);

683 
	`jsÚ_­³nd_objeù
(
l
, 
cfg
, 
cu¼’t_d•th
, 
jsÚ
);

685 
LUA_TNIL
:

686 
	`¡rbuf_­³nd_mem
(
jsÚ
, "null", 4);

688 
LUA_TLIGHTUSERDATA
:

689 ià(
	`lua_tou£rd©a
(
l
, -1è=ğ
NULL
) {

690 
	`¡rbuf_­³nd_mem
(
jsÚ
, "null", 4);

696 
	`jsÚ_’code_exû±iÚ
(
l
, 
cfg
, 
jsÚ
, -1, "type‚ot supported");

699 
	}
}

701 
	$jsÚ_’code
(
lua_S‹
 *
l
)

703 
jsÚ_cÚfig_t
 *
cfg
 = 
	`jsÚ_ãtch_cÚfig
(
l
);

704 
¡rbuf_t
 
loÿl_’code_buf
;

705 
¡rbuf_t
 *
’code_buf
;

706 *
jsÚ
;

707 
Ën
;

709 
	`luaL_¬gcheck
(
l
, 
	`lua_g‘tİ
(l) == 1, 1, "expected 1‡rgument");

711 ià(!
cfg
->
’code_k“p_bufãr
) {

713 
’code_buf
 = &
loÿl_’code_buf
;

714 
	`¡rbuf_š™
(
’code_buf
, 0);

717 
’code_buf
 = &
cfg
->encode_buf;

718 
	`¡rbuf_»£t
(
’code_buf
);

721 
	`jsÚ_­³nd_d©a
(
l
, 
cfg
, 0, 
’code_buf
);

722 
jsÚ
 = 
	`¡rbuf_¡ršg
(
’code_buf
, &
Ën
);

724 
	`lua_pushl¡ršg
(
l
, 
jsÚ
, 
Ën
);

726 ià(!
cfg
->
’code_k“p_bufãr
)

727 
	`¡rbuf_ä“
(
’code_buf
);

730 
	}
}

734 
jsÚ_´oûss_v®ue
(
lua_S‹
 *
l
, 
jsÚ_·r£_t
 *
jsÚ
,

735 
jsÚ_tok’_t
 *
tok’
);

737 
	$hexdig™2št
(
hex
)

739 ià('0' <ğ
hex
 && hex <= '9')

740  
hex
 - '0';

743 
hex
 |= 0x20;

744 ià('a' <ğ
hex
 && hex <= 'f')

745  10 + 
hex
 - 'a';

748 
	}
}

750 
	$decode_hex4
(cÚ¡ *
hex
)

752 
dig™
[4];

753 
i
;

758 
i
 = 0; i < 4; i++) {

759 
dig™
[
i
] = 
	`hexdig™2št
(
hex
[i]);

760 ià(
dig™
[
i
] < 0) {

765  (
dig™
[0] << 12) +

766 (
dig™
[1] << 8) +

767 (
dig™
[2] << 4) +

768 
dig™
[3];

769 
	}
}

773 
	$cod•ošt_to_utf8
(*
utf8
, 
cod•ošt
)

776 ià(
cod•ošt
 <= 0x7F) {

777 
utf8
[0] = 
cod•ošt
;

782 ià(
cod•ošt
 <= 0x7FF) {

783 
utf8
[0] = (
cod•ošt
 >> 6) | 0xC0;

784 
utf8
[1] = (
cod•ošt
 & 0x3F) | 0x80;

789 ià(
cod•ošt
 <= 0xFFFF) {

790 
utf8
[0] = (
cod•ošt
 >> 12) | 0xE0;

791 
utf8
[1] = ((
cod•ošt
 >> 6) & 0x3F) | 0x80;

792 
utf8
[2] = (
cod•ošt
 & 0x3F) | 0x80;

797 ià(
cod•ošt
 <= 0x1FFFFF) {

798 
utf8
[0] = (
cod•ošt
 >> 18) | 0xF0;

799 
utf8
[1] = ((
cod•ošt
 >> 12) & 0x3F) | 0x80;

800 
utf8
[2] = ((
cod•ošt
 >> 6) & 0x3F) | 0x80;

801 
utf8
[3] = (
cod•ošt
 & 0x3F) | 0x80;

806 
	}
}

817 
	$jsÚ_­³nd_unicode_esÿ³
(
jsÚ_·r£_t
 *
jsÚ
)

819 
utf8
[4];

820 
cod•ošt
;

821 
su¼og©e_low
;

822 
Ën
;

823 
esÿ³_Ën
 = 6;

826 
cod•ošt
 = 
	`decode_hex4
(
jsÚ
->
±r
 + 2);

827 ià(
cod•ošt
 < 0)

836 ià((
cod•ošt
 & 0xF800) == 0xD800) {

838 ià(
cod•ošt
 & 0x400)

842 ià(*(
jsÚ
->
±r
 + 
esÿ³_Ën
) != '\\' ||

843 *(
jsÚ
->
±r
 + 
esÿ³_Ën
 + 1) != 'u') {

848 
su¼og©e_low
 = 
	`decode_hex4
(
jsÚ
->
±r
 + 2 + 
esÿ³_Ën
);

849 ià(
su¼og©e_low
 < 0)

853 ià((
su¼og©e_low
 & 0xFC00) != 0xDC00)

857 
cod•ošt
 = (codepoint & 0x3FF) << 10;

858 
su¼og©e_low
 &= 0x3FF;

859 
cod•ošt
 = (cod•ošˆ| 
su¼og©e_low
) + 0x10000;

860 
esÿ³_Ën
 = 12;

864 
Ën
 = 
	`cod•ošt_to_utf8
(
utf8
, 
cod•ošt
);

865 ià(!
Ën
)

869 
	`¡rbuf_­³nd_mem_un§ã
(
jsÚ
->
tmp
, 
utf8
, 
Ën
);

870 
jsÚ
->
±r
 +ğ
esÿ³_Ën
;

873 
	}
}

875 
	$jsÚ_£t_tok’_”rÜ
(
jsÚ_tok’_t
 *
tok’
, 
jsÚ_·r£_t
 *
jsÚ
,

876 cÚ¡ *
”¹y³
)

878 
tok’
->
ty³
 = 
T_ERROR
;

879 
tok’
->
šdex
 = 
jsÚ
->
±r
 - jsÚ->
d©a
;

880 
tok’
->
v®ue
.
¡ršg
 = 
”¹y³
;

881 
	}
}

883 
	$jsÚ_Ãxt_¡ršg_tok’
(
jsÚ_·r£_t
 *
jsÚ
, 
jsÚ_tok’_t
 *
tok’
)

885 *
esÿ³2ch¬
 = 
jsÚ
->
cfg
->escape2char;

886 
ch
;

889 
	`as£¹
(*
jsÚ
->
±r
 == '"');

892 
jsÚ
->
±r
++;

898 
	`¡rbuf_»£t
(
jsÚ
->
tmp
);

900 (
ch
 = *
jsÚ
->
±r
) != '"') {

901 ià(!
ch
) {

903 
	`jsÚ_£t_tok’_”rÜ
(
tok’
, 
jsÚ
, "unexpectedƒnd of string");

908 ià(
ch
 == '\\') {

910 
ch
 = *(
jsÚ
->
±r
 + 1);

913 
ch
 = 
esÿ³2ch¬
[()ch];

914 ià(
ch
 == 'u') {

915 ià(
	`jsÚ_­³nd_unicode_esÿ³
(
jsÚ
) == 0)

918 
	`jsÚ_£t_tok’_”rÜ
(
tok’
, 
jsÚ
,

922 ià(!
ch
) {

923 
	`jsÚ_£t_tok’_”rÜ
(
tok’
, 
jsÚ
, "invalidƒscape code");

928 
jsÚ
->
±r
++;

932 
	`¡rbuf_­³nd_ch¬_un§ã
(
jsÚ
->
tmp
, 
ch
);

933 
jsÚ
->
±r
++;

935 
jsÚ
->
±r
++;

937 
	`¡rbuf_’su»_nuÎ
(
jsÚ
->
tmp
);

939 
tok’
->
ty³
 = 
T_STRING
;

940 
tok’
->
v®ue
.
¡ršg
 = 
	`¡rbuf_¡ršg
(
jsÚ
->
tmp
, &tok’->
¡ršg_Ën
);

941 
	}
}

958 
	$jsÚ_is_šv®id_numb”
(
jsÚ_·r£_t
 *
jsÚ
)

960 cÚ¡ *
p
 = 
jsÚ
->
±r
;

963 ià(*
p
 == '+')

967 ià(*
p
 == '-')

968 
p
++;

971 ià(*
p
 == '0') {

972 
ch2
 = *(
p
 + 1);

974 ià((
ch2
 | 0x20) == 'x' ||

975 ('0' <ğ
ch2
 && ch2 <= '9'))

979 } ià(*
p
 <= '9') {

984 ià(!
	`¡ºÿ£cmp
(
p
, "inf", 3))

986 ià(!
	`¡ºÿ£cmp
(
p
, "nan", 3))

992 
	}
}

994 
	$jsÚ_Ãxt_numb”_tok’
(
jsÚ_·r£_t
 *
jsÚ
, 
jsÚ_tok’_t
 *
tok’
)

996 *
’d±r
;

998 
tok’
->
ty³
 = 
T_NUMBER
;

999 
tok’
->
v®ue
.
numb”
 = 
	`åcÚv_¡¹od
(
jsÚ
->
±r
, &
’d±r
);

1000 ià(
jsÚ
->
±r
 =ğ
’d±r
)

1001 
	`jsÚ_£t_tok’_”rÜ
(
tok’
, 
jsÚ
, "invalid‚umber");

1003 
jsÚ
->
±r
 = 
’d±r
;

1006 
	}
}

1012 
	$jsÚ_Ãxt_tok’
(
jsÚ_·r£_t
 *
jsÚ
, 
jsÚ_tok’_t
 *
tok’
)

1014 cÚ¡ 
jsÚ_tok’_ty³_t
 *
ch2tok’
 = 
jsÚ
->
cfg
->ch2token;

1015 
ch
;

1019 
ch
 = ()*(
jsÚ
->
±r
);

1020 
tok’
->
ty³
 = 
ch2tok’
[
ch
];

1021 ià(
tok’
->
ty³
 !ğ
T_WHITESPACE
)

1023 
jsÚ
->
±r
++;

1028 
tok’
->
šdex
 = 
jsÚ
->
±r
 - jsÚ->
d©a
;

1031 ià(
tok’
->
ty³
 =ğ
T_ERROR
) {

1032 
	`jsÚ_£t_tok’_”rÜ
(
tok’
, 
jsÚ
, "invalidoken");

1036 ià(
tok’
->
ty³
 =ğ
T_END
) {

1041 ià(
tok’
->
ty³
 !ğ
T_UNKNOWN
) {

1042 
jsÚ
->
±r
++;

1052 ià(
ch
 == '"') {

1053 
	`jsÚ_Ãxt_¡ršg_tok’
(
jsÚ
, 
tok’
);

1055 } ià(
ch
 == '-' || ('0' <= ch && ch <= '9')) {

1056 ià(!
jsÚ
->
cfg
->
decode_šv®id_numb”s
 && 
	`jsÚ_is_šv®id_numb”
(json)) {

1057 
	`jsÚ_£t_tok’_”rÜ
(
tok’
, 
jsÚ
, "invalid‚umber");

1060 
	`jsÚ_Ãxt_numb”_tok’
(
jsÚ
, 
tok’
);

1062 } ià(!
	`¡ºcmp
(
jsÚ
->
±r
, "true", 4)) {

1063 
tok’
->
ty³
 = 
T_BOOLEAN
;

1064 
tok’
->
v®ue
.
boŞ—n
 = 1;

1065 
jsÚ
->
±r
 += 4;

1067 } ià(!
	`¡ºcmp
(
jsÚ
->
±r
, "false", 5)) {

1068 
tok’
->
ty³
 = 
T_BOOLEAN
;

1069 
tok’
->
v®ue
.
boŞ—n
 = 0;

1070 
jsÚ
->
±r
 += 5;

1072 } ià(!
	`¡ºcmp
(
jsÚ
->
±r
, "null", 4)) {

1073 
tok’
->
ty³
 = 
T_NULL
;

1074 
jsÚ
->
±r
 += 4;

1076 } ià(
jsÚ
->
cfg
->
decode_šv®id_numb”s
 &&

1077 
	`jsÚ_is_šv®id_numb”
(
jsÚ
)) {

1083 
	`jsÚ_Ãxt_numb”_tok’
(
jsÚ
, 
tok’
);

1088 
	`jsÚ_£t_tok’_”rÜ
(
tok’
, 
jsÚ
, "invalidoken");

1089 
	}
}

1097 
	$jsÚ_throw_·r£_”rÜ
(
lua_S‹
 *
l
, 
jsÚ_·r£_t
 *
jsÚ
,

1098 cÚ¡ *
exp
, 
jsÚ_tok’_t
 *
tok’
)

1100 cÚ¡ *
found
;

1102 
	`¡rbuf_ä“
(
jsÚ
->
tmp
);

1104 ià(
tok’
->
ty³
 =ğ
T_ERROR
)

1105 
found
 = 
tok’
->
v®ue
.
¡ršg
;

1107 
found
 = 
jsÚ_tok’_ty³_Çme
[
tok’
->
ty³
];

1110 
	`luaL_”rÜ
(
l
, "Expected %s but found %s‡t character %d",

1111 
exp
, 
found
, 
tok’
->
šdex
 + 1);

1112 
	}
}

1114 
šlše
 
	$jsÚ_decode_asûnd
(
jsÚ_·r£_t
 *
jsÚ
)

1116 
jsÚ
->
cu¼’t_d•th
--;

1117 
	}
}

1119 
	$jsÚ_decode_desûnd
(
lua_S‹
 *
l
, 
jsÚ_·r£_t
 *
jsÚ
, 
¦Ùs
)

1121 
jsÚ
->
cu¼’t_d•th
++;

1123 ià(
jsÚ
->
cu¼’t_d•th
 <ğjsÚ->
cfg
->
decode_max_d•th
 &&

1124 
	`lua_check¡ack
(
l
, 
¦Ùs
)) {

1128 
	`¡rbuf_ä“
(
jsÚ
->
tmp
);

1129 
	`luaL_”rÜ
(
l
, "Foundoo many‚ested data structures (%d)‡t character %d",

1130 
jsÚ
->
cu¼’t_d•th
, jsÚ->
±r
 - jsÚ->
d©a
);

1131 
	}
}

1133 
	$jsÚ_·r£_objeù_cÚ‹xt
(
lua_S‹
 *
l
, 
jsÚ_·r£_t
 *
jsÚ
)

1135 
jsÚ_tok’_t
 
tok’
;

1139 
	`jsÚ_decode_desûnd
(
l
, 
jsÚ
, 3);

1141 
	`lua_ÃwbË
(
l
);

1143 
	`jsÚ_Ãxt_tok’
(
jsÚ
, &
tok’
);

1146 ià(
tok’
.
ty³
 =ğ
T_OBJ_END
) {

1147 
	`jsÚ_decode_asûnd
(
jsÚ
);

1152 ià(
tok’
.
ty³
 !ğ
T_STRING
)

1153 
	`jsÚ_throw_·r£_”rÜ
(
l
, 
jsÚ
, "objeù key sŒšg", &
tok’
);

1156 
	`lua_pushl¡ršg
(
l
, 
tok’
.
v®ue
.
¡ršg
,ok’.
¡ršg_Ën
);

1158 
	`jsÚ_Ãxt_tok’
(
jsÚ
, &
tok’
);

1159 ià(
tok’
.
ty³
 !ğ
T_COLON
)

1160 
	`jsÚ_throw_·r£_”rÜ
(
l
, 
jsÚ
, "cŞÚ", &
tok’
);

1163 
	`jsÚ_Ãxt_tok’
(
jsÚ
, &
tok’
);

1164 
	`jsÚ_´oûss_v®ue
(
l
, 
jsÚ
, &
tok’
);

1167 
	`lua_¿w£t
(
l
, -3);

1169 
	`jsÚ_Ãxt_tok’
(
jsÚ
, &
tok’
);

1171 ià(
tok’
.
ty³
 =ğ
T_OBJ_END
) {

1172 
	`jsÚ_decode_asûnd
(
jsÚ
);

1176 ià(
tok’
.
ty³
 !ğ
T_COMMA
)

1177 
	`jsÚ_throw_·r£_”rÜ
(
l
, 
jsÚ
, "comm¨Ü objeùƒnd", &
tok’
);

1179 
	`jsÚ_Ãxt_tok’
(
jsÚ
, &
tok’
);

1181 
	}
}

1184 
	$jsÚ_·r£_¬¿y_cÚ‹xt
(
lua_S‹
 *
l
, 
jsÚ_·r£_t
 *
jsÚ
)

1186 
jsÚ_tok’_t
 
tok’
;

1187 
i
;

1191 
	`jsÚ_decode_desûnd
(
l
, 
jsÚ
, 2);

1193 
	`lua_ÃwbË
(
l
);

1195 
	`jsÚ_Ãxt_tok’
(
jsÚ
, &
tok’
);

1198 ià(
tok’
.
ty³
 =ğ
T_ARR_END
) {

1199 
	`jsÚ_decode_asûnd
(
jsÚ
);

1203 
i
 = 1; ; i++) {

1204 
	`jsÚ_´oûss_v®ue
(
l
, 
jsÚ
, &
tok’
);

1205 
	`lua_¿w£ti
(
l
, -2, 
i
);

1207 
	`jsÚ_Ãxt_tok’
(
jsÚ
, &
tok’
);

1209 ià(
tok’
.
ty³
 =ğ
T_ARR_END
) {

1210 
	`jsÚ_decode_asûnd
(
jsÚ
);

1214 ià(
tok’
.
ty³
 !ğ
T_COMMA
)

1215 
	`jsÚ_throw_·r£_”rÜ
(
l
, 
jsÚ
, "comm¨Ü‡¼ayƒnd", &
tok’
);

1217 
	`jsÚ_Ãxt_tok’
(
jsÚ
, &
tok’
);

1219 
	}
}

1222 
	$jsÚ_´oûss_v®ue
(
lua_S‹
 *
l
, 
jsÚ_·r£_t
 *
jsÚ
,

1223 
jsÚ_tok’_t
 *
tok’
)

1225 
tok’
->
ty³
) {

1226 
T_STRING
:

1227 
	`lua_pushl¡ršg
(
l
, 
tok’
->
v®ue
.
¡ršg
,ok’->
¡ršg_Ën
);

1229 
T_NUMBER
:

1230 
	`lua_pushnumb”
(
l
, 
tok’
->
v®ue
.
numb”
);

1232 
T_BOOLEAN
:

1233 
	`lua_pushboŞ—n
(
l
, 
tok’
->
v®ue
.
boŞ—n
);

1235 
T_OBJ_BEGIN
:

1236 
	`jsÚ_·r£_objeù_cÚ‹xt
(
l
, 
jsÚ
);

1238 
T_ARR_BEGIN
:

1239 
	`jsÚ_·r£_¬¿y_cÚ‹xt
(
l
, 
jsÚ
);

1241 
T_NULL
:

1244 
	`lua_pushlightu£rd©a
(
l
, 
NULL
);

1247 
	`jsÚ_throw_·r£_”rÜ
(
l
, 
jsÚ
, "v®ue", 
tok’
);

1249 
	}
}

1251 
	$jsÚ_decode
(
lua_S‹
 *
l
)

1253 
jsÚ_·r£_t
 
jsÚ
;

1254 
jsÚ_tok’_t
 
tok’
;

1255 
size_t
 
jsÚ_Ën
;

1257 
	`luaL_¬gcheck
(
l
, 
	`lua_g‘tİ
(l) == 1, 1, "expected 1‡rgument");

1259 
jsÚ
.
cfg
 = 
	`jsÚ_ãtch_cÚfig
(
l
);

1260 
jsÚ
.
d©a
 = 
	`luaL_checkl¡ršg
(
l
, 1, &
jsÚ_Ën
);

1261 
jsÚ
.
cu¼’t_d•th
 = 0;

1262 
jsÚ
.
±r
 = jsÚ.
d©a
;

1269 ià(
jsÚ_Ën
 >ğ2 && (!
jsÚ
.
d©a
[0] || !json.data[1]))

1270 
	`luaL_”rÜ
(
l
, "JSON…arser does‚ot support UTF-16 or UTF-32");

1275 
jsÚ
.
tmp
 = 
	`¡rbuf_Ãw
(
jsÚ_Ën
);

1277 
	`jsÚ_Ãxt_tok’
(&
jsÚ
, &
tok’
);

1278 
	`jsÚ_´oûss_v®ue
(
l
, &
jsÚ
, &
tok’
);

1281 
	`jsÚ_Ãxt_tok’
(&
jsÚ
, &
tok’
);

1283 ià(
tok’
.
ty³
 !ğ
T_END
)

1284 
	`jsÚ_throw_·r£_”rÜ
(
l
, &
jsÚ
, "th’d", &
tok’
);

1286 
	`¡rbuf_ä“
(
jsÚ
.
tmp
);

1289 
	}
}

1293 #ià!
defšed
(
LUA_VERSION_NUM
) || LUA_VERSION_NUM < 502

1298 
	$luaL_£tfuncs
 (
lua_S‹
 *
l
, cÚ¡ 
luaL_Reg
 *
»g
, 
nup
)

1300 
i
;

1302 
	`luaL_check¡ack
(
l
, 
nup
, "too many upvalues");

1303 ; 
»g
->
Çme
 !ğ
NULL
;„eg++) {

1304 
i
 = 0; i < 
nup
; i++)

1305 
	`lua_pushv®ue
(
l
, -
nup
);

1306 
	`lua_pushcşosu»
(
l
, 
»g
->
func
, 
nup
);

1307 
	`lua_£tf›ld
(
l
, -(
nup
 + 2), 
»g
->
Çme
);

1309 
	`lua_pİ
(
l
, 
nup
);

1310 
	}
}

1316 
	$jsÚ_´Ùeù_cÚv”siÚ
(
lua_S‹
 *
l
)

1318 
”r
;

1321 
	`luaL_¬gcheck
(
l
, 
	`lua_g‘tİ
(l) == 1, 1, "expected 1‡rgument");

1324 
	`lua_pushv®ue
(
l
, 
	`lua_upv®uešdex
(1));

1325 
	`lua_š£¹
(
l
, 1);

1326 
”r
 = 
	`lua_pÿÎ
(
l
, 1, 1, 0);

1327 ià(!
”r
)

1330 ià(
”r
 =ğ
LUA_ERRRUN
) {

1331 
	`lua_pushn
(
l
);

1332 
	`lua_š£¹
(
l
, -2);

1338  
	`luaL_”rÜ
(
l
, "Memory‡llocationƒrror in CJSON…rotected call");

1339 
	}
}

1342 
	$lua_cjsÚ_Ãw
(
lua_S‹
 *
l
)

1344 
luaL_Reg
 
»g
[] = {

1345 { "’code", 
jsÚ_’code
 },

1346 { "decode", 
jsÚ_decode
 },

1347 { "’code_¥¬£_¬¿y", 
jsÚ_cfg_’code_¥¬£_¬¿y
 },

1348 { "’code_max_d•th", 
jsÚ_cfg_’code_max_d•th
 },

1349 { "decode_max_d•th", 
jsÚ_cfg_decode_max_d•th
 },

1350 { "’code_numb”_´ecisiÚ", 
jsÚ_cfg_’code_numb”_´ecisiÚ
 },

1351 { "’code_k“p_bufãr", 
jsÚ_cfg_’code_k“p_bufãr
 },

1352 { "’code_šv®id_numb”s", 
jsÚ_cfg_’code_šv®id_numb”s
 },

1353 { "decode_šv®id_numb”s", 
jsÚ_cfg_decode_šv®id_numb”s
 },

1354 { "Ãw", 
lua_cjsÚ_Ãw
 },

1355 { 
NULL
, NULL }

1359 
	`åcÚv_š™
();

1362 
	`lua_ÃwbË
(
l
);

1365 
	`jsÚ_ü—‹_cÚfig
(
l
);

1366 
	`luaL_£tfuncs
(
l
, 
»g
, 1);

1369 
	`lua_pushlightu£rd©a
(
l
, 
NULL
);

1370 
	`lua_£tf›ld
(
l
, -2, "null");

1373 
	`lua_pushl™”®
(
l
, 
CJSON_MODNAME
);

1374 
	`lua_£tf›ld
(
l
, -2, "_NAME");

1375 
	`lua_pushl™”®
(
l
, 
CJSON_VERSION
);

1376 
	`lua_£tf›ld
(
l
, -2, "_VERSION");

1379 
	}
}

1382 
	$lua_cjsÚ_§ã_Ãw
(
lua_S‹
 *
l
)

1384 cÚ¡ *
func
[] = { "decode", "’code", 
NULL
 };

1385 
i
;

1387 
	`lua_cjsÚ_Ãw
(
l
);

1390 
	`lua_pushcfunùiÚ
(
l
, 
lua_cjsÚ_§ã_Ãw
);

1391 
	`lua_£tf›ld
(
l
, -2, "new");

1393 
i
 = 0; 
func
[i]; i++) {

1394 
	`lua_g‘f›ld
(
l
, -1, 
func
[
i
]);

1395 
	`lua_pushcşosu»
(
l
, 
jsÚ_´Ùeù_cÚv”siÚ
, 1);

1396 
	`lua_£tf›ld
(
l
, -2, 
func
[
i
]);

1400 
	}
}

1402 
	$luaİ’_cjsÚ
(
lua_S‹
 *
l
)

1404 
	`lua_cjsÚ_Ãw
(
l
);

1406 #ifdeà
ENABLE_CJSON_GLOBAL


1408 
	`lua_pushv®ue
(
l
, -1);

1409 
	`lua_£tglob®
(
l
, 
CJSON_MODNAME
);

1414 
	}
}

1416 
	$luaİ’_cjsÚ_§ã
(
lua_S‹
 *
l
)

1418 
	`lua_cjsÚ_§ã_Ãw
(
l
);

1422 
	}
}

	@luaclib/pbc-lua53.c

1 #ifdeà
__ılu¥lus


4 
	~"lua.h
"

5 
	~"lu®ib.h
"

6 
	~"Ïuxlib.h
"

7 #ifdeà
__ılu¥lus


11 
	~<m®loc.h
>

13 #iâdeà
_MSC_VER


14 
	~<¡dboŞ.h
>

16 
	#®loÿ
 
_®loÿ


	)

19 
	~<¡ršg.h
>

20 
	~<¡dlib.h
>

21 
	~<¡dšt.h
>

23 
	~"pbc.h
"

25 
šlše
 *

26 
	$checku£rd©a
(
lua_S‹
 *
L
, 
šdex
) {

27 * 
ud
 = 
	`lua_tou£rd©a
(
L
,
šdex
);

28 ià(
ud
 =ğ
NULL
) {

29 
	`luaL_”rÜ
(
L
, "u£rd©¨%d i n",
šdex
);

31  
ud
;

32 
	}
}

35 
	$_’v_Ãw
(
lua_S‹
 *
L
) {

36 
pbc_’v
 * 
’v
 = 
	`pbc_Ãw
();

37 
	`lua_pushlightu£rd©a
(
L
, 
’v
);

39 
	}
}

42 
	$_’v_»gi¡”
(
lua_S‹
 *
L
) {

43 
pbc_’v
 * 
’v
 = (pbc_’v *)
	`checku£rd©a
(
L
,1);

44 
size_t
 
sz
 = 0;

45 cÚ¡ * 
bufãr
 = 
	`luaL_checkl¡ršg
(
L
, 2 , &
sz
);

46 
pbc_¦iû
 
¦iû
;

47 
¦iû
.
bufãr
 = (*)buffer;

48 
¦iû
.
Ën
 = ()
sz
;

49 
»t
 = 
	`pbc_»gi¡”
(
’v
, &
¦iû
);

51 ià(
»t
) {

52  
	`luaL_”rÜ
(
L
, "register fail");

55 
	}
}

58 
	$_’v_’um_id
(
lua_S‹
 *
L
) {

59 
pbc_’v
 * 
’v
 = (pbc_’v *)
	`checku£rd©a
(
L
,1);

60 
size_t
 
sz
 = 0;

61 cÚ¡ * 
’um_ty³
 = 
	`luaL_checkl¡ršg
(
L
, 2, &
sz
);

62 cÚ¡ * 
’um_Çme
 = 
	`luaL_checkl¡ršg
(
L
, 3, &
sz
);

63 
št32_t
 
’um_id
 = 
	`pbc_’um_id
(
’v
, 
’um_ty³
, 
’um_Çme
);

64 ià(
’um_id
 < 0)

66 
	`lua_pushš‹g”
(
L
, 
’um_id
);

68 
	}
}

71 
	$_rmes§ge_Ãw
(
lua_S‹
 *
L
) {

72 
pbc_’v
 * 
’v
 = (pbc_’v *)
	`checku£rd©a
(
L
,1);

73 cÚ¡ * 
ty³_Çme
 = 
	`luaL_check¡ršg
(
L
,2);

74 
pbc_¦iû
 
¦iû
;

75 ià(
	`lua_is¡ršg
(
L
,3)) {

76 
size_t
 
sz
 = 0;

77 
¦iû
.
bufãr
 = (*)
	`lua_tŞ¡ršg
(
L
,3,&
sz
);

78 
¦iû
.
Ën
 = ()
sz
;

80 
¦iû
.
bufãr
 = 
	`lua_tou£rd©a
(
L
,3);

81 
¦iû
.
Ën
 = 
	`luaL_checkš‹g”
(
L
,4);

83 
pbc_rmes§ge
 * 
m
 = 
	`pbc_rmes§ge_Ãw
(
’v
, 
ty³_Çme
, &
¦iû
);

84 ià(
m
==
NULL
)

86 
	`lua_pushlightu£rd©a
(
L
,
m
);

88 
	}
}

91 
	$_rmes§ge_d–‘e
(
lua_S‹
 *
L
) {

92 
pbc_rmes§ge
 * 
m
 = (pbc_rmes§g*)
	`checku£rd©a
(
L
,1);

93 
	`pbc_rmes§ge_d–‘e
(
m
);

96 
	}
}

99 
	$_rmes§ge_št
(
lua_S‹
 *
L
) {

100 
pbc_rmes§ge
 * 
m
 = (pbc_rmes§g*)
	`checku£rd©a
(
L
,1);

101 cÚ¡ * 
key
 = 
	`luaL_check¡ršg
(
L
,2);

102 
šdex
 = 
	`luaL_checkš‹g”
(
L
,3);

103 
ušt32_t
 
hi
,
low
;

104 
low
 = 
	`pbc_rmes§ge_š‹g”
(
m
, 
key
, 
šdex
, &
hi
);

105 
št64_t
 
v
 = (št64_t)((
ušt64_t
)
hi
 << 32 | (ušt64_t)
low
);

106 
	`lua_pushš‹g”
(
L
,
v
);

109 
	}
}

112 
	$_rmes§ge_»®
(
lua_S‹
 *
L
) {

113 
pbc_rmes§ge
 * 
m
 = (pbc_rmes§g*)
	`checku£rd©a
(
L
,1);

114 cÚ¡ * 
key
 = 
	`luaL_check¡ršg
(
L
,2);

115 
šdex
 = 
	`luaL_checkš‹g”
(
L
,3);

116 
v
 = 
	`pbc_rmes§ge_»®
(
m
, 
key
, 
šdex
);

118 
	`lua_pushnumb”
(
L
,
v
);

121 
	}
}

124 
	$_rmes§ge_¡ršg
(
lua_S‹
 *
L
) {

125 
pbc_rmes§ge
 * 
m
 = (pbc_rmes§g*)
	`checku£rd©a
(
L
,1);

126 cÚ¡ * 
key
 = 
	`luaL_check¡ršg
(
L
,2);

127 
šdex
 = 
	`lua_toš‹g”
(
L
,3);

128 
sz
 = 0;

129 cÚ¡ * 
v
 = 
	`pbc_rmes§ge_¡ršg
(
m
,
key
,
šdex
,&
sz
);

130 
	`lua_pushl¡ršg
(
L
,
v
,
sz
);

132 
	}
}

135 
	$_rmes§ge_mes§ge
(
lua_S‹
 *
L
) {

136 
pbc_rmes§ge
 * 
m
 = (pbc_rmes§g*)
	`checku£rd©a
(
L
,1);

137 cÚ¡ * 
key
 = 
	`luaL_check¡ršg
(
L
,2);

138 
šdex
 = 
	`lua_toš‹g”
(
L
,3);

139 
pbc_rmes§ge
 * 
v
 = 
	`pbc_rmes§ge_mes§ge
(
m
,
key
,
šdex
);

140 
	`lua_pushlightu£rd©a
(
L
,
v
);

142 
	}
}

145 
	$_rmes§ge_size
(
lua_S‹
 *
L
) {

146 
pbc_rmes§ge
 * 
m
 = (pbc_rmes§g*)
	`checku£rd©a
(
L
,1);

147 cÚ¡ * 
key
 = 
	`luaL_check¡ršg
(
L
,2);

149 
sz
 = 
	`pbc_rmes§ge_size
(
m
, 
key
);

151 
	`lua_pushš‹g”
(
L
, 
sz
);

154 
	}
}

157 
	$_’v_ty³
(
lua_S‹
 *
L
) {

158 
	`lua_£‰İ
(
L
,3);

159 
pbc_’v
 * 
’v
 = (pbc_’v *)
	`checku£rd©a
(
L
,1);

160 cÚ¡ * 
ty³_Çme
 = 
	`luaL_check¡ršg
(
L
,2);

161 ià(
	`lua_i¢
(
L
,3)) {

162 
»t
 = 
	`pbc_ty³
(
’v
, 
ty³_Çme
, 
NULL
, NULL);

163 
	`lua_pushboŞ—n
(
L
,
»t
);

166 cÚ¡ * 
key
 = 
	`luaL_check¡ršg
(
L
,3);

167 cÚ¡ * 
ty³
 = 
NULL
;

168 
»t
 = 
	`pbc_ty³
(
’v
, 
ty³_Çme
, 
key
, &
ty³
);

169 
	`lua_pushš‹g”
(
L
,
»t
);

170 ià(
ty³
 =ğ
NULL
) {

173 
	`lua_push¡ršg
(
L
, 
ty³
);

176 
	}
}

179 
	$_wmes§ge_Ãw
(
lua_S‹
 *
L
) {

180 
pbc_’v
 * 
’v
 = (pbc_’v *)
	`checku£rd©a
(
L
,1);

181 cÚ¡ * 
ty³_Çme
 = 
	`luaL_check¡ršg
(
L
,2);

182 
pbc_wmes§ge
 * 
»t
 = 
	`pbc_wmes§ge_Ãw
(
’v
, 
ty³_Çme
);

183 
	`lua_pushlightu£rd©a
(
L
,
»t
);

185 
	}
}

188 
	$_wmes§ge_d–‘e
(
lua_S‹
 *
L
) {

189 
pbc_wmes§ge
 * 
m
 = (pbc_wmes§g*)
	`lua_tou£rd©a
(
L
,1);

190 
	`pbc_wmes§ge_d–‘e
(
m
);

193 
	}
}

197 
	$_wmes§ge_»®
(
lua_S‹
 *
L
) {

198 
pbc_wmes§ge
 * 
m
 = (pbc_wmes§g*)
	`checku£rd©a
(
L
,1);

199 cÚ¡ * 
key
 = 
	`luaL_check¡ršg
(
L
,2);

200 
numb”
 = 
	`luaL_checknumb”
(
L
,3);

201 
	`pbc_wmes§ge_»®
(
m
, 
key
, 
numb”
);

204 
	}
}

207 
	$_wmes§ge_¡ršg
(
lua_S‹
 *
L
) {

208 
pbc_wmes§ge
 * 
m
 = (pbc_wmes§g*)
	`checku£rd©a
(
L
,1);

209 cÚ¡ * 
key
 = 
	`luaL_check¡ršg
(
L
,2);

210 
size_t
 
Ën
 = 0;

211 cÚ¡ * 
v
 = 
	`luaL_checkl¡ršg
(
L
,3,&
Ën
);

212 
”r
 = 
	`pbc_wmes§ge_¡ršg
(
m
, 
key
, 
v
, ()
Ën
);

213 ià(
”r
) {

214  
	`luaL_”rÜ
(
L
, "Wr™¡ršgƒ¼Ü : %s", 
v
);

218 
	}
}

221 
	$_wmes§ge_mes§ge
(
lua_S‹
 *
L
) {

222 
pbc_wmes§ge
 * 
m
 = (pbc_wmes§g*)
	`checku£rd©a
(
L
,1);

223 cÚ¡ * 
key
 = 
	`luaL_check¡ršg
(
L
,2);

224 
pbc_wmes§ge
 * 
»t
 = 
	`pbc_wmes§ge_mes§ge
(
m
, 
key
);

225 
	`lua_pushlightu£rd©a
(
L
, 
»t
);

228 
	}
}

231 
	$_wmes§ge_št
(
lua_S‹
 *
L
) {

232 
pbc_wmes§ge
 * 
m
 = (pbc_wmes§g*)
	`checku£rd©a
(
L
,1);

233 cÚ¡ * 
key
 = 
	`luaL_check¡ršg
(
L
,2);

234 
št64_t
 
numb”
;

236 ià(
	`lua_isš‹g”
(
L
, 3)) {

237 
numb”
 = 
	`lua_toš‹g”
(
L
,3);

239 
numb”
 = (
št64_t
)
	`lua_tÚumb”
(
L
,3);

241 
ušt32_t
 
hi
 = (ušt32_t)(
numb”
 >> 32);

242 
	`pbc_wmes§ge_š‹g”
(
m
, 
key
, (
ušt32_t
)
numb”
, 
hi
);

245 
	}
}

248 
	$_wmes§ge_bufãr
(
lua_S‹
 *
L
) {

249 
pbc_¦iû
 
¦iû
;

250 
pbc_wmes§ge
 * 
m
 = (pbc_wmes§g*)
	`checku£rd©a
(
L
,1);

251 
	`pbc_wmes§ge_bufãr
(
m
 , &
¦iû
);

252 
	`lua_pushlightu£rd©a
(
L
, 
¦iû
.
bufãr
);

253 
	`lua_pushš‹g”
(
L
, 
¦iû
.
Ën
);

255 
	}
}

258 
	$_wmes§ge_bufãr_¡ršg
(
lua_S‹
 *
L
) {

259 
pbc_¦iû
 
¦iû
;

260 
pbc_wmes§ge
 * 
m
 = (pbc_wmes§g*)
	`checku£rd©a
(
L
,1);

261 
	`pbc_wmes§ge_bufãr
(
m
 , &
¦iû
);

262 
	`lua_pushl¡ršg
(
L
, (cÚ¡ *)
¦iû
.
bufãr
, sliû.
Ën
);

264 
	}
}

270 
	$_Ï¡_”rÜ
(
lua_S‹
 *
L
) {

271 
pbc_’v
 * 
’v
 = (pbc_’v *)
	`checku£rd©a
(
L
, 1);

272 cÚ¡ * 
”r
 = 
	`pbc_”rÜ
(
’v
);

273 
	`lua_push¡ršg
(
L
,
”r
);

275 
	}
}

283 
	$_·‰”n_Ãw
(
lua_S‹
 *
L
) {

284 
pbc_’v
 * 
’v
 = (pbc_’v *)
	`checku£rd©a
(
L
, 1);

285 cÚ¡ * 
mes§ge
 = 
	`luaL_check¡ršg
(
L
,2);

286 cÚ¡ * 
fÜm©
 = 
	`luaL_check¡ršg
(
L
,3);

287 
pbc_·‰”n
 * 
·t
 = 
	`pbc_·‰”n_Ãw
(
’v
, 
mes§ge
, 
fÜm©
);

288 ià(
·t
 =ğ
NULL
) {

289  
	`luaL_”rÜ
(
L
, "ü—‹…©‹À% (%sèçed", 
mes§ge
 , 
fÜm©
);

291 
	`lua_pushlightu£rd©a
(
L
,
·t
);

294 
	}
}

297 
	$_·‰”n_d–‘e
(
lua_S‹
 *
L
) {

298 
pbc_·‰”n
 * 
·t
 = (pbc_·‰”À*)
	`lua_tou£rd©a
(
L
,1);

299 
	`pbc_·‰”n_d–‘e
(
·t
);

302 
	}
}

305 
	$_push_v®ue
(
lua_S‹
 *
L
, * 
±r
, 
ty³
) {

306 
ty³
) {

308 
ušt64_t
 
v
 = *(ušt64_t*)
±r
;

309 
±r
 += 8;

310 
	`lua_pushš‹g”
(
L
, 
v
);

314 
št32_t
 
v
 = *(št32_t*)
±r
;

315 
±r
 += 4;

316 
	`lua_pushš‹g”
(
L
,
v
);

320 
št32_t
 
v
 = *(št32_t*)
±r
;

321 
±r
 += 4;

322 
	`lua_pushboŞ—n
(
L
,
v
);

326 
v
 = *(*)
±r
;

327 
±r
 += 8;

328 
	`lua_pushnumb”
(
L
,
v
);

332 
pbc_¦iû
 * 
¦iû
 = (pbc_¦iû *)
±r
;

333 
	`lua_pushl¡ršg
(
L
,(cÚ¡ *)
¦iû
->
bufãr
, sliû->
Ën
);

334 
±r
 +ğ(
pbc_¦iû
);

338 
pbc_¦iû
 * 
¦iû
 = (pbc_¦iû *)
±r
;

339 
	`lua_ü—‹bË
(
L
,2,0);

340 
	`lua_pushlightu£rd©a
(
L
, 
¦iû
->
bufãr
);

341 
	`lua_¿w£ti
(
L
,-2,1);

342 
	`lua_pushš‹g”
(
L
,
¦iû
->
Ën
);

343 
	`lua_¿w£ti
(
L
,-2,2);

344 
±r
 +ğ(
pbc_¦iû
);

348  
±r
;

349 
	}
}

352 
	$_push_¬¿y
(
lua_S‹
 *
L
, 
pbc_¬¿y
 
¬¿y
, 
ty³
, 
šdex
) {

353 
ty³
) {

355 
v
 = 
	`pbc_¬¿y_š‹g”
(
¬¿y
, 
šdex
, 
NULL
);

356 
	`lua_pushš‹g”
(
L
, 
v
);

360 
ušt32_t
 
hi
 = 0;

361 
ušt32_t
 
low
 = 
	`pbc_¬¿y_š‹g”
(
¬¿y
, 
šdex
, &
hi
);

362 
ušt64_t
 
v
 = (ušt64_t)
hi
 << 32 | (ušt64_t)
low
;

363 
	`lua_pushš‹g”
(
L
, 
v
);

367 
v
 = 
	`pbc_¬¿y_š‹g”
(
¬¿y
, 
šdex
, 
NULL
);

368 
	`lua_pushboŞ—n
(
L
, 
v
);

372 
ušt32_t
 
hi
 = 0;

373 
ušt32_t
 
low
 = 
	`pbc_¬¿y_š‹g”
(
¬¿y
, 
šdex
, &
hi
);

374 
ušt64_t
 
v
 = (ušt64_t)
low
 | (ušt64_t)
hi
 << 32;

375 
	`lua_pushl¡ršg
(
L
, (*)&
v
, 8);

379 
v
 = 
	`pbc_¬¿y_»®
(
¬¿y
, 
šdex
);

380 
	`lua_pushnumb”
(
L
, 
v
);

384 
pbc_¦iû
 * 
¦iû
 = 
	`pbc_¬¿y_¦iû
(
¬¿y
, 
šdex
);

385 
	`lua_pushl¡ršg
(
L
, (cÚ¡ *)
¦iû
->
bufãr
,¦iû->
Ën
);

389 
pbc_¦iû
 * 
¦iû
 = 
	`pbc_¬¿y_¦iû
(
¬¿y
, 
šdex
);

390 
	`lua_ü—‹bË
(
L
,2,0);

391 
	`lua_pushlightu£rd©a
(
L
,
¦iû
->
bufãr
);

392 
	`lua_¿w£ti
(
L
,-2,1);

393 
	`lua_pushš‹g”
(
L
,
¦iû
->
Ën
);

394 
	`lua_¿w£ti
(
L
,-2,2);

398 
	`lua_¿w£ti
(
L
,-2,
šdex
+1);

399 
	}
}

409 
	$_·‰”n_uÅack
(
lua_S‹
 *
L
) {

410 
pbc_·‰”n
 * 
·t
 = (pbc_·‰”À*)
	`checku£rd©a
(
L
, 1);

411 ià(
·t
 =ğ
NULL
) {

412  
	`luaL_”rÜ
(
L
, "unpack…attern is NULL");

414 
size_t
 
fÜm©_sz
 = 0;

415 cÚ¡ * 
fÜm©
 = 
	`lua_tŞ¡ršg
(
L
,2,&
fÜm©_sz
);

416 
size
 = 
	`lua_toš‹g”
(
L
,3);

417 
pbc_¦iû
 
¦iû
;

418 ià(
	`lua_is¡ršg
(
L
,4)) {

419 
size_t
 
bufãr_Ën
 = 0;

420 cÚ¡ *
bufãr
 = 
	`luaL_checkl¡ršg
(
L
,4,&
bufãr_Ën
);

421 
¦iû
.
bufãr
 = (*)buffer;

422 
¦iû
.
Ën
 = 
bufãr_Ën
;

424 ià(!
	`lua_isu£rd©a
(
L
,4)) {

425  
	`luaL_”rÜ
(
L
, "Need‡ userdata");

427 
¦iû
.
bufãr
 = 
	`lua_tou£rd©a
(
L
,4);

428 
¦iû
.
Ën
 = 
	`luaL_checkš‹g”
(
L
,5);

431 * 
‹mp
 = (*)
	`®loÿ
(
size
);

432 
»t
 = 
	`pbc_·‰”n_uÅack
(
·t
, &
¦iû
, 
‹mp
);

433 ià(
»t
 < 0) {

436 
	`lua_check¡ack
(
L
, 
fÜm©_sz
 + 3);

437 
i
;

438 * 
±r
 = 
‹mp
;

439 
boŞ
 
¬¿y
 = 
çl£
;

440 
i
=0;i<
fÜm©_sz
;i++) {

441 
ty³
 = 
fÜm©
[
i
];

442 ià(
ty³
 >= 'a' &&ype <='z') {

443 
±r
 = (*)
	`_push_v®ue
(
L
,±r,
ty³
);

445 
¬¿y
 = 
Œue
;

446 
n
 = 
	`pbc_¬¿y_size
((
_pbc_¬¿y
 *)
±r
);

447 
	`lua_ü—‹bË
(
L
,
n
,0);

448 
j
;

449 
j
=0;j<
n
;j++) {

450 
	`_push_¬¿y
(
L
,(
_pbc_¬¿y
 *)
±r
, 
ty³
, 
j
);

452 
±r
 +ğ(
pbc_¬¿y
);

455 ià(
¬¿y
) {

456 
	`pbc_·‰”n_şo£_¬¿ys
(
·t
, 
‹mp
);

458  
fÜm©_sz
;

459 
	}
}

462 
	$_g‘_v®ue
(
lua_S‹
 *
L
, 
šdex
, * 
±r
, 
ty³
) {

463 
ty³
) {

465 
št32_t
 
v
 = 
	`luaL_checkš‹g”
(
L
, 
šdex
);

466 
	`memıy
(
±r
, &
v
, 4);

467  
±r
 + 4;

470 
št64_t
 
v
 = (št64_t)
	`luaL_checkš‹g”
(
L
, 
šdex
);

471 
	`memıy
(
±r
, &
v
, 8);

472  
±r
 + 8;

475 
št32_t
 
v
 = 
	`lua_toboŞ—n
(
L
, 
šdex
);

476 
	`memıy
(
±r
, &
v
, 4);

477  
±r
 + 4;

480 
v
 = 
	`luaL_checknumb”
(
L
, 
šdex
);

481 
	`memıy
(
±r
, &
v
, 8);

482  
±r
 + 8;

485 
size_t
 
sz
 = 0;

486 cÚ¡ * 
¡r
 = 
	`luaL_checkl¡ršg
(
L
, 
šdex
, &
sz
);

487 
pbc_¦iû
 * 
¦iû
 = (pbc_¦iû *)
±r
;

488 
¦iû
->
bufãr
 = (*)
¡r
;

489 
¦iû
->
Ën
 = 
sz
;

490  
±r
 + (
pbc_¦iû
);

493 
pbc_¦iû
 * 
¦iû
 = (pbc_¦iû *)
±r
;

494 ià(
	`lua_i¡abË
(
L
,
šdex
)) {

495 
	`lua_¿wg‘i
(
L
,
šdex
,1);

496 
¦iû
->
bufãr
 = 
	`lua_tou£rd©a
(
L
,-1);

497 
	`lua_¿wg‘i
(
L
,
šdex
,2);

498 
¦iû
->
Ën
 = 
	`lua_toš‹g”
(
L
,-1);

499 
	`lua_pİ
(
L
,2);

501 
size_t
 
sz
 = 0;

502 cÚ¡ * 
bufãr
 = 
	`luaL_checkl¡ršg
(
L
, 
šdex
, &
sz
);

503 
¦iû
->
bufãr
 = (*)buffer;

504 
¦iû
->
Ën
 = 
sz
;

506  
±r
 + (
pbc_¦iû
);

509 
	`luaL_”rÜ
(
L
,"unknowÀfÜm© %c", 
ty³
);

510  
±r
;

512 
	}
}

515 
	$_g‘_¬¿y_v®ue
(
lua_S‹
 *
L
, 
pbc_¬¿y
 
¬¿y
, 
ty³
) {

516 
ty³
) {

518 
št32_t
 
v
 = 
	`luaL_checkš‹g”
(
L
, -1);

519 
ušt32_t
 
hi
 = 0;

520 ià(
v
<0) {

521 
hi
 = ~0;

523 
	`pbc_¬¿y_push_š‹g”
(
¬¿y
, 
v
, 
hi
);

527 
ušt64_t
 
v
 = (ušt64_t)
	`luaL_checknumb”
(
L
, -1);

528 
	`pbc_¬¿y_push_š‹g”
(
¬¿y
, (
ušt32_t
)
v
, (uint32_t)(v >> 32));

532 
št32_t
 
v
 = 
	`lua_toboŞ—n
(
L
, -1);

533 
	`pbc_¬¿y_push_š‹g”
(
¬¿y
, 
v
 ? 1: 0, 0);

537 
v
 = 
	`luaL_checknumb”
(
L
, -1);

538 
	`pbc_¬¿y_push_»®
(
¬¿y
, 
v
);

542 
size_t
 
sz
 = 0;

543 cÚ¡ * 
¡r
 = 
	`luaL_checkl¡ršg
(
L
, -1, &
sz
);

544 
pbc_¦iû
 
¦iû
;

545 
¦iû
.
bufãr
 = (*)
¡r
;

546 
¦iû
.
Ën
 = 
sz
;

547 
	`pbc_¬¿y_push_¦iû
(
¬¿y
, &
¦iû
);

551 
pbc_¦iû
 
¦iû
;

552 ià(
	`lua_i¡abË
(
L
,-1)) {

553 
	`lua_¿wg‘i
(
L
,-1,1);

554 
¦iû
.
bufãr
 = 
	`lua_tou£rd©a
(
L
,-1);

555 
	`lua_¿wg‘i
(
L
,-2,2);

556 
¦iû
.
Ën
 = 
	`lua_toš‹g”
(
L
,-1);

557 
	`lua_pİ
(
L
,2);

559 
size_t
 
sz
 = 0;

560 cÚ¡ * 
bufãr
 = 
	`luaL_checkl¡ršg
(
L
, -1, &
sz
);

561 
¦iû
.
bufãr
 = (*)buffer;

562 
¦iû
.
Ën
 = 
sz
;

564 
	`pbc_¬¿y_push_¦iû
(
¬¿y
, &
¦iû
);

568 
	}
}

576 
	$_·‰”n_·ck
(
lua_S‹
 *
L
) {

577 
pbc_·‰”n
 * 
·t
 = (pbc_·‰”À*)
	`checku£rd©a
(
L
,1);

578 ià(
·t
 =ğ
NULL
) {

579  
	`luaL_”rÜ
(
L
, "pack…attern is NULL");

581 
size_t
 
fÜm©_sz
 = 0;

582 cÚ¡ * 
fÜm©
 = 
	`lua_tŞ¡ršg
(
L
,2,&
fÜm©_sz
);

583 
size
 = 
	`lua_toš‹g”
(
L
,3);

585 * 
d©a
 = (*)
	`®loÿ
(
size
);

588 
	`mem£t
(
d©a
, 0 , 
size
);

590 * 
±r
 = 
d©a
;

592 
i
;

594 
i
=0;i<
fÜm©_sz
;i++) {

595 ià(
fÜm©
[
i
] >= 'a' && format[i] <='z') {

596 
±r
 = 
	`_g‘_v®ue
(
L
, 4+
i
,…Œ, 
fÜm©
[i]);

598 ià(!
	`lua_i¡abË
(
L
,4+
i
)) {

599 
	`luaL_”rÜ
(
L
,"needable for‡rrayype");

601 
j
;

602 
n
 = 
	`lua_¿wËn
(
L
,4+
i
);

603 
j
=0;j<
n
;j++) {

604 
	`lua_¿wg‘i
(
L
,4+
i
,
j
+1);

605 
	`_g‘_¬¿y_v®ue
(
L
,(
_pbc_¬¿y
 *)
±r
,
fÜm©
[
i
]);

606 
	`lua_pİ
(
L
,1);

608 
±r
 +ğ(
pbc_¬¿y
);

612 
luaL_Bufãr
 
b
;

613 
	`luaL_buffš™
(
L
, &
b
);

615 
ÿp
 = 128;

617 * 
‹mp
 = (*)
	`luaL_´•buffsize
(&
b
 , 
ÿp
);

619 
pbc_¦iû
 
¦iû
;

620 
¦iû
.
bufãr
 = 
‹mp
;

621 
¦iû
.
Ën
 = 
ÿp
;

623 
»t
 = 
	`pbc_·‰”n_·ck
(
·t
, 
d©a
, &
¦iû
);

625 ià(
»t
 < 0) {

626 
ÿp
 = cap * 2;

630 
	`luaL_addsize
(&
b
 , 
¦iû
.
Ën
);

633 
	`luaL_push»suÉ
(&
b
);

635 
	`pbc_·‰”n_şo£_¬¿ys
(
·t
, 
d©a
);

637 
	}
}

640 
	$_·‰”n_size
(
lua_S‹
 *
L
) {

641 
size_t
 
sz
 =0;

642 cÚ¡ *
fÜm©
 = 
	`luaL_checkl¡ršg
(
L
,1,&
sz
);

643 
i
;

644 
size
 = 0;

645 
i
=0;i<
sz
;i++) {

646 
fÜm©
[
i
]) {

649 
size
 += 4;

653 
size
 += 8;

657 
size
 +ğ(
pbc_¦iû
);

660 
size
 +ğ(
pbc_¬¿y
);

664 
	`lua_pushš‹g”
(
L
,
size
);

666 
	}
}

674 
	$Ãw_¬¿y
(
lua_S‹
 *
L
, 
id
, cÚ¡ *
key
) {

675 
	`lua_¿wg‘i
(
L
, -2 , 
id
);

676 ià(
	`lua_i¢
(
L
, -1)) {

677 
	`lua_pİ
(
L
,1);

678 
	`lua_ÃwbË
(
L
);

679 
	`lua_pushv®ue
(
L
,-1);

680 
	`lua_pushv®ue
(
L
,-1);

681 
	`lua_£tf›ld
(
L
, -6 , 
key
);

682 
	`lua_¿w£ti
(
L
, -4, 
id
);

684 
	}
}

687 
	$push_v®ue
(
lua_S‹
 *
L
, 
ty³
, cÚ¡ * 
ty³_Çme
, 
pbc_v®ue
 *
v
) {

688 
ty³
) {

689 
PBC_FIXED32
:

690 
PBC_INT
:

691 
	`lua_pushš‹g”
(
L
, ()
v
->
i
.
low
);

693 
PBC_REAL
:

694 
	`lua_pushnumb”
(
L
, 
v
->
f
);

696 
PBC_BOOL
:

697 
	`lua_pushboŞ—n
(
L
, 
v
->
i
.
low
);

699 
PBC_ENUM
:

700 
	`lua_push¡ršg
(
L
, 
v
->
e
.
Çme
);

702 
PBC_BYTES
:

703 
PBC_STRING
:

704 
	`lua_pushl¡ršg
(
L
, (cÚ¡ *)
v
->
s
.
bufãr
 , v->s.
Ën
);

706 
PBC_MESSAGE
:

707 
	`lua_pushv®ue
(
L
, -3);

708 
	`lua_push¡ršg
(
L
, 
ty³_Çme
);

709 
	`lua_pushl¡ršg
(
L
, (cÚ¡ *)
v
->
s
.
bufãr
 , v->s.
Ën
);

710 
	`lua_ÿÎ
(
L
, 2 , 1);

712 
PBC_FIXED64
:

713 
PBC_UINT
:

714 
PBC_INT64
: {

715 
ušt64_t
 
v64
 = (ušt64_t)(
v
->
i
.
hi
è<< 32 | (ušt64_t)(v->i.
low
);

716 
	`lua_pushš‹g”
(
L
,
v64
);

720 
	`luaL_”rÜ
(
L
, "UnknowÀty³ %s", 
ty³_Çme
);

723 
	}
}

731 
	$decode_cb
(*
ud
, 
ty³
, cÚ¡ * 
ty³_Çme
, 
pbc_v®ue
 *
v
, 
id
, cÚ¡ *
key
) {

732 
lua_S‹
 *
L
 = (lua_S‹ *)
ud
;

733 ià(
key
 =ğ
NULL
) {

738 ià(
ty³
 & 
PBC_REPEATED
) {

739 
	`push_v®ue
(
L
, 
ty³
 & ~
PBC_REPEATED
, 
ty³_Çme
, 
v
);

740 
	`Ãw_¬¿y
(
L
, 
id
 , 
key
);

741 
n
 = 
	`lua_¿wËn
(
L
,-1);

742 
	`lua_š£¹
(
L
, -2);

743 
	`lua_¿w£ti
(
L
, -2 , 
n
+1);

744 
	`lua_pİ
(
L
,1);

746 
	`push_v®ue
(
L
, 
ty³
, 
ty³_Çme
, 
v
);

747 
	`lua_£tf›ld
(
L
, -3 , 
key
);

749 
	}
}

763 
	$_decode
(
lua_S‹
 *
L
) {

764 
pbc_’v
 * 
’v
 = (pbc_’v *)
	`checku£rd©a
(
L
,1);

765 
	`luaL_checkty³
(
L
, 2 , 
LUA_TFUNCTION
);

766 
	`luaL_checkty³
(
L
, 3 , 
LUA_TTABLE
);

767 cÚ¡ * 
ty³
 = 
	`luaL_check¡ršg
(
L
,4);

768 
pbc_¦iû
 
¦iû
;

769 ià(
	`lua_ty³
(
L
,5è=ğ
LUA_TSTRING
) {

770 
size_t
 
Ën
;

771 
¦iû
.
bufãr
 = (*)
	`luaL_checkl¡ršg
(
L
,5,&
Ën
);

772 
¦iû
.
Ën
 = ()len;

774 
¦iû
.
bufãr
 = 
	`checku£rd©a
(
L
,5);

775 
¦iû
.
Ën
 = 
	`luaL_checkš‹g”
(
L
,6);

777 
	`lua_pushv®ue
(
L
, 2);

778 
	`lua_pushv®ue
(
L
, 3);

779 
	`lua_ÃwbË
(
L
);

781 
n
 = 
	`pbc_decode
(
’v
, 
ty³
, &
¦iû
, 
decode_cb
, 
L
);

782 ià(
n
<0) {

783 
	`lua_pushboŞ—n
(
L
,0);

785 
	`lua_pushboŞ—n
(
L
,1);

788 
	}
}

790 
	sgcobj
 {

791 
pbc_’v
 * 
’v
;

792 
size_·t
;

793 
ÿp_·t
;

794 
pbc_·‰”n
 ** 
·t
;

795 
size_msg
;

796 
ÿp_msg
;

797 
pbc_rmes§ge
 ** 
msg
;

801 
	$_ş—r_gcobj
(
lua_S‹
 *
L
) {

802 
gcobj
 * 
obj
 = (gcobj *)
	`lua_tou£rd©a
(
L
,1);

803 
i
;

804 
i
=0;i<
obj
->
size_·t
;i++) {

805 
	`pbc_·‰”n_d–‘e
(
obj
->
·t
[
i
]);

807 
i
=0;i<
obj
->
size_msg
;i++) {

808 
	`pbc_rmes§ge_d–‘e
(
obj
->
msg
[
i
]);

810 
	`ä“
(
obj
->
·t
);

811 
	`ä“
(
obj
->
msg
);

812 
obj
->
·t
 = 
NULL
;

813 
obj
->
msg
 = 
NULL
;

814 ià(
obj
->
’v
) {

815 
	`pbc_d–‘e
(
obj
->
’v
);

816 
obj
->
’v
 = 
NULL
;

820 
	}
}

823 
	$_gc
(
lua_S‹
 *
L
) {

824 
gcobj
 * 
obj
;

825 
	`lua_£‰İ
(
L
,1);

826 
obj
 = (
gcobj
 *)
	`lua_Ãwu£rd©a
(
L
,(*obj));

827 
obj
->
’v
 = (
pbc_’v
 *)
	`lua_tou£rd©a
(
L
,1);

828 
obj
->
size_·t
 = 0;

829 
obj
->
ÿp_·t
 = 4;

830 
obj
->
size_msg
 = 0;

831 
obj
->
ÿp_msg
 = 4;

832 
obj
->
·t
 = (
pbc_·‰”n
 **)
	`m®loc
(obj->
ÿp_·t
 * (pbc_pattern *));

833 
obj
->
msg
 = (
pbc_rmes§ge
 **)
	`m®loc
(obj->
ÿp_msg
 * (pbc_rmessage *));

835 
	`lua_ü—‹bË
(
L
,0,1);

836 
	`lua_pushcfunùiÚ
(
L
, 
_ş—r_gcobj
);

837 
	`lua_£tf›ld
(
L
,-2,"__gc");

838 
	`lua_£tm‘©abË
(
L
,-2);

841 
	}
}

844 
	$_add_·‰”n
(
lua_S‹
 *
L
) {

845 
gcobj
 * 
obj
 = (gcobj *)
	`lua_tou£rd©a
(
L
,1);

846 ià(
obj
->
size_·t
 >ğobj->
ÿp_·t
) {

847 
obj
->
ÿp_·t
 *= 2;

848 
obj
->
·t
 = (
pbc_·‰”n
 **)
	`»®loc
(obj->·t, obj->
ÿp_·t
 * (pbc_pattern *));

850 
pbc_·‰”n
 * 
·t
 = (pbc_·‰”À*)
	`lua_tou£rd©a
(
L
,2);

851 
obj
->
·t
[obj->
size_·t
++] =…at;

853 
	}
}

856 
	$_add_rmes§ge
(
lua_S‹
 *
L
) {

857 
gcobj
 * 
obj
 = (gcobj *)
	`lua_tou£rd©a
(
L
,1);

858 ià(
obj
->
size_msg
 >ğobj->
ÿp_msg
) {

859 
obj
->
ÿp_msg
 *= 2;

860 
obj
->
msg
 = (
pbc_rmes§ge
 **)
	`»®loc
(obj->msg, obj->
ÿp_msg
 * (pbc_rmessage *));

862 
pbc_rmes§ge
 * 
msg
 = (pbc_rmes§g*)
	`lua_tou£rd©a
(
L
,2);

863 
obj
->
msg
[obj->
size_msg
++] = msg;

865 
	}
}

868 
	$luaİ’_´Ùobuf_c
(
lua_S‹
 *
L
) {

869 
luaL_Reg
 
»g
[] = {

870 {"_’v_Ãw" , 
_’v_Ãw
 },

871 {"_’v_»gi¡”" , 
_’v_»gi¡”
 },

872 {"_’v_ty³", 
_’v_ty³
 },

873 {"_rmes§ge_Ãw" , 
_rmes§ge_Ãw
 },

874 {"_rmes§ge_d–‘e" , 
_rmes§ge_d–‘e
 },

875 {"_rmes§ge_št", 
_rmes§ge_št
 },

876 {"_rmes§ge_»®" , 
_rmes§ge_»®
 },

877 {"_rmes§ge_¡ršg" , 
_rmes§ge_¡ršg
 },

878 {"_rmes§ge_mes§ge" , 
_rmes§ge_mes§ge
 },

879 {"_rmes§ge_size" , 
_rmes§ge_size
 },

880 {"_wmes§ge_Ãw", 
_wmes§ge_Ãw
 },

881 {"_wmes§ge_d–‘e", 
_wmes§ge_d–‘e
 },

882 {"_wmes§ge_»®", 
_wmes§ge_»®
 },

883 {"_wmes§ge_¡ršg", 
_wmes§ge_¡ršg
 },

884 {"_wmes§ge_mes§ge", 
_wmes§ge_mes§ge
 },

885 {"_wmes§ge_št", 
_wmes§ge_št
 },

886 {"_wmes§ge_bufãr", 
_wmes§ge_bufãr
 },

887 {"_wmes§ge_bufãr_¡ršg", 
_wmes§ge_bufãr_¡ršg
 },

888 {"_·‰”n_Ãw", 
_·‰”n_Ãw
 },

889 {"_·‰”n_d–‘e", 
_·‰”n_d–‘e
 },

890 {"_·‰”n_size", 
_·‰”n_size
 },

891 {"_·‰”n_uÅack", 
_·‰”n_uÅack
 },

892 {"_·‰”n_·ck", 
_·‰”n_·ck
 },

893 {"_Ï¡_”rÜ", 
_Ï¡_”rÜ
 },

894 {"_decode", 
_decode
 },

895 {"_gc", 
_gc
 },

896 {"_add_·‰”n", 
_add_·‰”n
 },

897 {"_add_rmes§ge", 
_add_rmes§ge
 },

898 {"_’v_’um_id", 
_’v_’um_id
},

899 {
NULL
,NULL},

902 
	`luaL_checkv”siÚ
(
L
);

903 
	`luaL_Ãwlib
(
L
, 
»g
);

906 
	}
}

	@lualib/datacenter.lua

1 
loÿl
 
	gskyÃt
 = 
»quœe
 "skynet"

3 
loÿl
 
d©aûÁ”
 = {}

5 
funùiÚ
 
d©aûÁ”
.
	$ü—‹
()

6 
loÿl
 
£rviû
 = 
skyÃt
.
Ãw£rviû
 "datacenterd"

7 
skyÃt
.
	`Çme
("DATACENTER", 
£rviû
)

8 
’d


10 
funùiÚ
 
d©aûÁ”
.
	$g‘
(...)

11  
skyÃt
.
	`ÿÎ
("DATACENTER", "lua", "QUERY", ...)

12 
’d


14 
funùiÚ
 
d©aûÁ”
.
	$£t
(...)

15  
skyÃt
.
	`ÿÎ
("DATACENTER", "lua", "UPDATE", ...)

16 
’d


18 
funùiÚ
 
d©aûÁ”
.
	$wa™
(...)

19  
skyÃt
.
	`ÿÎ
("DATACENTER", "lua", "WAIT", ...)

20 
’d


22 
funùiÚ
 
d©aûÁ”
.
	$g‘_şu¡”
(
şu¡”_Çme
, ...)

23  
şu¡”
.
	`ÿÎ
(
şu¡”_Çme
, "DATACENTER", "lua", "QUERY", ...)

24 
’d


26 
funùiÚ
 
d©aûÁ”
.
	$£t_şu¡”
(
şu¡”_Çme
, ...)

27  
şu¡”
.
	`ÿÎ
(
şu¡”_Çme
, "DATACENTER", "lua", "UPDATE", ...)

28 
’d


30 
funùiÚ
 
d©aûÁ”
.
	$wa™_şu¡”
(
şu¡”_Çme
, ...)

31  
şu¡”
.
	`ÿÎ
(
şu¡”_Çme
, "DATACENTER", "lua", "WAIT", ...)

32 
’d


33  
d©aûÁ”


	@lualib/protobuf.lua

1 
loÿl
 
	gc
 = 
»quœe
 "protobuf.c"

3 
loÿl
 
£tm‘©abË
 = setmetatable

4 
loÿl
 
ty³
 =ype

5 
loÿl
 
bË
 =able

6 
loÿl
 
as£¹
 =‡ssert

7 
loÿl
 
·œs
 =…airs

8 
loÿl
 
aœs
 = ipairs

9 
loÿl
 
¡ršg
 = string

10 
loÿl
 
´št
 =…rint

11 
loÿl
 
io
 = io

12 
loÿl
 
tš£¹
 = 
bË
.
š£¹


13 
loÿl
 
¿wg‘
 =„awget

15 
loÿl
 
M
 = {}

17 
loÿl
 
_·‰”n_ÿche
 = {}

19 
loÿl
 
P
,
GC


21 
	gP
 = 
debug
.
g‘»gi¡ry
().
PROTOBUF_ENV


23 
P
 
th’


24 
GC
 = 
c
.
	$_gc
()

26 
P
ğ
c
.
	$_’v_Ãw
()

27 
GC
 = 
c
.
	$_gc
(
P
)

28 
’d


30 
M
.
GC
 = GC

32 
funùiÚ
 
M
.
	$Ï¡”rÜ
()

33  
c
.
	$_Ï¡_”rÜ
(
P
)

34 
’d


36 
loÿl
 
decode_ty³_ÿche
 = {
	}
}

37 
loÿl
 
_R_m‘a
 = {}

39 
funùiÚ
 
_R_m‘a
:
	$__šdex
(
key
)

40 
loÿl
 
v
 = 
decode_ty³_ÿche
[
£lf
.
_CTy³
][
key
](self, key)

41 
£lf
[
key
] = 
v


42  
v


43 
’d


45 
loÿl
 
_»ad”
 = {
	}
}

47 
funùiÚ
 
_»ad”
:
	$»®
(
key
)

48  
c
.
	$_rmes§ge_»®
(
£lf
.
_CObj
 , 
key
 , 0)

49 
’d


51 
funùiÚ
 
_»ad”
:
	$¡ršg
(
key
)

52  
c
.
	$_rmes§ge_¡ršg
(
£lf
.
_CObj
 , 
key
 , 0)

53 
’d


55 
funùiÚ
 
_»ad”
:
	$boŞ
(
key
)

56  
c
.
	`_rmes§ge_št
(
£lf
.
_CObj
 , 
key
 , 0) ~= 0

57 
’d


59 
funùiÚ
 
_»ad”
:
	$mes§ge
(
key
, 
mes§ge_ty³
)

60 
loÿl
 
rmes§ge
 = 
c
.
	$_rmes§ge_mes§ge
(
£lf
.
_CObj
 , 
key
 , 0)

61 
rmes§ge
 
th’


62 
loÿl
 
v
 = {

63 
_CObj
 = 
rmes§ge
,

64 
_CTy³
 = 
mes§ge_ty³
,

65 
_P¬’t
 = 
£lf
,

66 
	}
}

67  
	$£tm‘©abË
Ğ
v
 , 
_R_m‘a
 )

68 
’d


69 
’d


71 
funùiÚ
 
_»ad”
:(
key
)

72  
c
.
	$_rmes§ge_št
(
£lf
.
_CObj
 , 
key
 , 0)

73 
’d


75 
funùiÚ
 
_»ad”
:
	$»®_»³©ed
(
key
)

76 
loÿl
 
cobj
 = 
£lf
.
_CObj


77 
loÿl
 
n
 = 
c
.
	$_rmes§ge_size
(
cobj
 , 
key
)

78 
loÿl
 
»t
 = {
	}
}

79 
i
=0,
	gn
-1 do

80 
tš£¹
(
»t
, 
c
.
	$_rmes§ge_»®
(
cobj
 , 
key
 , 
i
))

81 
’d


82  
»t


83 
’d


85 
funùiÚ
 
_»ad”
:
	$¡ršg_»³©ed
(
key
)

86 
loÿl
 
cobj
 = 
£lf
.
_CObj


87 
loÿl
 
n
 = 
c
.
	$_rmes§ge_size
(
cobj
 , 
key
)

88 
loÿl
 
»t
 = {
	}
}

89 
i
=0,
	gn
-1 do

90 
tš£¹
(
»t
, 
c
.
	$_rmes§ge_¡ršg
(
cobj
 , 
key
 , 
i
))

91 
’d


92  
»t


93 
’d


95 
funùiÚ
 
_»ad”
:
	$boŞ_»³©ed
(
key
)

96 
loÿl
 
cobj
 = 
£lf
.
_CObj


97 
loÿl
 
n
 = 
c
.
	$_rmes§ge_size
(
cobj
 , 
key
)

98 
loÿl
 
»t
 = {
	}
}

99 
i
=0,
	gn
-1 do

100 
tš£¹
(
»t
, 
c
.
_rmes§ge_št
(
cobj
 , 
key
 , 
i
) ~= 0)

101 
’d


102  
»t


103 
’d


105 
funùiÚ
 
_»ad”
:
	$mes§ge_»³©ed
(
key
, 
mes§ge_ty³
)

106 
loÿl
 
cobj
 = 
£lf
.
_CObj


107 
loÿl
 
n
 = 
c
.
	$_rmes§ge_size
(
cobj
 , 
key
)

108 
loÿl
 
»t
 = {
	}
}

109 
i
=0,
	gn
-1 do

110 
loÿl
 
	gm
 = {

111 
_CObj
 = 
c
.
_rmes§ge_mes§ge
(
cobj
 , 
key
 , 
i
),

112 
	g_CTy³
 = 
mes§ge_ty³
,

113 
	g_P¬’t
 = 
£lf
,

115 
tš£¹
(
»t
, 
	$£tm‘©abË
Ğ
m
 , 
_R_m‘a
 ))

116 
’d


117  
»t


118 
’d


120 
funùiÚ
 
_»ad”
:
	$št_»³©ed
(
key
)

121 
loÿl
 
cobj
 = 
£lf
.
_CObj


122 
loÿl
 
n
 = 
c
.
	$_rmes§ge_size
(
cobj
 , 
key
)

123 
loÿl
 
»t
 = {
	}
}

124 
i
=0,
	gn
-1 do

125 
tš£¹
(
»t
, 
c
.
	$_rmes§ge_št
(
cobj
 , 
key
 , 
i
))

126 
’d


127  
»t


128 
’d


131 
	#PBC_INT
 1

	)

132 
	#PBC_REAL
 2

	)

133 
	#PBC_BOOL
 3

	)

134 
	#PBC_ENUM
 4

	)

135 
	#PBC_STRING
 5

	)

136 
	#PBC_MESSAGE
 6

	)

137 
	#PBC_FIXED64
 7

	)

138 
	#PBC_FIXED32
 8

	)

139 
	#PBC_BYTES
 9

	)

140 
	#PBC_INT64
 10

	)

141 
	#PBC_UINT
 11

	)

142 
	#PBC_UNKNOWN
 12

	)

143 
	#PBC_REPEATED
 128

	)

146 
_»ad”
[1] = 
	$funùiÚ
(
msg
è 
_»ad”
.
’d


147 
_»ad”
[2] = 
	$funùiÚ
(
msg
è 
_»ad”
.
»®
 
’d


148 
_»ad”
[3] = 
	$funùiÚ
(
msg
è 
_»ad”
.
boŞ
 
’d


149 
_»ad”
[4] = 
	$funùiÚ
(
msg
è 
_»ad”
.
¡ršg
 
’d


150 
_»ad”
[5] = 
	$funùiÚ
(
msg
è 
_»ad”
.
¡ršg
 
’d


151 
_»ad”
[6] = 
	$funùiÚ
(
msg
)

152 
loÿl
 
mes§ge
 = 
_»ad”
.message

153  
	$funùiÚ
(
£lf
,
key
)

154  
	$mes§ge
(
£lf
, 
key
, 
msg
)

155 
’d


156 
’d


157 
_»ad”
[7] = _reader[1]

158 
_»ad”
[8] = _reader[1]

159 
_»ad”
[9] = _reader[5]

160 
_»ad”
[10] = _reader[7]

161 
_»ad”
[11] = _reader[7]

163 
_»ad”
[128+1] = 
	$funùiÚ
(
msg
è 
_»ad”
.
št_»³©ed
 
’d


164 
_»ad”
[128+2] = 
	$funùiÚ
(
msg
è 
_»ad”
.
»®_»³©ed
 
’d


165 
_»ad”
[128+3] = 
	$funùiÚ
(
msg
è 
_»ad”
.
boŞ_»³©ed
 
’d


166 
_»ad”
[128+4] = 
	$funùiÚ
(
msg
è 
_»ad”
.
¡ršg_»³©ed
 
’d


167 
_»ad”
[128+5] = 
	$funùiÚ
(
msg
è 
_»ad”
.
¡ršg_»³©ed
 
’d


168 
_»ad”
[128+6] = 
	$funùiÚ
(
msg
)

169 
loÿl
 
mes§ge
 = 
_»ad”
.
mes§ge_»³©ed


170  
	$funùiÚ
(
£lf
,
key
)

171  
	$mes§ge
(
£lf
, 
key
, 
msg
)

172 
’d


173 
’d


174 
_»ad”
[128+7] = _reader[128+1]

175 
_»ad”
[128+8] = _reader[128+1]

176 
_»ad”
[128+9] = _reader[128+5]

177 
_»ad”
[128+10] = _reader[128+7]

178 
_»ad”
[128+11] = _reader[128+7]

180 
loÿl
 
_decode_ty³_m‘a
 = {
	}
}

182 
funùiÚ
 
_decode_ty³_m‘a
:
	$__šdex
(
key
)

183 
loÿl
 
t
, 
msg
 = 
c
.
	$_’v_ty³
(
P
, 
£lf
.
_CTy³
, 
key
)

184 
loÿl
 
func
 = 
	$as£¹
(
_»ad”
[
t
],
key
)(
msg
)

185 
£lf
[
key
] = 
func


186  
func


187 
’d


189 
	`£tm‘©abË
(
decode_ty³_ÿche
 , {

190 
__šdex
 = 
	`funùiÚ
(
£lf
, 
key
)

191 
loÿl
 
v
 = 
	`£tm‘©abË
({ 
_CTy³
 = 
key
 } , 
_decode_ty³_m‘a
)

192 
£lf
[
key
] = 
v


193  
v


194 
’d


195 
	}
})

197 
loÿl
 
funùiÚ
 
	$decode_mes§ge
Ğ
mes§ge
 , 
bufãr
, 
Ëngth
)

198 
loÿl
 
rmes§ge
 = 
c
.
	$_rmes§ge_Ãw
(
P
, 
mes§ge
, 
bufãr
, 
Ëngth
)

199 
rmes§ge
 
th’


200 
loÿl
 
£lf
 = {

201 
_CObj
 = 
rmes§ge
,

202 
_CTy³
 = 
mes§ge
,

203 
	}
}

204 
	gc
.
	$_add_rmes§ge
(
GC
,
rmes§ge
)

205  
	$£tm‘©abË
Ğ
£lf
 , 
_R_m‘a
 )

206 
’d


207 
’d


209 ----------- 
’code
 ----------------

211 
loÿl
 
’code_ty³_ÿche
 = {
	}
}

213 
loÿl
 
funùiÚ
 
	$’code_mes§ge
(
CObj
, 
mes§ge_ty³
, 
t
)

214 
loÿl
 
ty³
 = 
’code_ty³_ÿche
[
mes§ge_ty³
]

215 
k
,
v
 
š
 
	$·œs
(
t
) do

216 
loÿl
 
func
 = 
ty³
[
k
]

217 
	$func
(
CObj
, 
k
 , 
v
)

218 
’d


219 
’d


221 
loÿl
 
_wr™”
 = {

222 
»®
 = 
c
.
_wmes§ge_»®
,

223 ğ
c
.
_wmes§ge_¡ršg
,

224 
¡ršg
 = 
c
.
_wmes§ge_¡ršg
,

225 ğ
c
.
_wmes§ge_št
,

226 
	}
}

228 
funùiÚ
 
	g_wr™”
:
	$boŞ
(
k
,
v
)

229 
c
.
	$_wmes§ge_št
(
£lf
, 
k
, 
v
 
ªd
 1 
Ü
 0)

230 
’d


232 
funùiÚ
 
_wr™”
:
	$mes§ge
(
k
, 
v
 , 
mes§ge_ty³
)

233 
loÿl
 
submes§ge
 = 
c
.
	$_wmes§ge_mes§ge
(
£lf
, 
k
)

234 
	$’code_mes§ge
(
submes§ge
, 
mes§ge_ty³
, 
v
)

235 
’d


237 
funùiÚ
 
_wr™”
:
	$»®_»³©ed
(
k
,
v
)

238 
_
,
v
 
š
 
	$aœs
(
v
) do

239 
c
.
	$_wmes§ge_»®
(
£lf
,
k
,
v
)

240 
’d


241 
’d


243 
funùiÚ
 
_wr™”
:
	$boŞ_»³©ed
(
k
,
v
)

244 
_
,
v
 
š
 
	$aœs
(
v
) do

245 
c
.
	$_wmes§ge_št
(
£lf
, 
k
, 
v
 
ªd
 1 
Ü
 0)

246 
’d


247 
’d


249 
funùiÚ
 
_wr™”
:
	$¡ršg_»³©ed
(
k
,
v
)

250 
_
,
v
 
š
 
	$aœs
(
v
) do

251 
c
.
	$_wmes§ge_¡ršg
(
£lf
,
k
,
v
)

252 
’d


253 
’d


255 
funùiÚ
 
_wr™”
:
	$mes§ge_»³©ed
(
k
,
v
, 
mes§ge_ty³
)

256 
_
,
v
 
š
 
	$aœs
(
v
) do

257 
loÿl
 
submes§ge
 = 
c
.
	$_wmes§ge_mes§ge
(
£lf
, 
k
)

258 
	$’code_mes§ge
(
submes§ge
, 
mes§ge_ty³
, 
v
)

259 
’d


260 
’d


262 
funùiÚ
 
_wr™”
:
	$št_»³©ed
(
k
,
v
)

263 
_
,
v
 
š
 
	$aœs
(
v
) do

264 
c
.
	$_wmes§ge_št
(
£lf
,
k
,
v
)

265 
’d


266 
’d


268 
_wr™”
[1] = 
	$funùiÚ
(
msg
è 
_wr™”
.
’d


269 
_wr™”
[2] = 
	$funùiÚ
(
msg
è 
_wr™”
.
»®
 
’d


270 
_wr™”
[3] = 
	$funùiÚ
(
msg
è 
_wr™”
.
boŞ
 
’d


271 
_wr™”
[4] = 
	$funùiÚ
(
msg
è 
_wr™”
.
¡ršg
 
’d


272 
_wr™”
[5] = 
	$funùiÚ
(
msg
è 
_wr™”
.
¡ršg
 
’d


273 
_wr™”
[6] = 
	$funùiÚ
(
msg
)

274 
loÿl
 
mes§ge
 = 
_wr™”
.message

275  
	$funùiÚ
(
£lf
,
key
 , 
v
)

276  
	$mes§ge
(
£lf
, 
key
, 
v
, 
msg
)

277 
’d


278 
’d


279 
_wr™”
[7] = _writer[1]

280 
_wr™”
[8] = _writer[1]

281 
_wr™”
[9] = _writer[5]

282 
_wr™”
[10] = _writer[7]

283 
_wr™”
[11] = _writer[7]

285 
_wr™”
[128+1] = 
	$funùiÚ
(
msg
è 
_wr™”
.
št_»³©ed
 
’d


286 
_wr™”
[128+2] = 
	$funùiÚ
(
msg
è 
_wr™”
.
»®_»³©ed
 
’d


287 
_wr™”
[128+3] = 
	$funùiÚ
(
msg
è 
_wr™”
.
boŞ_»³©ed
 
’d


288 
_wr™”
[128+4] = 
	$funùiÚ
(
msg
è 
_wr™”
.
¡ršg_»³©ed
 
’d


289 
_wr™”
[128+5] = 
	$funùiÚ
(
msg
è 
_wr™”
.
¡ršg_»³©ed
 
’d


290 
_wr™”
[128+6] = 
	$funùiÚ
(
msg
)

291 
loÿl
 
mes§ge
 = 
_wr™”
.
mes§ge_»³©ed


292  
	$funùiÚ
(
£lf
,
key
, 
v
)

293  
	$mes§ge
(
£lf
, 
key
, 
v
, 
msg
)

294 
’d


295 
’d


297 
_wr™”
[128+7] = _writer[128+1]

298 
_wr™”
[128+8] = _writer[128+1]

299 
_wr™”
[128+9] = _writer[128+5]

300 
_wr™”
[128+10] = _writer[128+7]

301 
_wr™”
[128+11] = _writer[128+7]

303 
loÿl
 
_’code_ty³_m‘a
 = {
	}
}

305 
funùiÚ
 
_’code_ty³_m‘a
:
	$__šdex
(
key
)

306 
loÿl
 
t
, 
msg
 = 
c
.
	$_’v_ty³
(
P
, 
£lf
.
_CTy³
, 
key
)

307 
loÿl
 
func
 = 
	$as£¹
(
_wr™”
[
t
],
key
)(
msg
)

308 
£lf
[
key
] = 
func


309  
func


310 
’d


312 
	`£tm‘©abË
(
’code_ty³_ÿche
 , {

313 
__šdex
 = 
	`funùiÚ
(
£lf
, 
key
)

314 
loÿl
 
v
 = 
	`£tm‘©abË
({ 
_CTy³
 = 
key
 } , 
_’code_ty³_m‘a
)

315 
£lf
[
key
] = 
v


316  
v


317 
’d


318 
	}
})

320 
funùiÚ
 
	gM
.
	$’code
Ğ
mes§ge
, 
t
 , 
func
 , ...)

321 
loÿl
 
’cod”
 = 
c
.
	$_wmes§ge_Ãw
(
P
, 
mes§ge
)

322 
	$as£¹
(
’cod”
 , 
mes§ge
)

323 
	$’code_mes§ge
(
’cod”
, 
mes§ge
, 
t
)

324 
func
 
th’


325 
loÿl
 
bufãr
, 
Ën
 = 
c
.
	$_wmes§ge_bufãr
(
’cod”
)

326 
loÿl
 
»t
 = 
	$func
(
bufãr
, 
Ën
, ...)

327 
c
.
	$_wmes§ge_d–‘e
(
’cod”
)

328  
»t


330 
loÿl
 
s
 = 
c
.
	$_wmes§ge_bufãr_¡ršg
(
’cod”
)

331 
c
.
	$_wmes§ge_d–‘e
(
’cod”
)

332  
s


333 
’d


334 
’d


336 --------- 
uÅack
 ----------

338 
loÿl
 
_·‰”n_ty³
 = {

351 
	}
}

353 
	g_·‰”n_ty³
[4] = 
_·‰”n_ty³
[1]

354 
_·‰”n_ty³
[8] = _pattern_type[1]

355 
_·‰”n_ty³
[9] = _pattern_type[5]

356 
_·‰”n_ty³
[10] = _pattern_type[7]

357 
_·‰”n_ty³
[11] = _pattern_type[7]

358 
_·‰”n_ty³
[128+4] = _pattern_type[128+1]

359 
_·‰”n_ty³
[128+8] = _pattern_type[128+1]

360 
_·‰”n_ty³
[128+9] = _pattern_type[128+5]

361 
_·‰”n_ty³
[128+10] = _pattern_type[128+7]

362 
_·‰”n_ty³
[128+11] = _pattern_type[128+7]

365 
loÿl
 
funùiÚ
 
	$_·‰”n_ü—‹
(
·‰”n
)

366 
loÿl
 
™”
 = 
¡ršg
.
	`gm©ch
(
·‰”n
,"[^ ]+")

367 
loÿl
 
mes§ge
 = 
	$™”
()

368 
loÿl
 
ı©
 = {
	}
}

369 
loÿl
 
lua
 = {}

370 
v
 
š
 
™”
 do

371 
loÿl
 
tidx
 = 
c
.
	$_’v_ty³
(
P
, 
mes§ge
, 
v
)

372 
loÿl
 
t
 = 
_·‰”n_ty³
[
tidx
]

373 
	$as£¹
(
t
,
tidx
)

374 
	`tš£¹
(
ı©
,
v
 .. " " .. 
t
[1])

375 
	$tš£¹
(
lua
,
t
[2])

376 
’d


377 
loÿl
 
cobj
 = 
c
.
	`_·‰”n_Ãw
(
P
, 
mes§ge
 , "@" .. 
bË
.
	`cÚÿt
(
ı©
," "))

378 
cobj
 =ğ
n
 
th’


380 
’d


381 
c
.
	$_add_·‰”n
(
GC
, 
cobj
)

382 
loÿl
 
·t
 = {

383 
CObj
 = 
cobj
,

384 
fÜm©
 = 
bË
.
	`cÚÿt
(
lua
),

385 
size
 = 0

386 
	}
}

387 
	g·t
.
	gsize
 = 
c
.
	$_·‰”n_size
(
·t
.
fÜm©
)

389  
·t


390 
’d


392 
	`£tm‘©abË
(
_·‰”n_ÿche
, {

393 
__šdex
 = 
	`funùiÚ
(
t
, 
key
)

394 
loÿl
 
v
 = 
	`_·‰”n_ü—‹
(
key
)

395 
t
[
key
] = 
v


396  
v


397 
’d


398 
	}
})

400 
funùiÚ
 
	gM
.
	$uÅack
(
·‰”n
, 
bufãr
, 
Ëngth
)

401 
loÿl
 
·t
 = 
_·‰”n_ÿche
[
·‰”n
]

402  
c
.
	$_·‰”n_uÅack
(
·t
.
CObj
 ,…©.
fÜm©
,…©.
size
, 
bufãr
, 
Ëngth
)

403 
’d


405 
funùiÚ
 
M
.
	$·ck
(
·‰”n
, ...)

406 
loÿl
 
·t
 = 
_·‰”n_ÿche
[
·‰”n
]

407  
c
.
	$_·‰”n_·ck
(
·t
.
CObj
,…©.
fÜm©
,…©.
size
 , ...)

408 
’d


410 
funùiÚ
 
M
.
	$check
(
ty³Çme
 , 
f›ld
)

411 
f›ld
 =ğ
n
 
th’


412  
c
.
	$_’v_ty³
(
P
,
ty³Çme
)

414  
c
.
	`_’v_ty³
(
P
,
ty³Çme
,
f›ld
) ~=0

415 
’d


416 
’d


420 
loÿl
 
deçuÉ_ÿche
 = {
	}
}

422 -- 
todo
 : 
ş—r
 
deçuÉ_ÿche
, 
	gv
.
_CObj


424 
loÿl
 
funùiÚ
 
	$deçuÉ_bË
(
ty³Çme
)

425 
loÿl
 
v
 = 
deçuÉ_ÿche
[
ty³Çme
]

426 
v
 
th’


427  
v


428 
’d


430 
v
 = { 
__šdex
 = 
	`as£¹
(
	`decode_mes§ge
(
ty³Çme
 , "")è
	}
}

432 
	gdeçuÉ_ÿche
[
ty³Çme
] = 
v


433  
v


434 
’d


436 
loÿl
 
decode_mes§ge_mt
 = {}

438 
loÿl
 
funùiÚ
 
	$decode_mes§ge_cb
(
ty³Çme
, 
bufãr
)

439  
	`£tm‘©abË
 ( { 
ty³Çme
, 
bufãr
 
	}
} , 
	gdecode_mes§ge_mt
)

440 
’d


442 
funùiÚ
 
	gM
.
	$decode
(
ty³Çme
, 
bufãr
, 
Ëngth
)

443 
loÿl
 
»t
 = {
	}
}

444 
loÿl
 
ok
 = 
c
.
	$_decode
(
P
, 
decode_mes§ge_cb
 , 
»t
 , 
ty³Çme
, 
bufãr
, 
Ëngth
)

445 
ok
 
th’


446  
	`£tm‘©abË
(
»t
 , 
	$deçuÉ_bË
(
ty³Çme
))

448  
çl£
 , 
c
.
	$_Ï¡_”rÜ
(
P
)

449 
’d


450 
’d


452 
loÿl
 
funùiÚ
 
	$ex·nd
(
tbl
)

453 
loÿl
 
ty³Çme
 = 
	$¿wg‘
(
tbl
 , 1)

454 
loÿl
 
bufãr
 = 
	$¿wg‘
(
tbl
 , 2)

455 
tbl
[1] ,bl[2] = 
n
 ,‚il

456 
	`as£¹
(
c
.
	`_decode
(
P
, 
decode_mes§ge_cb
 , 
tbl
 , 
ty³Çme
, 
bufãr
),ypename)

457 
	`£tm‘©abË
(
tbl
 , 
	$deçuÉ_bË
(
ty³Çme
))

458 
’d


460 
funùiÚ
 
decode_mes§ge_mt
.
	$__šdex
(
tbl
, 
key
)

461 
	$ex·nd
(
tbl
)

462  
tbl
[
key
]

463 
’d


465 
funùiÚ
 
decode_mes§ge_mt
.
	$__·œs
(
tbl
)

466 
	$ex·nd
(
tbl
)

467  
	$·œs
(
tbl
)

468 
’d


470 
loÿl
 
funùiÚ
 
	$£t_deçuÉ
(
ty³Çme
, 
tbl
)

471 
k
,
v
 
š
 
	$·œs
(
tbl
) do

472 
	`ty³
(
v
è=ğ"bË" 
th’


473 
loÿl
 
t
, 
msg
 = 
c
.
	$_’v_ty³
(
P
, 
ty³Çme
, 
k
)

474 
t
 =ğ6 
th’


475 
	$£t_deçuÉ
(
msg
, 
v
)

476 
–£if
 
t
 =ğ128+6 
th’


477 
_
,
v
 
š
 
	$aœs
(
v
) do

478 
	$£t_deçuÉ
(
msg
, 
v
)

479 
’d


480 
’d


481 
’d


482 
’d


483  
	`£tm‘©abË
(
tbl
 , 
	$deçuÉ_bË
(
ty³Çme
))

484 
’d


486 
funùiÚ
 
M
.(
bufãr
)

487 
c
.
	$_’v_»gi¡”
(
P
, 
bufãr
)

488 
’d


490 
funùiÚ
 
M
.
	$»gi¡”_fe
(
f’ame
)

491 
loÿl
 
f
 = 
	`as£¹
(
io
.
	`İ’
(
f’ame
 , "rb"))

492 
loÿl
 
bufãr
 = 
f
:
»ad
 "*a"

493 
c
.
	$_’v_»gi¡”
(
P
, 
bufãr
)

494 
f
:
	$şo£
()

495 
’d


497 
funùiÚ
 
M
.
	$’um_id
(
’um_ty³
, 
’um_Çme
)

498  
c
.
	$_’v_’um_id
(
P
, 
’um_ty³
, 
’um_Çme
)

499 
’d


501 
funùiÚ
 
M
.
	$exŒaù
(
tbl
)

502 
loÿl
 
ty³Çme
 = 
	$¿wg‘
(
tbl
 , 1)

503 
loÿl
 
bufãr
 = 
	$¿wg‘
(
tbl
 , 2)

504 
	`ty³
(
ty³Çme
è=ğ"¡ršg" 
ªd
y³(
bufãr
è=ğ"¡ršg" 
th’


505 
M
.
	$check
(
ty³Çme
è
th’


506 
	$ex·nd
(
tbl
)

507 
’d


508 
’d


510 
k
, 
v
 
š
 
	$·œs
(
tbl
) do

511 
	`ty³
(
v
è=ğ"bË" 
th’


512 
M
.
	$exŒaù
(
v
)

513 
’d


514 
’d


515 
’d


517 
M
.=
£t_deçuÉ


519  
M


	@proto/ClientProto/ProtoGen/protobuf-net.xml

1 <?
xml
 
	gv”siÚ
="1.0"?>

2 <
doc
>

3 <
as£mbly
>

4 <
Çme
>
´Ùobuf
-
Ãt
</name>

5 </
as£mbly
>

6 <
memb”s
>

7 <
memb”
 
Çme
="T:ProtoBuf.BclHelpers">

8 <
summ¬y
>

9 
Provides
 
suµÜt
 
commÚ
 .
NET
 
ty³s
 
th©
 dØ
nÙ
 
have
 
a
 
dœeù
 
»´e£Á©iÚ


10 
š
 
´Ùobuf
, 
usšg
 
the
 
defš™iÚs
 
äom
 
	gbş
.
	g´Ùo


11 </
	gsumm¬y
>

12 </
	gmemb”
>

13 <
memb”
 
	gÇme
="M:ProtoBuf.BclHelpers.GetUninitializedObject(System.Type)">

14 <
summ¬y
>

15 
C»©es
 
a
 
Ãw
 
š¡ªû
 
of
 
the
 
¥ecif›d
 
ty³
, 
by·ssšg
h
	gcÚ¡ruùÜ
.

16 </
	gsumm¬y
>

17 <
·¿m
 
	gÇme
="ty³">
The
 
ty³
 
to
 
ü—‹
</param>

18 <
»tuºs
>
The
 
Ãw
 
š¡ªû
</returns>

19 <
exû±iÚ
 
üef
="T:Sy¡em.NÙSuµÜ‹dExû±iÚ">
If
 
the
 
¶©fÜm
 
dÛs
 
nÙ
 
suµÜt
 
cÚ¡ruùÜ
-
skpšg
</exception>

20 </
memb”
>

21 <
memb”
 
Çme
="M:ProtoBuf.BclHelpers.WriteTimeSpan(System.TimeSpan,ProtoBuf.ProtoWriter)">

22 <
summ¬y
>

23 
Wr™es
 
a
 
TimeS·n
 
to
‡ 
´Ùobuf
 
¡»am


24 </
summ¬y
>

25 </
memb”
>

26 <
memb”
 
Çme
="M:ProtoBuf.BclHelpers.ReadTimeSpan(ProtoBuf.ProtoReader)">

27 <
summ¬y
>

28 
P¬£s
 
a
 
TimeS·n
 
äom
‡ 
´Ùobuf
 
¡»am


29 </
summ¬y
>

30 </
memb”
>

31 <
memb”
 
Çme
="M:ProtoBuf.BclHelpers.ReadDateTime(ProtoBuf.ProtoReader)">

32 <
summ¬y
>

33 
P¬£s
 
a
 
D©eTime
 
äom
‡ 
´Ùobuf
 
¡»am


34 </
summ¬y
>

35 </
memb”
>

36 <
memb”
 
Çme
="M:ProtoBuf.BclHelpers.WriteDateTime(System.DateTime,ProtoBuf.ProtoWriter)">

37 <
summ¬y
>

38 
Wr™es
 
a
 
D©eTime
 
to
‡ 
´Ùobuf
 
¡»am


39 </
summ¬y
>

40 </
memb”
>

41 <
memb”
 
Çme
="M:ProtoBuf.BclHelpers.ReadDecimal(ProtoBuf.ProtoReader)">

42 <
summ¬y
>

43 
P¬£s
 
a
 
decim®
 
äom
‡ 
´Ùobuf
 
¡»am


44 </
summ¬y
>

45 </
memb”
>

46 <
memb”
 
Çme
="M:ProtoBuf.BclHelpers.WriteDecimal(System.Decimal,ProtoBuf.ProtoWriter)">

47 <
summ¬y
>

48 
Wr™es
 
a
 
decim®
 
to
‡ 
´Ùobuf
 
¡»am


49 </
summ¬y
>

50 </
memb”
>

51 <
memb”
 
Çme
="M:ProtoBuf.BclHelpers.WriteGuid(System.Guid,ProtoBuf.ProtoWriter)">

52 <
summ¬y
>

53 
Wr™es
 
a
 
Guid
 
to
‡ 
´Ùobuf
 
¡»am


54 </
summ¬y
>

55 </
memb”
>

56 <
memb”
 
Çme
="M:ProtoBuf.BclHelpers.ReadGuid(ProtoBuf.ProtoReader)">

57 <
summ¬y
>

58 
P¬£s
 
a
 
Guid
 
äom
‡ 
´Ùobuf
 
¡»am


59 </
summ¬y
>

60 </
memb”
>

61 <
memb”
 
Çme
="M:ProtoBuf.BclHelpers.ReadNetObject(System.Object,ProtoBuf.ProtoReader,System.Int32,System.Type,ProtoBuf.BclHelpers.NetObjectOptions)">

62 <
summ¬y
>

63 
R—ds
 
ª
 *
im¶em’tiÚ
 
¥ecific
* 
bundËd
 .
NET
 
objeù
, 
	$šşudšg
 (
as
 
İtiÚs
è
ty³
-
m‘ad©a
, 
id’t™y
/
»
-
u£
, 
‘c
.

64 </
summ¬y
>

65 </
memb”
>

66 <
memb”
 
Çme
="M:ProtoBuf.BclHelpers.WriteNetObject(System.Object,ProtoBuf.ProtoWriter,System.Int32,ProtoBuf.BclHelpers.NetObjectOptions)">

67 <
summ¬y
>

68 
Wr™es
 
ª
 *
im¶em’tiÚ
 
¥ecific
* 
bundËd
 .
NET
 
objeù
, 
	$šşudšg
 (
as
 
İtiÚs
è
ty³
-
m‘ad©a
, 
id’t™y
/
»
-
u£
, 
‘c
.

69 </
summ¬y
>

70 </
memb”
>

71 <
memb”
 
Çme
="T:ProtoBuf.BclHelpers.NetObjectOptions">

72 <
summ¬y
>

73 
O±iÚ®
 
behaviours
 
th©
 
šŒoduû
 .
NET
-
¥ecific
 
funùiÚ®™y


74 </
summ¬y
>

75 </
memb”
>

76 <
memb”
 
Çme
="F:ProtoBuf.BclHelpers.NetObjectOptions.None">

77 <
summ¬y
>

78 
No
 
¥ecŸl
 
behaviour


79 </
summ¬y
>

80 </
memb”
>

81 <
memb”
 
Çme
="F:ProtoBuf.BclHelpers.NetObjectOptions.AsReference">

82 <
summ¬y
>

83 
EÇbËs
 
fuÎ
 
objeù
-
Œackšg
/fuÎ-
g¿ph
 
suµÜt
.

84 </
summ¬y
>

85 </
memb”
>

86 <
memb”
 
Çme
="F:ProtoBuf.BclHelpers.NetObjectOptions.DynamicType">

87 <
summ¬y
>

88 
Embeds
 
the
 
ty³
 
šfÜm©iÚ
 
što
h
¡»am
, 
®lowšg
 
u§ge
 
w™h
 
ty³s
 
nÙ
 
known
 
š
 
advªû
.

89 </
summ¬y
>

90 </
memb”
>

91 <
memb”
 
Çme
="F:ProtoBuf.BclHelpers.NetObjectOptions.UseConstructor">

92 <
summ¬y
>

93 
If
 
çl£
, 
the
 
cÚ¡ruùÜ
 th
ty³
 
is
 
by·s£d
 
duršg
 
de£rŸliz©iÚ
, 
m—nšg
 
ªy
 
f›ld
 
š™Ÿliz”s


94 
Ü
 
Ùh”
 
š™Ÿliz©iÚ
 
code
 
is
 
sk³d
.

95 </
summ¬y
>

96 </
memb”
>

97 <
memb”
 
Çme
="F:ProtoBuf.BclHelpers.NetObjectOptions.LateSet">

98 <
summ¬y
>

99 
Should
 
the
 
objeù
 
šdex
 
be
 
»£rved
, 
¿th”
 
thª
 
ü—tšg
 
ª
 objeù 
´om±ly


100 </
summ¬y
>

101 </
memb”
>

102 <
memb”
 
Çme
="T:ProtoBuf.BufferExtension">

103 <
summ¬y
>

104 
Provides
 
a
 
sim¶e
 
bufãr
-
ba£d
 
im¶em’tiÚ
 
of
 
ª
 <
£e
 
üef
="T:PrÙoBuf.IEx‹nsiÚ">
ex‹nsiÚ
</£e> 
objeù
.

105 </
summ¬y
>

106 </
memb”
>

107 <
memb”
 
Çme
="T:ProtoBuf.IExtension">

108 <
summ¬y
>

109 
Provides
 
add™iÚ
 
ÿ·b™y
 
suµÜtšg
 
uÃx³ùed
 
f›lds
 
duršg


110 
´ÙocŞ
-
bufãr
 
£rŸliz©iÚ
/
de£rŸliz©iÚ
. 
This
 
®lows
 
loss
-
Ëss


111 
round
-
Œ
/
m”ge
, 
ev’
 
wh’
 
the
 
d©a
 
is
 
nÙ
 
fuÎy
 
und”¡ood
.

112 </
summ¬y
>

113 </
memb”
>

114 <
memb”
 
Çme
="M:ProtoBuf.IExtension.BeginAppend">

115 <
summ¬y
>

116 
Reque¡s
 
a
 
¡»am
 
što
 
which
 
ªy
 
uÃx³ùed
 
f›lds
 
ÿn
 
be
 
³rsi¡ed
.

117 </
summ¬y
>

118 <
»tuºs
>
A
 
Ãw
 
¡»am
 
su™abË
 
¡Üšg
 
d©a
.</returns>

119 </
memb”
>

120 <
memb”
 
Çme
="M:ProtoBuf.IExtension.EndAppend(System.IO.Stream,System.Boolean)">

121 <
summ¬y
>

122 
Indiÿ‹s
 
th©
 
®l
 
uÃx³ùed
 
f›lds
 
have
 
now
 
b“n
 
¡Üed
. 
The


123 
im¶em’tšg
 
şass
 
is
 
»¥ÚsibË
 
şosšg
 
the
 
¡»am
. 
If


124 "comm™" 
is
 
nÙ
 
Œue
 
the
 
d©a
 
may
 
be
 
disÿrded
.

125 </
summ¬y
>

126 <
·¿m
 
Çme
="¡»am">
The
 
¡»am
 
Üigš®ly
 
obšed
 
by
 
BegšAµ’d
.</param>

127 <
·¿m
 
Çme
="comm™">
True
 
the
 
­³nd
 
İ”©iÚ
 
com¶‘ed
 
sucûssfuÎy
.</param>

128 </
memb”
>

129 <
memb”
 
Çme
="M:ProtoBuf.IExtension.BeginQuery">

130 <
summ¬y
>

131 
Reque¡s
 
a
 
¡»am
 
of
 
the
 
uÃx³ùed
 
f›lds
 
´eviou¦y
 
¡Üed
.

132 </
summ¬y
>

133 <
»tuºs
>
A
 
´•¬ed
 
¡»am
 
of
 
the
 
uÃx³ùed
 
f›lds
.</returns>

134 </
memb”
>

135 <
memb”
 
Çme
="M:ProtoBuf.IExtension.EndQuery(System.IO.Stream)">

136 <
summ¬y
>

137 
Indiÿ‹s
 
th©
 
®l
 
uÃx³ùed
 
f›lds
 
have
 
now
 
b“n
 
»ad
. 
The


138 
im¶em’tšg
 
şass
 
is
 
»¥ÚsibË
 
şosšg
 
the
 
¡»am
.

139 </
summ¬y
>

140 <
·¿m
 
Çme
="¡»am">
The
 
¡»am
 
Üigš®ly
 
obšed
 
by
 
BegšQu”y
.</param>

141 </
memb”
>

142 <
memb”
 
Çme
="M:ProtoBuf.IExtension.GetLength">

143 <
summ¬y
>

144 
Reque¡s
 
the
 
Ëngth
 
of
h
¿w
 
bš¬y
 
¡»am
; 
this
 
is
 
u£d


145 
wh’
 
£rŸlizšg
 
sub
-
’t™›s
 
to
 
šdiÿ‹
 
the
 
ex³ùed
 
size
.

146 </
summ¬y
>

147 <
»tuºs
>
The
 
Ëngth
 
of
 
the
 
bš¬y
 
¡»am
 
»´e£Ášg
 
uÃx³ùed
 
d©a
.</returns>

148 </
memb”
>

149 <
memb”
 
Çme
="T:ProtoBuf.ProtoBeforeSerializationAttribute">

150 <
summ¬y
>
S³cif›s
 
a
 
m‘hod
 
Ú
 
the
 
roÙ
-
cÚŒaù
 
š
 
ª
 
h›¿rchy
 
to
 
be
 
švoked
 
befÜe
 
£rŸliz©iÚ
.</summary>

151 </
memb”
>

152 <
memb”
 
Çme
="T:ProtoBuf.ProtoAfterSerializationAttribute">

153 <
summ¬y
>
S³cif›s
 
a
 
m‘hod
 
Ú
 
the
 
roÙ
-
cÚŒaù
 
š
 
ª
 
h›¿rchy
 
to
 
be
 
švoked
 
aá”
 
£rŸliz©iÚ
.</summary>

154 </
memb”
>

155 <
memb”
 
Çme
="T:ProtoBuf.ProtoBeforeDeserializationAttribute">

156 <
summ¬y
>
S³cif›s
 
a
 
m‘hod
 
Ú
 
the
 
roÙ
-
cÚŒaù
 
š
 
ª
 
h›¿rchy
 
to
 
be
 
švoked
 
befÜe
 
de£rŸliz©iÚ
.</summary>

157 </
memb”
>

158 <
memb”
 
Çme
="T:ProtoBuf.ProtoAfterDeserializationAttribute">

159 <
summ¬y
>
S³cif›s
 
a
 
m‘hod
 
Ú
 
the
 
roÙ
-
cÚŒaù
 
š
 
ª
 
h›¿rchy
 
to
 
be
 
švoked
 
aá”
 
de£rŸliz©iÚ
.</summary>

160 </
memb”
>

161 <
memb”
 
Çme
="M:ProtoBuf.Compiler.CompilerContext.LoadNullRef">

162 <
summ¬y
>

163 
Pushes
 
a
 
nuÎ
 
»ã»nû
 
Úto
 
the
 
¡ack
. 
NÙe
 
th©
 
this
 
should
 
Úly


164 
be
 
u£d
 
to
  
a
 
	`nuÎ
 (
Ü
 
£t
‡ 
v¬ŸbË
Ø
nuÎ
); nuÎ-
‹¡s


165 
u£
 
B¿nchIfTrue
 / 
B¿nchIfF®£
.

166 </
summ¬y
>

167 </
memb”
>

168 <
memb”
 
Çme
="M:ProtoBuf.Compiler.CompilerContext.UsingBlock.#ctor(ProtoBuf.Compiler.CompilerContext,ProtoBuf.Compiler.Local)">

169 <
summ¬y
>

170 
C»©es
 
a
 
Ãw
 "usšg" 
	$block
 (
equiv®’t
è
¬ound
 
a
 
v¬ŸbË
;

171 
the
 
v¬ŸbË
 
mu¡
 
exi¡
, 
ªd
 
nÙe
 
	`th©
 (
uÆike
 
š
 
C
#è
™
 
is


172 
the
 
v¬ŸbËs
 *
fš®
* 
v®ue
 
th©
 
g‘s
 
di¥o£d
. 
If
 
you
 
Ãed


173 *
Üigš®
* 
di¥o§l
, 
cİy
 
your
 
v¬ŸbË
 
fœ¡
.

175 
It
 
is
 
the
 
ÿÎ”s
 
»¥Úsib™y
 
to
 
’su»
 
th©
h
v¬ŸbË
's

176 
scİe
 
fuÎy
-
’ÿpsuÏ‹s
 
the
 "usšg"; 
nÙ
,h
v¬ŸbË


177 
may
 
be
 
»
-
	`u£d
 (
ªd
 
thus
„e-
assigÃd
è
uÃx³ùedly
.

178 </
summ¬y
>

179 </
memb”
>

180 <
memb”
 
Çme
="T:ProtoBuf.DataFormat">

181 <
summ¬y
>

182 
Sub
-
fÜm©
 
to
 
u£
 
wh’
 
£rŸlizšg
/
de£rŸlizšg
 
d©a


183 </
summ¬y
>

184 </
memb”
>

185 <
memb”
 
Çme
="F:ProtoBuf.DataFormat.Default">

186 <
summ¬y
>

187 
U£s
 
the
  
’codšg
 th
d©a
-
ty³
.

188 </
summ¬y
>

189 </
memb”
>

190 <
memb”
 
Çme
="F:ProtoBuf.DataFormat.ZigZag">

191 <
summ¬y
>

192 
Wh’
 
­¶›d
 
to
 sigÃd 
š‹g”
-
ba£d
 
	`d©a
 (
šşudšg
 
Decim®
), 
this


193 
šdiÿ‹s
 
th©
 
zigzag
 
v¬ŸÁ
 
’codšg
 
wl
 
be
 
u£d
. 
This
 
m—ns
h© 
v®ues


194 
w™h
 
sm®l
 
	$magn™ude
 (
»g¬dËss
 
of
 
sign
è
ke
 
a
 
sm®l
 
amouÁ


195 
of
 
¥aû
 
to
 
’code
.

196 </
summ¬y
>

197 </
memb”
>

198 <
memb”
 
Çme
="F:ProtoBuf.DataFormat.TwosComplement">

199 <
summ¬y
>

200 
Wh’
 
­¶›d
 
to
 sigÃd 
š‹g”
-
ba£d
 
	`d©a
 (
šşudšg
 
Decim®
), 
this


201 
šdiÿ‹s
 
th©
 
two
's-complement variantƒncoding will be used.

202 
This
 
m—ns
 
th©
 
ªy
 -
ve
 
numb”
 
wl
 
ke
 10 
	`by‹s
 (
ev’
 32-
b™
),

203 
so
 
should
 
Úly
 
be
 
u£d
 
com·tib™y
.

204 </
summ¬y
>

205 </
memb”
>

206 <
memb”
 
Çme
="F:ProtoBuf.DataFormat.FixedSize">

207 <
summ¬y
>

208 
Wh’
 
­¶›d
 
to
 sigÃd 
š‹g”
-
ba£d
 
	`d©a
 (
šşudšg
 
Decim®
), 
this


209 
šdiÿ‹s
 
th©
 
a
 
fixed
 
amouÁ
 
of
 
¥aû
 
wl
 
be
 
u£d
.

210 </
summ¬y
>

211 </
memb”
>

212 <
memb”
 
Çme
="F:ProtoBuf.DataFormat.Group">

213 <
summ¬y
>

214 
Wh’
 
­¶›d
 
to
 
a
 
sub
-
mes§ge
, 
šdiÿ‹s
 
th©
 
the
 
v®ue
 
should
 
be
 
Œ—‹d


215 
as
 
group
-
d–im™ed
.

216 </
summ¬y
>

217 </
memb”
>

218 <
memb”
 
Çme
="T:ProtoBuf.Extensible">

219 <
summ¬y
>

220 
Sim¶e
 
ba£
 
şass
 
suµÜtšg
 
uÃx³ùed
 
f›lds
 
®lowšg


221 
loss
-
Ëss
 
round
-
ts
/
m”ge
, 
ev’
 
the
 
d©a
 
is
 
nÙ
 
und”¡od
.

222 
The
 
add™iÚ®
 
f›lds
 
	$¬e
 (
by
 è
¡Üed
 
š
-
memÜy
 iÀ
a
 
bufãr
.

223 </
summ¬y
>

224 <
»m¬ks
>
As
 
ª
 
exam¶e
 
of
‡À
®‹º©ive
 
im¶em’tiÚ
, 
you
 
might


225 
choo£
 
to
 
u£
 
the
 
fe
 
	$sy¡em
 (
‹mpÜ¬y
 
fes
è
as
 
the
 
back
-
’d
, 
Œackšg


226 
Úly
 
the
 
·ths
 [
such
 
ª
 
objeù
 
would
 
id—Îy
 
be
 
IDi¥o§bË
 
ªd
 
u£


227 
a
 
fš®iz”
 
to
 
’su»
 
th©
 
the
 
fes
 
¬e
 
»moved
].</
»m¬ks
>

228 <
£—lso
 
üef
="T:ProtoBuf.IExtensible"/>

229 </
memb”
>

230 <
memb”
 
Çme
="T:ProtoBuf.IExtensible">

231 <
summ¬y
>

232 
Indiÿ‹s
 
th©
 
the
 
im¶em’tšg
 
ty³
 
has
 
suµÜt
 
´ÙocŞ
-
bufãr


233 <
£e
 
üef
="T:PrÙoBuf.IEx‹nsiÚ">
ex‹nsiÚs
</see>.

234 </
summ¬y
>

235 <
»m¬ks
>
Cª
 
be
 
im¶em’‹d
 
by
 
d”ivšg
 
äom
 
Ex‹nsibË
.</remarks>

236 </
memb”
>

237 <
memb”
 
Çme
="M:ProtoBuf.IExtensible.GetExtensionObject(System.Boolean)">

238 <
summ¬y
>

239 
R‘r›ves
 
the
 <
£e
 
üef
="T:PrÙoBuf.IEx‹nsiÚ">
ex‹nsiÚ
</£e> 
objeù
 th
cu¼’t


240 
š¡ªû
, 
İtiÚ®ly
 
ü—tšg
 
™
 ™ 
dÛs
 
nÙ
 
®»ady
 
exi¡
.

241 </
summ¬y
>

242 <
·¿m
 
Çme
="ü—‹IfMissšg">
Should
 
a
 
Ãw
 
ex‹nsiÚ
 
objeù
 
be


243 
ü—‹d
 
™
 
dÛs
 
nÙ
 
®»ady
 
exi¡
?</
·¿m
>

244 <
»tuºs
>
The
 
ex‹nsiÚ
 
objeù
 
™
 
	`exi¡s
 (
Ü
 
was
 
ü—‹d
), o¸
nuÎ


245 
the
 
ex‹nsiÚ
 
objeù
 
dÛs
 
nÙ
 
exi¡
 
Ü
 
is
‚Ù 
avaabË
.</
»tuºs
>

246 <
»m¬ks
>
The
 <
c
>
ü—‹IfMissšg
</c> 
¬gum’t
 
is
 
çl£
 
duršg
 
£rŸliz©iÚ
,

247 
ªd
 
Œue
 
duršg
 
de£rŸliz©iÚ
 
upÚ
 
’couÁ”šg
 
uÃx³ùed
 
f›lds
.</
»m¬ks
>

248 </
memb”
>

249 <
memb”
 
Çme
="M:ProtoBuf.Extensible.GetExtensionObject(System.Boolean)">

250 <
summ¬y
>

251 
R‘r›ves
 
the
 <
£e
 
üef
="T:PrÙoBuf.IEx‹nsiÚ">
ex‹nsiÚ
</£e> 
objeù
 th
cu¼’t


252 
š¡ªû
, 
İtiÚ®ly
 
ü—tšg
 
™
 ™ 
dÛs
 
nÙ
 
®»ady
 
exi¡
.

253 </
summ¬y
>

254 <
·¿m
 
Çme
="ü—‹IfMissšg">
Should
 
a
 
Ãw
 
ex‹nsiÚ
 
objeù
 
be


255 
ü—‹d
 
™
 
dÛs
 
nÙ
 
®»ady
 
exi¡
?</
·¿m
>

256 <
»tuºs
>
The
 
ex‹nsiÚ
 
objeù
 
™
 
	`exi¡s
 (
Ü
 
was
 
ü—‹d
), o¸
nuÎ


257 
the
 
ex‹nsiÚ
 
objeù
 
dÛs
 
nÙ
 
exi¡
 
Ü
 
is
‚Ù 
avaabË
.</
»tuºs
>

258 <
»m¬ks
>
The
 <
c
>
ü—‹IfMissšg
</c> 
¬gum’t
 
is
 
çl£
 
duršg
 
£rŸliz©iÚ
,

259 
ªd
 
Œue
 
duršg
 
de£rŸliz©iÚ
 
upÚ
 
’couÁ”šg
 
uÃx³ùed
 
f›lds
.</
»m¬ks
>

260 </
memb”
>

261 <
memb”
 
Çme
="M:ProtoBuf.Extensible.GetExtensionObject(ProtoBuf.IExtension@,System.Boolean)">

262 <
summ¬y
>

263 
Provides
 
a
 
sim¶e
,  
im¶em’tiÚ
 <
£e
 
üef
="T:PrÙoBuf.IEx‹nsiÚ">
ex‹nsiÚ
</£e> 
suµÜt
,

264 
İtiÚ®ly
 
ü—tšg
 
™
 ™ 
dÛs
 
nÙ
 
®»ady
 
exi¡
. 
DesigÃd
 
to
 
be
 
ÿÎed
 
by


265 
şas£s
 
im¶em’tšg
 <
£e
 
üef
="T:ProtoBuf.IExtensible"/>.

266 </
summ¬y
>

267 <
·¿m
 
Çme
="ü—‹IfMissšg">
Should
 
a
 
Ãw
 
ex‹nsiÚ
 
objeù
 
be


268 
ü—‹d
 
™
 
dÛs
 
nÙ
 
®»ady
 
exi¡
?</
·¿m
>

269 <
·¿m
 
Çme
="ex‹nsiÚObjeù">
The
 
ex‹nsiÚ
 
f›ld
 
to
 
	`check
 (
ªd
 
possibly
 
upd©e
).</param>

270 <
»tuºs
>
The
 
ex‹nsiÚ
 
objeù
 
™
 
	`exi¡s
 (
Ü
 
was
 
ü—‹d
), o¸
nuÎ


271 
the
 
ex‹nsiÚ
 
objeù
 
dÛs
 
nÙ
 
exi¡
 
Ü
 
is
‚Ù 
avaabË
.</
»tuºs
>

272 <
»m¬ks
>
The
 <
c
>
ü—‹IfMissšg
</c> 
¬gum’t
 
is
 
çl£
 
duršg
 
£rŸliz©iÚ
,

273 
ªd
 
Œue
 
duršg
 
de£rŸliz©iÚ
 
upÚ
 
’couÁ”šg
 
uÃx³ùed
 
f›lds
.</
»m¬ks
>

274 </
memb”
>

275 <
memb”
 
Çme
="M:ProtoBuf.Extensible.AppendValue``1(ProtoBuf.IExtensible,System.Int32,``0)">

276 <
summ¬y
>

277 
Aµ’ds
 
the
 
v®ue
 
as
 
ª
 
	$add™iÚ®
 (
uÃx³ùed
è
d©a
-
f›ld
 
the
 
š¡ªû
.

278 
NÙe
 
th©
 
nÚ
-
»³©ed
 
sub
-
objeùs
, 
this
 
equ©es
 
to
 
a
 
m”ge
 
İ”©iÚ
;

279 
»³©ed
 
sub
-
objeùs
 
this
 
adds
 
a
 
Ãw
 
š¡ªû
 
to
 
the
 
£t
; 
sim¶e


280 
v®ues
 
the
 
Ãw
 
v®ue
 
su³rûdes
h
Şd
 value.

281 </
summ¬y
>

282 <
»m¬ks
>
NÙe
 
th©
 
­³ndšg
 
a
 
v®ue
 
dÛs
 
nÙ
 
»move
 
the
 
Şd
 v®u
äom


283 
the
 
¡»am
; 
avoid
 
»³©edly
 
­³ndšg
 
v®ues
 th
§me
 
f›ld
.</
»m¬ks
>

284 <
ty³·¿m
 
Çme
="TV®ue">
The
 
ty³
 
of
 
the
 
v®ue
 
to
 
­³nd
.</typeparam>

285 <
·¿m
 
Çme
="š¡ªû">
The
 
ex‹nsibË
 
objeù
 
to
 
­³nd
 
the
 
v®ue
o.</param>

286 <
·¿m
 
Çme
="g">
The
 
f›ld
 
id’tif›r
; 
the
 
g
 
should
 
nÙ
 
be
 
defšed
 
as
 
a
 
known
 
d©a
-f›ld th
š¡ªû
.</param>

287 <
·¿m
 
Çme
="v®ue">
The
 
v®ue
 
to
 
­³nd
.</param>

288 </
memb”
>

289 <
memb”
 
Çme
="M:ProtoBuf.Extensible.AppendValue``1(ProtoBuf.IExtensible,System.Int32,ProtoBuf.DataFormat,``0)">

290 <
summ¬y
>

291 
Aµ’ds
 
the
 
v®ue
 
as
 
ª
 
	$add™iÚ®
 (
uÃx³ùed
è
d©a
-
f›ld
 
the
 
š¡ªû
.

292 
NÙe
 
th©
 
nÚ
-
»³©ed
 
sub
-
objeùs
, 
this
 
equ©es
 
to
 
a
 
m”ge
 
İ”©iÚ
;

293 
»³©ed
 
sub
-
objeùs
 
this
 
adds
 
a
 
Ãw
 
š¡ªû
 
to
 
the
 
£t
; 
sim¶e


294 
v®ues
 
the
 
Ãw
 
v®ue
 
su³rûdes
h
Şd
 value.

295 </
summ¬y
>

296 <
»m¬ks
>
NÙe
 
th©
 
­³ndšg
 
a
 
v®ue
 
dÛs
 
nÙ
 
»move
 
the
 
Şd
 v®u
äom


297 
the
 
¡»am
; 
avoid
 
»³©edly
 
­³ndšg
 
v®ues
 th
§me
 
f›ld
.</
»m¬ks
>

298 <
ty³·¿m
 
Çme
="TV®ue">
The
 
d©a
-
ty³
 
of
 
the
 
f›ld
.</typeparam>

299 <
·¿m
 
Çme
="fÜm©">
The
 
d©a
-
fÜm©
 
to
 
u£
 
wh’
 
’codšg
 
the
 
v®ue
.</param>

300 <
·¿m
 
Çme
="š¡ªû">
The
 
ex‹nsibË
 
objeù
 
to
 
­³nd
 
the
 
v®ue
o.</param>

301 <
·¿m
 
Çme
="g">
The
 
f›ld
 
id’tif›r
; 
the
 
g
 
should
 
nÙ
 
be
 
defšed
 
as
 
a
 
known
 
d©a
-f›ld th
š¡ªû
.</param>

302 <
·¿m
 
Çme
="v®ue">
The
 
v®ue
 
to
 
­³nd
.</param>

303 </
memb”
>

304 <
memb”
 
Çme
="M:ProtoBuf.Extensible.GetValue``1(ProtoBuf.IExtensible,System.Int32)">

305 <
summ¬y
>

306 
Qu”›s
 
ª
 
ex‹nsibË
 
objeù
 ª 
	$add™iÚ®
 (
uÃx³ùed
è
d©a
-
f›ld
 
the
 
š¡ªû
.

307 
The
 
v®ue
 
»tuºed
 
is
 
the
 
compo£d
 v®u
aá”
 
m”gšg
 
ªy
 
du¶iÿ‹d
 
cÚ‹Á
; the

308 
v®ue
 
is
 "»³©ed" (
a
 
li¡
), 
th’
 
u£
 
G‘V®ues
 
š¡—d
.

309 </
summ¬y
>

310 <
ty³·¿m
 
Çme
="TV®ue">
The
 
d©a
-
ty³
 
of
 
the
 
f›ld
.</typeparam>

311 <
·¿m
 
Çme
="š¡ªû">
The
 
ex‹nsibË
 
objeù
 
to
 
obš
 
the
 
v®ue
 
äom
.</param>

312 <
·¿m
 
Çme
="g">
The
 
f›ld
 
id’tif›r
; 
the
 
g
 
should
 
nÙ
 
be
 
defšed
 
as
 
a
 
known
 
d©a
-f›ld th
š¡ªû
.</param>

313 <
»tuºs
>
The
 
efãùive
 
v®ue
 
of
 
the
 
f›ld
, 
Ü
h v®u
nÙ
 
found
.</returns>

314 </
memb”
>

315 <
memb”
 
Çme
="M:ProtoBuf.Extensible.GetValue``1(ProtoBuf.IExtensible,System.Int32,ProtoBuf.DataFormat)">

316 <
summ¬y
>

317 
Qu”›s
 
ª
 
ex‹nsibË
 
objeù
 ª 
	$add™iÚ®
 (
uÃx³ùed
è
d©a
-
f›ld
 
the
 
š¡ªû
.

318 
The
 
v®ue
 
»tuºed
 
is
 
the
 
compo£d
 v®u
aá”
 
m”gšg
 
ªy
 
du¶iÿ‹d
 
cÚ‹Á
; the

319 
v®ue
 
is
 "»³©ed" (
a
 
li¡
), 
th’
 
u£
 
G‘V®ues
 
š¡—d
.

320 </
summ¬y
>

321 <
ty³·¿m
 
Çme
="TV®ue">
The
 
d©a
-
ty³
 
of
 
the
 
f›ld
.</typeparam>

322 <
·¿m
 
Çme
="š¡ªû">
The
 
ex‹nsibË
 
objeù
 
to
 
obš
 
the
 
v®ue
 
äom
.</param>

323 <
·¿m
 
Çme
="g">
The
 
f›ld
 
id’tif›r
; 
the
 
g
 
should
 
nÙ
 
be
 
defšed
 
as
 
a
 
known
 
d©a
-f›ld th
š¡ªû
.</param>

324 <
·¿m
 
Çme
="fÜm©">
The
 
d©a
-
fÜm©
 
to
 
u£
 
wh’
 
decodšg
 
the
 
v®ue
.</param>

325 <
»tuºs
>
The
 
efãùive
 
v®ue
 
of
 
the
 
f›ld
, 
Ü
h v®u
nÙ
 
found
.</returns>

326 </
memb”
>

327 <
memb”
 
Çme
="M:ProtoBuf.Extensible.TryGetValue``1(ProtoBuf.IExtensible,System.Int32,``0@)">

328 <
summ¬y
>

329 
Qu”›s
 
ª
 
ex‹nsibË
 
objeù
 ª 
	$add™iÚ®
 (
uÃx³ùed
è
d©a
-
f›ld
 
the
 
š¡ªû
.

330 
The
 
v®ue
 
	`»tuºed
 (
š
 "v®ue"è
is
 
the
 
compo£d
 v®u
aá”
 
m”gšg
 
ªy
 
du¶iÿ‹d
 
cÚ‹Á
;

331 
the
 
v®ue
 
is
 "»³©ed" (
a
 
li¡
), 
th’
 
u£
 
G‘V®ues
 
š¡—d
.

332 </
summ¬y
>

333 <
ty³·¿m
 
Çme
="TV®ue">
The
 
d©a
-
ty³
 
of
 
the
 
f›ld
.</typeparam>

334 <
·¿m
 
Çme
="v®ue">
The
 
efãùive
 
v®ue
 
of
 
the
 
f›ld
, 
Ü
h v®u
nÙ
 
found
.</param>

335 <
·¿m
 
Çme
="š¡ªû">
The
 
ex‹nsibË
 
objeù
 
to
 
obš
 
the
 
v®ue
 
äom
.</param>

336 <
·¿m
 
Çme
="g">
The
 
f›ld
 
id’tif›r
; 
the
 
g
 
should
 
nÙ
 
be
 
defšed
 
as
 
a
 
known
 
d©a
-f›ld th
š¡ªû
.</param>

337 <
»tuºs
>
True
 
d©a
 
the
 
f›ld
 
was
 
´e£Á
, 
çl£
 
Ùh”wi£
.</returns>

338 </
memb”
>

339 <
memb”
 
Çme
="M:ProtoBuf.Extensible.TryGetValue``1(ProtoBuf.IExtensible,System.Int32,ProtoBuf.DataFormat,``0@)">

340 <
summ¬y
>

341 
Qu”›s
 
ª
 
ex‹nsibË
 
objeù
 ª 
	$add™iÚ®
 (
uÃx³ùed
è
d©a
-
f›ld
 
the
 
š¡ªû
.

342 
The
 
v®ue
 
	`»tuºed
 (
š
 "v®ue"è
is
 
the
 
compo£d
 v®u
aá”
 
m”gšg
 
ªy
 
du¶iÿ‹d
 
cÚ‹Á
;

343 
the
 
v®ue
 
is
 "»³©ed" (
a
 
li¡
), 
th’
 
u£
 
G‘V®ues
 
š¡—d
.

344 </
summ¬y
>

345 <
ty³·¿m
 
Çme
="TV®ue">
The
 
d©a
-
ty³
 
of
 
the
 
f›ld
.</typeparam>

346 <
·¿m
 
Çme
="v®ue">
The
 
efãùive
 
v®ue
 
of
 
the
 
f›ld
, 
Ü
h v®u
nÙ
 
found
.</param>

347 <
·¿m
 
Çme
="š¡ªû">
The
 
ex‹nsibË
 
objeù
 
to
 
obš
 
the
 
v®ue
 
äom
.</param>

348 <
·¿m
 
Çme
="g">
The
 
f›ld
 
id’tif›r
; 
the
 
g
 
should
 
nÙ
 
be
 
defšed
 
as
 
a
 
known
 
d©a
-f›ld th
š¡ªû
.</param>

349 <
·¿m
 
Çme
="fÜm©">
The
 
d©a
-
fÜm©
 
to
 
u£
 
wh’
 
decodšg
 
the
 
v®ue
.</param>

350 <
»tuºs
>
True
 
d©a
 
the
 
f›ld
 
was
 
´e£Á
, 
çl£
 
Ùh”wi£
.</returns>

351 </
memb”
>

352 <
memb”
 
Çme
="M:ProtoBuf.Extensible.TryGetValue``1(ProtoBuf.IExtensible,System.Int32,ProtoBuf.DataFormat,System.Boolean,``0@)">

353 <
summ¬y
>

354 
Qu”›s
 
ª
 
ex‹nsibË
 
objeù
 ª 
	$add™iÚ®
 (
uÃx³ùed
è
d©a
-
f›ld
 
the
 
š¡ªû
.

355 
The
 
v®ue
 
	`»tuºed
 (
š
 "v®ue"è
is
 
the
 
compo£d
 v®u
aá”
 
m”gšg
 
ªy
 
du¶iÿ‹d
 
cÚ‹Á
;

356 
the
 
v®ue
 
is
 "»³©ed" (
a
 
li¡
), 
th’
 
u£
 
G‘V®ues
 
š¡—d
.

357 </
summ¬y
>

358 <
ty³·¿m
 
Çme
="TV®ue">
The
 
d©a
-
ty³
 
of
 
the
 
f›ld
.</typeparam>

359 <
·¿m
 
Çme
="v®ue">
The
 
efãùive
 
v®ue
 
of
 
the
 
f›ld
, 
Ü
h v®u
nÙ
 
found
.</param>

360 <
·¿m
 
Çme
="š¡ªû">
The
 
ex‹nsibË
 
objeù
 
to
 
obš
 
the
 
v®ue
 
äom
.</param>

361 <
·¿m
 
Çme
="g">
The
 
f›ld
 
id’tif›r
; 
the
 
g
 
should
 
nÙ
 
be
 
defšed
 
as
 
a
 
known
 
d©a
-f›ld th
š¡ªû
.</param>

362 <
·¿m
 
Çme
="fÜm©">
The
 
d©a
-
fÜm©
 
to
 
u£
 
wh’
 
decodšg
 
the
 
v®ue
.</param>

363 <
·¿m
 
Çme
="®lowDefšedTag">
AÎow
 
gs
 
th©
 
¬e
 
´e£Á
 
as
 
·¹
 
of
 
the
 
defš™iÚ
; 
exam¶e
, 
to
 
qu”y
 
unknown
 
v®ues
.</param>

364 <
»tuºs
>
True
 
d©a
 
the
 
f›ld
 
was
 
´e£Á
, 
çl£
 
Ùh”wi£
.</returns>

365 </
memb”
>

366 <
memb”
 
Çme
="M:ProtoBuf.Extensible.GetValues``1(ProtoBuf.IExtensible,System.Int32)">

367 <
summ¬y
>

368 
Qu”›s
 
ª
 
ex‹nsibË
 
objeù
 ª 
	$add™iÚ®
 (
uÃx³ùed
è
d©a
-
f›ld
 
the
 
š¡ªû
.

369 
Each
 
occu¼’û
 
of
 
the
 
f›ld
 
is
 
y›lded
 
£·¿‹ly
, 
makšg
 
this
 
u§ge
 
su™abË
 "repeated"

370 (
li¡
è
f›lds
.

371 </
summ¬y
>

372 <
»m¬ks
>
The
 
ex‹nded
 
d©a
 
is
 
´oûs£d
 
Ïzy
 
as
 
the
 
’um”©Ü
 i 
™”©ed
.</remarks>

373 <
ty³·¿m
 
Çme
="TV®ue">
The
 
d©a
-
ty³
 
of
 
the
 
f›ld
.</typeparam>

374 <
·¿m
 
Çme
="š¡ªû">
The
 
ex‹nsibË
 
objeù
 
to
 
obš
 
the
 
v®ue
 
äom
.</param>

375 <
·¿m
 
Çme
="g">
The
 
f›ld
 
id’tif›r
; 
the
 
g
 
should
 
nÙ
 
be
 
defšed
 
as
 
a
 
known
 
d©a
-f›ld th
š¡ªû
.</param>

376 <
»tuºs
>
An
 
’um”©Ü
 
th©
 
y›lds
 
—ch
 
occu¼’û
 
of
 
the
 
f›ld
.</returns>

377 </
memb”
>

378 <
memb”
 
Çme
="M:ProtoBuf.Extensible.GetValues``1(ProtoBuf.IExtensible,System.Int32,ProtoBuf.DataFormat)">

379 <
summ¬y
>

380 
Qu”›s
 
ª
 
ex‹nsibË
 
objeù
 ª 
	$add™iÚ®
 (
uÃx³ùed
è
d©a
-
f›ld
 
the
 
š¡ªû
.

381 
Each
 
occu¼’û
 
of
 
the
 
f›ld
 
is
 
y›lded
 
£·¿‹ly
, 
makšg
 
this
 
u§ge
 
su™abË
 "repeated"

382 (
li¡
è
f›lds
.

383 </
summ¬y
>

384 <
»m¬ks
>
The
 
ex‹nded
 
d©a
 
is
 
´oûs£d
 
Ïzy
 
as
 
the
 
’um”©Ü
 i 
™”©ed
.</remarks>

385 <
ty³·¿m
 
Çme
="TV®ue">
The
 
d©a
-
ty³
 
of
 
the
 
f›ld
.</typeparam>

386 <
·¿m
 
Çme
="š¡ªû">
The
 
ex‹nsibË
 
objeù
 
to
 
obš
 
the
 
v®ue
 
äom
.</param>

387 <
·¿m
 
Çme
="g">
The
 
f›ld
 
id’tif›r
; 
the
 
g
 
should
 
nÙ
 
be
 
defšed
 
as
 
a
 
known
 
d©a
-f›ld th
š¡ªû
.</param>

388 <
·¿m
 
Çme
="fÜm©">
The
 
d©a
-
fÜm©
 
to
 
u£
 
wh’
 
decodšg
 
the
 
v®ue
.</param>

389 <
»tuºs
>
An
 
’um”©Ü
 
th©
 
y›lds
 
—ch
 
occu¼’û
 
of
 
the
 
f›ld
.</returns>

390 </
memb”
>

391 <
memb”
 
Çme
="M:ProtoBuf.Extensible.TryGetValue(ProtoBuf.Meta.TypeModel,System.Type,ProtoBuf.IExtensible,System.Int32,ProtoBuf.DataFormat,System.Boolean,System.Object@)">

392 <
summ¬y
>

393 
Qu”›s
 
ª
 
ex‹nsibË
 
objeù
 ª 
	$add™iÚ®
 (
uÃx³ùed
è
d©a
-
f›ld
 
the
 
š¡ªû
.

394 
The
 
v®ue
 
	`»tuºed
 (
š
 "v®ue"è
is
 
the
 
compo£d
 v®u
aá”
 
m”gšg
 
ªy
 
du¶iÿ‹d
 
cÚ‹Á
;

395 
the
 
v®ue
 
is
 "»³©ed" (
a
 
li¡
), 
th’
 
u£
 
G‘V®ues
 
š¡—d
.

396 </
summ¬y
>

397 <
·¿m
 
Çme
="ty³">
The
 
d©a
-
ty³
 
of
 
the
 
f›ld
.</param>

398 <
·¿m
 
Çme
="mod–">
The
 
mod–
 
to
 
u£
 
cÚfigu¿tiÚ
.</param>

399 <
·¿m
 
Çme
="v®ue">
The
 
efãùive
 
v®ue
 
of
 
the
 
f›ld
, 
Ü
h v®u
nÙ
 
found
.</param>

400 <
·¿m
 
Çme
="š¡ªû">
The
 
ex‹nsibË
 
objeù
 
to
 
obš
 
the
 
v®ue
 
äom
.</param>

401 <
·¿m
 
Çme
="g">
The
 
f›ld
 
id’tif›r
; 
the
 
g
 
should
 
nÙ
 
be
 
defšed
 
as
 
a
 
known
 
d©a
-f›ld th
š¡ªû
.</param>

402 <
·¿m
 
Çme
="fÜm©">
The
 
d©a
-
fÜm©
 
to
 
u£
 
wh’
 
decodšg
 
the
 
v®ue
.</param>

403 <
·¿m
 
Çme
="®lowDefšedTag">
AÎow
 
gs
 
th©
 
¬e
 
´e£Á
 
as
 
·¹
 
of
 
the
 
defš™iÚ
; 
exam¶e
, 
to
 
qu”y
 
unknown
 
v®ues
.</param>

404 <
»tuºs
>
True
 
d©a
 
the
 
f›ld
 
was
 
´e£Á
, 
çl£
 
Ùh”wi£
.</returns>

405 </
memb”
>

406 <
memb”
 
Çme
="M:ProtoBuf.Extensible.GetValues(ProtoBuf.Meta.TypeModel,System.Type,ProtoBuf.IExtensible,System.Int32,ProtoBuf.DataFormat)">

407 <
summ¬y
>

408 
Qu”›s
 
ª
 
ex‹nsibË
 
objeù
 ª 
	$add™iÚ®
 (
uÃx³ùed
è
d©a
-
f›ld
 
the
 
š¡ªû
.

409 
Each
 
occu¼’û
 
of
 
the
 
f›ld
 
is
 
y›lded
 
£·¿‹ly
, 
makšg
 
this
 
u§ge
 
su™abË
 "repeated"

410 (
li¡
è
f›lds
.

411 </
summ¬y
>

412 <
»m¬ks
>
The
 
ex‹nded
 
d©a
 
is
 
´oûs£d
 
Ïzy
 
as
 
the
 
’um”©Ü
 i 
™”©ed
.</remarks>

413 <
·¿m
 
Çme
="mod–">
The
 
mod–
 
to
 
u£
 
cÚfigu¿tiÚ
.</param>

414 <
·¿m
 
Çme
="ty³">
The
 
d©a
-
ty³
 
of
 
the
 
f›ld
.</param>

415 <
·¿m
 
Çme
="š¡ªû">
The
 
ex‹nsibË
 
objeù
 
to
 
obš
 
the
 
v®ue
 
äom
.</param>

416 <
·¿m
 
Çme
="g">
The
 
f›ld
 
id’tif›r
; 
the
 
g
 
should
 
nÙ
 
be
 
defšed
 
as
 
a
 
known
 
d©a
-f›ld th
š¡ªû
.</param>

417 <
·¿m
 
Çme
="fÜm©">
The
 
d©a
-
fÜm©
 
to
 
u£
 
wh’
 
decodšg
 
the
 
v®ue
.</param>

418 <
»tuºs
>
An
 
’um”©Ü
 
th©
 
y›lds
 
—ch
 
occu¼’û
 
of
 
the
 
f›ld
.</returns>

419 </
memb”
>

420 <
memb”
 
Çme
="M:ProtoBuf.Extensible.AppendValue(ProtoBuf.Meta.TypeModel,ProtoBuf.IExtensible,System.Int32,ProtoBuf.DataFormat,System.Object)">

421 <
summ¬y
>

422 
Aµ’ds
 
the
 
v®ue
 
as
 
ª
 
	$add™iÚ®
 (
uÃx³ùed
è
d©a
-
f›ld
 
the
 
š¡ªû
.

423 
NÙe
 
th©
 
nÚ
-
»³©ed
 
sub
-
objeùs
, 
this
 
equ©es
 
to
 
a
 
m”ge
 
İ”©iÚ
;

424 
»³©ed
 
sub
-
objeùs
 
this
 
adds
 
a
 
Ãw
 
š¡ªû
 
to
 
the
 
£t
; 
sim¶e


425 
v®ues
 
the
 
Ãw
 
v®ue
 
su³rûdes
h
Şd
 value.

426 </
summ¬y
>

427 <
»m¬ks
>
NÙe
 
th©
 
­³ndšg
 
a
 
v®ue
 
dÛs
 
nÙ
 
»move
 
the
 
Şd
 v®u
äom


428 
the
 
¡»am
; 
avoid
 
»³©edly
 
­³ndšg
 
v®ues
 th
§me
 
f›ld
.</
»m¬ks
>

429 <
·¿m
 
Çme
="mod–">
The
 
mod–
 
to
 
u£
 
cÚfigu¿tiÚ
.</param>

430 <
·¿m
 
Çme
="fÜm©">
The
 
d©a
-
fÜm©
 
to
 
u£
 
wh’
 
’codšg
 
the
 
v®ue
.</param>

431 <
·¿m
 
Çme
="š¡ªû">
The
 
ex‹nsibË
 
objeù
 
to
 
­³nd
 
the
 
v®ue
o.</param>

432 <
·¿m
 
Çme
="g">
The
 
f›ld
 
id’tif›r
; 
the
 
g
 
should
 
nÙ
 
be
 
defšed
 
as
 
a
 
known
 
d©a
-f›ld th
š¡ªû
.</param>

433 <
·¿m
 
Çme
="v®ue">
The
 
v®ue
 
to
 
­³nd
.</param>

434 </
memb”
>

435 <
memb”
 
Çme
="T:ProtoBuf.ExtensibleUtil">

436 <
summ¬y
>

437 
This
 
şass
 
aùs
 
as
 
ª
 
š‹º®
 
w¿µ”
 
®lowšg
 
us
 
to
 dØ
a
 
dyÇmic


438 
m‘hodšfo
 
švoke
; 
ª
'ˆpuˆštØS”Ÿliz”‡ dÚ'
t
 
wªt
 
Ú
 
public


439 
API
; 
ÿn
't…ut into Serializer&lt;T&gt; since we‚eedo invoke

440 
acüoss
 
şas£s
, 
which
 
i¢
't‡llowed in Silverlight)

441 </
summ¬y
>

442 </
memb”
>

443 <
memb”
 
Çme
="M:ProtoBuf.ExtensibleUtil.GetExtendedValues``1(ProtoBuf.IExtensible,System.Int32,ProtoBuf.DataFormat,System.Boolean,System.Boolean)">

444 <
summ¬y
>

445 
AÎ
 
this
 
dÛs
 
is
 
ÿÎ
 
G‘Ex‹ndedV®uesTy³d
 
w™h
 
the
 
cÜ»ù
 
ty³
 "instance";

446 
this
 
’su»s
 
th©
 
we
 
dÚ
't get issues with subclasses declaring conflictingypes -

447 
the
 
ÿÎ”
 
mu¡
 
»¥eù
h
f›lds
 
defšed
 th
ty³
 
they
 
·ss
 
š
.

448 </
summ¬y
>

449 </
memb”
>

450 <
memb”
 
Çme
="M:ProtoBuf.ExtensibleUtil.GetExtendedValues(ProtoBuf.Meta.TypeModel,System.Type,ProtoBuf.IExtensible,System.Int32,ProtoBuf.DataFormat,System.Boolean,System.Boolean)">

451 <
summ¬y
>

452 
AÎ
 
this
 
dÛs
 
is
 
ÿÎ
 
G‘Ex‹ndedV®uesTy³d
 
w™h
 
the
 
cÜ»ù
 
ty³
 "instance";

453 
this
 
’su»s
 
th©
 
we
 
dÚ
't get issues with subclasses declaring conflictingypes -

454 
the
 
ÿÎ”
 
mu¡
 
»¥eù
h
f›lds
 
defšed
 th
ty³
 
they
 
·ss
 
š
.

455 </
summ¬y
>

456 </
memb”
>

457 <
memb”
 
Çme
="T:ProtoBuf.Helpers">

458 <
summ¬y
>

459 
NÙ
 
®l
 
äamewÜks
 
¬e
 
ü—‹d
 
	`equ®
 (
fx1
.1 
vs
 
fx2
.0,

460 
miüo
-
äamewÜk
, 
com·ù
-framework,

461 
sv”light
, 
‘c
). 
This
 
şass
 
sim¶y
 
w¿ps
 
up
 
a
 
ãw
 
thšgs
 
th©
 
would


462 
Ùh”wi£
 
make
 
the
 
»®
 
code
 
uÂeûs§ry
 
messy
, 
´ovidšg
 
çÎback


463 
im¶em’tiÚs
 
Ãûs§ry
.

464 </
summ¬y
>

465 </
memb”
>

466 <
memb”
 
Çme
="T:ProtoBuf.ProtoTypeCode">

467 <
summ¬y
>

468 
IÁ’ded
 
to
 
be
 
a
 
dœeù
 
m­
Ø
»guÏr
 
Ty³Code
, 
but
:

469 - 
w™h
 
missšg
 
ty³s


470 - 
exi¡šg
 
Ú
 
WšRT


471 </
summ¬y
>

472 </
memb”
>

473 <
memb”
 
Çme
="T:ProtoBuf.ImplicitFields">

474 <
summ¬y
>

475 
S³cif›s
 
the
 
m‘hod
 
u£d
 
to
 
šãr
 
f›ld
 
gs
 
memb”s
 
of
h
ty³


476 
und”
 
cÚsid”©iÚ
. 
Tags
 
¬e
 
deduûd
 
usšg
 
the
 
šv¬ŸÁ
 
®phab‘ic


477 
£qu’û
 
of
 
the
 
memb”s
'‚ames;his makes implicit fieldags very brittle,

478 
ªd
 
susû±ibË
 
to
 
chªges
 
such
 
as
 
f›ld
 
	`Çmes
 (
nÜm®ly
 
ª
 
isŞ©ed


479 
chªge
).

480 </
summ¬y
>

481 </
memb”
>

482 <
memb”
 
Çme
="F:ProtoBuf.ImplicitFields.None">

483 <
summ¬y
>

484 
No
 
memb”s
 
¬e
 
£rŸlized
 
im¶ic™ly
; 
®l
 memb” 
»quœe
 
a
 
su™abË


485 
©Œibu‹
 
such
 
as
 [
PrÙoMemb”
]. 
This
 
is
 
the
 
»cmom’ded
 
mode
 

486 
mo¡
 
sûÇrios
.

487 </
summ¬y
>

488 </
memb”
>

489 <
memb”
 
Çme
="F:ProtoBuf.ImplicitFields.AllPublic">

490 <
summ¬y
>

491 
Public
 
´İ”t›s
 
ªd
 
f›lds
 
¬e
 
–igibË
 
im¶ic™
 
£rŸliz©iÚ
;

492 
this
 
Œ—ts
 
the
 
public
 
API
 
as
 
a
 
cÚŒaù
. 
Ord”šg
 
bešgs
 
äom
 
Im¶ic™Fœ¡Tag
.

493 </
summ¬y
>

494 </
memb”
>

495 <
memb”
 
Çme
="F:ProtoBuf.ImplicitFields.AllFields">

496 <
summ¬y
>

497 
Public
 
ªd
 
nÚ
-
public
 
f›lds
 
¬e
 
–igibË
 
im¶ic™
 
£rŸliz©iÚ
;

498 
this
 
aùs
 
as
 
a
 
¡©e
/
im¶em’tiÚ
 
£rŸliz”
. 
Ord”šg
 
bešgs
 
äom
 
Im¶ic™Fœ¡Tag
.

499 </
summ¬y
>

500 </
memb”
>

501 <
memb”
 
Çme
="T:ProtoBuf.Meta.CallbackSet">

502 <
summ¬y
>

503 
R•»£Ás
 
the
 
£t
 
of
 
£rŸliz©iÚ
 
ÿÎbacks
 
to
 
be
 
u£d
 
wh’
 
£rŸlizšg
/
de£rŸlizšg
 
a
 
ty³
.

504 </
summ¬y
>

505 </
memb”
>

506 <
memb”
 
Çme
="P:ProtoBuf.Meta.CallbackSet.BeforeSerialize">

507 <
summ¬y
>
C®Ëd
 
befÜe
 
£rŸlizšg
 
ª
 
š¡ªû
</summary>

508 </
memb”
>

509 <
memb”
 
Çme
="P:ProtoBuf.Meta.CallbackSet.BeforeDeserialize">

510 <
summ¬y
>
C®Ëd
 
befÜe
 
de£rŸlizšg
 
ª
 
š¡ªû
</summary>

511 </
memb”
>

512 <
memb”
 
Çme
="P:ProtoBuf.Meta.CallbackSet.AfterSerialize">

513 <
summ¬y
>
C®Ëd
 
aá”
 
£rŸlizšg
 
ª
 
š¡ªû
</summary>

514 </
memb”
>

515 <
memb”
 
Çme
="P:ProtoBuf.Meta.CallbackSet.AfterDeserialize">

516 <
summ¬y
>
C®Ëd
 
aá”
 
de£rŸlizšg
 
ª
 
š¡ªû
</summary>

517 </
memb”
>

518 <
memb”
 
Çme
="P:ProtoBuf.Meta.CallbackSet.NonTrivial">

519 <
summ¬y
>

520 
True
 
ªy
 
ÿÎback
 
is
 
£t
, 
F®£


521 </
summ¬y
>

522 </
memb”
>

523 <
memb”
 
Çme
="T:ProtoBuf.Meta.MetaType">

524 <
summ¬y
>

525 
R•»£Ás
 
a
 
ty³
 
©
 
ruÁime
 
u£
 
w™h
 
´Ùobuf
, 
®lowšg
 
the
 
f›ld
 
	$m­pšgs
 (
‘c
è
to
 
be
 
defšed


526 </
summ¬y
>

527 </
memb”
>

528 <
memb”
 
Çme
="M:ProtoBuf.Meta.MetaType.ToString">

529 <
summ¬y
>

530 
G‘
 
the
 
Çme
 
of
h
ty³
 
bešg
 
»´e£Áed


531 </
summ¬y
>

532 </
memb”
>

533 <
memb”
 
Çme
="M:ProtoBuf.Meta.MetaType.AddSubType(System.Int32,System.Type)">

534 <
summ¬y
>

535 
Adds
 
a
 
known
 
sub
-
ty³
 
to
 
the
 
šh”™ªû
 
mod–


536 </
summ¬y
>

537 </
memb”
>

538 <
memb”
 
Çme
="M:ProtoBuf.Meta.MetaType.AddSubType(System.Int32,System.Type,ProtoBuf.DataFormat)">

539 <
summ¬y
>

540 
Adds
 
a
 
known
 
sub
-
ty³
 
to
 
the
 
šh”™ªû
 
mod–


541 </
summ¬y
>

542 </
memb”
>

543 <
memb”
 
Çme
="M:ProtoBuf.Meta.MetaType.SetCallbacks(System.Reflection.MethodInfo,System.Reflection.MethodInfo,System.Reflection.MethodInfo,System.Reflection.MethodInfo)">

544 <
summ¬y
>

545 
Assigns
 
the
 
ÿÎbacks
 
to
 
u£
 
duršg
 
£rŸlŸtiÚ
/
de£rŸliz©iÚ
.

546 </
summ¬y
>

547 <
·¿m
 
Çme
="befÜeS”Ÿlize">
The
 
	$m‘hod
 (
Ü
 
nuÎ
è
ÿÎed
 
befÜe
 
£rŸliz©iÚ
 
begšs
.</
·¿m
>

548 <
·¿m
 
Çme
="aá”S”Ÿlize">
The
 
	$m‘hod
 (
Ü
 
nuÎ
è
ÿÎed
 
wh’
 
£rŸliz©iÚ
 
is
 
com¶‘e
.</
·¿m
>

549 <
·¿m
 
Çme
="befÜeDe£rŸlize">
The
 
	$m‘hod
 (
Ü
 
nuÎ
è
ÿÎed
 
befÜe
 
de£rŸliz©iÚ
 
	`begšs
 (Ü 
wh’
 
a
 
Ãw
 
š¡ªû
 
is
 
ü—‹d
 
duršg
 de£rŸliz©iÚ).</
·¿m
>

550 <
·¿m
 
Çme
="aá”De£rŸlize">
The
 
	$m‘hod
 (
Ü
 
nuÎ
è
ÿÎed
 
wh’
 
de£rŸliz©iÚ
 
is
 
com¶‘e
.</
·¿m
>

551 <
»tuºs
>
The
 
£t
 
of
 
ÿÎbacks
.</returns>

552 </
memb”
>

553 <
memb”
 
Çme
="M:ProtoBuf.Meta.MetaType.SetCallbacks(System.String,System.String,System.String,System.String)">

554 <
summ¬y
>

555 
Assigns
 
the
 
ÿÎbacks
 
to
 
u£
 
duršg
 
£rŸlŸtiÚ
/
de£rŸliz©iÚ
.

556 </
summ¬y
>

557 <
·¿m
 
Çme
="befÜeS”Ÿlize">
The
‚am
of
 
the
 
	$m‘hod
 (
Ü
 
nuÎ
è
ÿÎed
 
befÜe
 
£rŸliz©iÚ
 
begšs
.</
·¿m
>

558 <
·¿m
 
Çme
="aá”S”Ÿlize">
The
‚am
of
 
the
 
	$m‘hod
 (
Ü
 
nuÎ
è
ÿÎed
 
wh’
 
£rŸliz©iÚ
 
is
 
com¶‘e
.</
·¿m
>

559 <
·¿m
 
Çme
="befÜeDe£rŸlize">
The
‚am
of
 
the
 
	$m‘hod
 (
Ü
 
nuÎ
è
ÿÎed
 
befÜe
 
de£rŸliz©iÚ
 
	`begšs
 (Ü 
wh’
 
a
 
Ãw
 
š¡ªû
 
is
 
ü—‹d
 
duršg
 de£rŸliz©iÚ).</
·¿m
>

560 <
·¿m
 
Çme
="aá”De£rŸlize">
The
‚am
of
 
the
 
	$m‘hod
 (
Ü
 
nuÎ
è
ÿÎed
 
wh’
 
de£rŸliz©iÚ
 
is
 
com¶‘e
.</
·¿m
>

561 <
»tuºs
>
The
 
£t
 
of
 
ÿÎbacks
.</returns>

562 </
memb”
>

563 <
memb”
 
Çme
="M:ProtoBuf.Meta.MetaType.SetFactory(System.Reflection.MethodInfo)">

564 <
summ¬y
>

565 
DesigÇ‹
 
a
 
çùÜy
-
m‘hod
 
to
 
u£
Ø
ü—‹
 
š¡ªûs
 
of
 
this
 
ty³


566 </
summ¬y
>

567 </
memb”
>

568 <
memb”
 
Çme
="M:ProtoBuf.Meta.MetaType.SetFactory(System.String)">

569 <
summ¬y
>

570 
DesigÇ‹
 
a
 
çùÜy
-
m‘hod
 
to
 
u£
Ø
ü—‹
 
š¡ªûs
 
of
 
this
 
ty³


571 </
summ¬y
>

572 </
memb”
>

573 <
memb”
 
Çme
="M:ProtoBuf.Meta.MetaType.ThrowIfFrozen">

574 <
summ¬y
>

575 
Throws
 
ª
 
exû±iÚ
 
the
 
ty³
 
has
 
b“n
 
made
 
immubË


576 </
summ¬y
>

577 </
memb”
>

578 <
memb”
 
Çme
="M:ProtoBuf.Meta.MetaType.Add(System.Int32,System.String)">

579 <
summ¬y
>

580 
Adds
 
a
 
	$memb”
 (
by
 
Çme
è
to
 
the
 
M‘aTy³


581 </
summ¬y
>

582 </
memb”
>

583 <
memb”
 
Çme
="M:ProtoBuf.Meta.MetaType.AddField(System.Int32,System.String)">

584 <
summ¬y
>

585 
Adds
 
a
 
	$memb”
 (
by
 
Çme
è
to
 
the
 
M‘aTy³
, 
»tuºšg
h
V®ueMemb”
 
¿th”
 
thª
h
æu’t
 
API
.

586 
This
 
is
 
Ùh”wi£
 
id’tiÿl
 
to
 
Add
.

587 </
summ¬y
>

588 </
memb”
>

589 <
memb”
 
Çme
="M:ProtoBuf.Meta.MetaType.Add(System.String)">

590 <
summ¬y
>

591 
Adds
 
a
 
	$memb”
 (
by
 
Çme
è
to
 
the
 
M‘aTy³


592 </
summ¬y
>

593 </
memb”
>

594 <
memb”
 
Çme
="M:ProtoBuf.Meta.MetaType.SetSurrogate(System.Type)">

595 <
summ¬y
>

596 
P”fÜms
 
£rŸliz©iÚ
 
of
 
this
 
ty³
 
vŸ
 
a
 
su¼og©e
; 
®l


597 
Ùh”
 
£rŸliz©iÚ
 
İtiÚs
 
¬e
 
ignÜed
 
ªd
 
hªdËd


598 
by
 
the
 
su¼og©e
's configuration.

599 </
summ¬y
>

600 </
memb”
>

601 <
memb”
 
Çme
="M:ProtoBuf.Meta.MetaType.Add(System.String[])">

602 <
summ¬y
>

603 
Adds
 
a
 
£t
 
of
 
	$memb”s
 (
by
 
Çme
è
to
 
the
 
M‘aTy³


604 </
summ¬y
>

605 </
memb”
>

606 <
memb”
 
Çme
="M:ProtoBuf.Meta.MetaType.Add(System.Int32,System.String,System.Object)">

607 <
summ¬y
>

608 
Adds
 
a
 
	$memb”
 (
by
 
Çme
è
to
 
the
 
M‘aTy³


609 </
summ¬y
>

610 </
memb”
>

611 <
memb”
 
Çme
="M:ProtoBuf.Meta.MetaType.Add(System.Int32,System.String,System.Type,System.Type)">

612 <
summ¬y
>

613 
Adds
 
a
 
	$memb”
 (
by
 
Çme
è
to
 
the
 
M‘aTy³
, 
šşudšg
 
ª
 
™emTy³
 
ªd
 
deçuÉTy³
 
»´e£Ášg
 
li¡s


614 </
summ¬y
>

615 </
memb”
>

616 <
memb”
 
Çme
="M:ProtoBuf.Meta.MetaType.AddField(System.Int32,System.String,System.Type,System.Type)">

617 <
summ¬y
>

618 
Adds
 
a
 
	$memb”
 (
by
 
Çme
è
to
 
the
 
M‘aTy³
, 
šşudšg
 
ª
 
™emTy³
 
ªd
 
deçuÉTy³
 
»´e£Ášg
 
li¡s
, 
»tuºšg
h
V®ueMemb”
 
¿th”
 
thª
h
æu’t
 
API
.

619 
This
 
is
 
Ùh”wi£
 
id’tiÿl
 
to
 
Add
.

620 </
summ¬y
>

621 </
memb”
>

622 <
memb”
 
Çme
="M:ProtoBuf.Meta.MetaType.GetFields">

623 <
summ¬y
>

624 
R‘uºs
 
the
 
V®ueMemb”
 
š¡ªûs
 
assocŸ‹d
 
w™h
 
this
 
ty³


625 </
summ¬y
>

626 </
memb”
>

627 <
memb”
 
Çme
="M:ProtoBuf.Meta.MetaType.GetSubtypes">

628 <
summ¬y
>

629 
R‘uºs
 
the
 
SubTy³
 
š¡ªûs
 
assocŸ‹d
 
w™h
 
this
 
ty³


630 </
summ¬y
>

631 </
memb”
>

632 <
memb”
 
Çme
="M:ProtoBuf.Meta.MetaType.CompileInPlace">

633 <
summ¬y
>

634 
Compes
 
the
 
£rŸliz”
 
this
 
ty³
;hi 
is
 *
nÙ
* 
a
 
fuÎ


635 
¡ªd®Úe
 
compe
, 
but
 
ÿn
 
signifiÿÁly
 
boo¡
 
³rfÜmªû


636 
®lowšg
 
add™iÚ®
 
ty³s
 
to
 
be
 
added
.

637 </
summ¬y
>

638 <
»m¬ks
>
An
 
š
-
¶aû
 
compe
 
ÿn
 
acûss
 
nÚ
-
public
 
ty³s
 / 
memb”s
</remarks>

639 </
memb”
>

640 <
memb”
 
Çme
="P:ProtoBuf.Meta.MetaType.BaseType">

641 <
summ¬y
>

642 
G‘s
 
the
 
ba£
-
ty³
 
this
ype

643 </
summ¬y
>

644 </
memb”
>

645 <
memb”
 
Çme
="P:ProtoBuf.Meta.MetaType.IncludeSerializerMethod">

646 <
summ¬y
>

647 
Wh’
 
u£d
 
to
 
compe
 
a
 
mod–
, 
should
 
public
 
£rŸliz©iÚ
/
de£rŸlz©iÚ
 
m‘hods


648 
be
 
šşuded
 
this
 
ty³
?

649 </
summ¬y
>

650 </
memb”
>

651 <
memb”
 
Çme
="P:ProtoBuf.Meta.MetaType.AsReferenceDefault">

652 <
summ¬y
>

653 
Should
 
this
 
ty³
 
be
 
Œ—‹d
 
as
 
a
 
»ã»nû
 
by
 ?

654 </
summ¬y
>

655 </
memb”
>

656 <
memb”
 
Çme
="P:ProtoBuf.Meta.MetaType.HasCallbacks">

657 <
summ¬y
>

658 
Indiÿ‹s
 
wh‘h”
 
the
 
cu¼’t
 
ty³
 
has
 
defšed
 
ÿÎbacks


659 </
summ¬y
>

660 </
memb”
>

661 <
memb”
 
Çme
="P:ProtoBuf.Meta.MetaType.HasSubtypes">

662 <
summ¬y
>

663 
Indiÿ‹s
 
wh‘h”
 
the
 
cu¼’t
 
ty³
 
has
 
defšed
 
subty³s


664 </
summ¬y
>

665 </
memb”
>

666 <
memb”
 
Çme
="P:ProtoBuf.Meta.MetaType.Callbacks">

667 <
summ¬y
>

668 
R‘uºs
 
the
 
£t
 
of
 
ÿÎbacks
 
defšed
 
this
 
ty³


669 </
summ¬y
>

670 </
memb”
>

671 <
memb”
 
Çme
="P:ProtoBuf.Meta.MetaType.Name">

672 <
summ¬y
>

673 
G‘s
 
Ü
 
£ts
 
the
 
Çme
 
of
 
this
 
cÚŒaù
.

674 </
summ¬y
>

675 </
memb”
>

676 <
memb”
 
Çme
="P:ProtoBuf.Meta.MetaType.Type">

677 <
summ¬y
>

678 
The
 
ruÁime
 
ty³
 
th©
 
the
 
m‘a
-ty³ 
»´e£Ás


679 </
summ¬y
>

680 </
memb”
>

681 <
memb”
 
Çme
="P:ProtoBuf.Meta.MetaType.UseConstructor">

682 <
summ¬y
>

683 
G‘s
 
Ü
 
£ts
 
wh‘h”
 
the
 
ty³
 
should
 
u£
 
a
 
·¿m‘”Ëss
 
	`cÚ¡ruùÜ
 (the ),

684 
Ü
 
wh‘h”
 
the
 
ty³
 
should
 
sk
h
cÚ¡ruùÜ
 
com¶‘–y
. 
This
 
İtiÚ
 
is
 
nÙ
 
suµÜ‹d


685 
Ú
 
com·ù
-
äamewÜk
.

686 </
summ¬y
>

687 </
memb”
>

688 <
memb”
 
Çme
="P:ProtoBuf.Meta.MetaType.ConstructType">

689 <
summ¬y
>

690 
The
 
cÚü‘e
 
ty³
 
to
 
ü—‹
 
wh’
 
a
 
Ãw
 
š¡ªû
 
of
 
this
y³ 
is
 
Ãeded
;hi 
may
 
be
 
u£ful
 wh’ 
d—lšg


691 
w™h
 
dyÇmic
 
´ox›s
, 
Ü
 w™h 
š‹rçû
-
ba£d
 
APIs


692 </
summ¬y
>

693 </
memb”
>

694 <
memb”
 
Çme
="P:ProtoBuf.Meta.MetaType.Item(System.Int32)">

695 <
summ¬y
>

696 
R‘uºs
 
the
 
V®ueMemb”
 
th©
 
m©chs
 
a
 
giv’
 
f›ld
 
numb”
, 
Ü
 
nuÎ
 
nÙ
 
found


697 </
summ¬y
>

698 </
memb”
>

699 <
memb”
 
Çme
="P:ProtoBuf.Meta.MetaType.Item(System.Reflection.MemberInfo)">

700 <
summ¬y
>

701 
R‘uºs
 
the
 
V®ueMemb”
 
th©
 
m©chs
 
a
 
giv’
 
	`memb”
 (
´İ”ty
/
f›ld
), 
Ü
 
nuÎ
 
nÙ
 
found


702 </
summ¬y
>

703 </
memb”
>

704 <
memb”
 
Çme
="P:ProtoBuf.Meta.MetaType.EnumPassthru">

705 <
summ¬y
>

706 
G‘s
 
Ü
 
£ts
 
a
 
v®ue
 
šdiÿtšg
 
th©
 
ª
 
should
 
be
 
Œ—‹d
 
dœeùly
 
as
‡À//
‘c
, 
¿th”


707 
thª
 
’fÜcšg
 .
´Ùo
 
ruËs
. 
This
 
is
 
u£ful
 *
š
 
·¹icul
* [
FÏgs
] 
’ums
.

708 </
summ¬y
>

709 </
memb”
>

710 <
memb”
 
Çme
="P:ProtoBuf.Meta.MetaType.IgnoreListHandling">

711 <
summ¬y
>

712 
G‘s
 
Ü
 
£ts
 
a
 
v®ue
 
šdiÿtšg
 
th©
 
this
 
ty³
 
should
 
NOT
 
be
 
Œ—‹d
 
as
‡ 
li¡
, 
ev’
 
™
 
has


713 
çmŸr
 
li¡
-
like
 
	`ch¬aù”i¡ics
 (
’um”abË
, 
add
, 
‘c
)

714 </
summ¬y
>

715 </
memb”
>

716 <
memb”
 
Çme
="T:ProtoBuf.Meta.RuntimeTypeModel">

717 <
summ¬y
>

718 
Provides
 
´Ùobuf
 
£rŸliz©iÚ
 
suµÜt
 
a
 
numb”
 
of
 
ty³s
 
th©
 
ÿn
 
be
 
defšed
 
©
 
ruÁime


719 </
summ¬y
>

720 </
memb”
>

721 <
memb”
 
Çme
="T:ProtoBuf.Meta.TypeModel">

722 <
summ¬y
>

723 
Provides
 
´Ùobuf
 
£rŸliz©iÚ
 
suµÜt
 
a
 
numb”
 
of
 
ty³s


724 </
summ¬y
>

725 </
memb”
>

726 <
memb”
 
Çme
="M:ProtoBuf.Meta.TypeModel.MapType(System.Type)">

727 <
summ¬y
>

728 
ResŞve
 
a
 
Sy¡em
.
Ty³
 
to
 
the
 
comp”
-
¥ecific
 
ty³


729 </
summ¬y
>

730 </
memb”
>

731 <
memb”
 
Çme
="M:ProtoBuf.Meta.TypeModel.MapType(System.Type,System.Boolean)">

732 <
summ¬y
>

733 
ResŞve
 
a
 
Sy¡em
.
Ty³
 
to
 
the
 
comp”
-
¥ecific
 
ty³


734 </
summ¬y
>

735 </
memb”
>

736 <
memb”
 
Çme
="M:ProtoBuf.Meta.TypeModel.TrySerializeAuxiliaryType(ProtoBuf.ProtoWriter,System.Type,ProtoBuf.DataFormat,System.Int32,System.Object,System.Boolean)">

737 <
summ¬y
>

738 
This
 
is
 
the
 
mÜe
 "com¶‘e" 
v”siÚ
 
of
 
S”Ÿlize
, 
which
 
hªdËs
 
sšgË
 
š¡ªûs
 oà
m­³d
 
ty³s
.

739 
The
 
v®ue
 
is
 
wr™‹n
 
as
 
a
 
com¶‘e
 
f›ld
, 
šşudšg
 f›ld-
h—d”
 
	`ªd
 (
sub
-
objeùs
)‡

740 
Ëngth
-
´efix


741 
In
 
add™iÚ
 
to
 
th©
, 
this
 
´ovides
 
suµÜt
 :

742 - 
basic
 
v®ues
; 
šdividu®
 / 
¡ršg
 / 
Guid
 / 
‘c


743 - 
IEnum”abË
 
£qu’ûs
 
of
 
ªy
 
ty³
 
hªdËd
 
by
 
TryS”ŸlizeAuxŸryTy³


745 </
summ¬y
>

746 </
memb”
>

747 <
memb”
 
Çme
="M:ProtoBuf.Meta.TypeModel.Serialize(System.IO.Stream,System.Object)">

748 <
summ¬y
>

749 
Wr™es
 
a
 
´ÙocŞ
-
bufãr
 
»´e£Á©iÚ
 
of
 
the
 
giv’
 
š¡ªû
 
to
h
suµl›d
 
¡»am
.

750 </
summ¬y
>

751 <
·¿m
 
Çme
="v®ue">
The
 
exi¡šg
 
š¡ªû
 
to
 
be
 
	`£rŸlized
 (
ÿÂÙ
 b
nuÎ
).</param>

752 <
·¿m
 
Çme
="de¡">
The
 
de¡š©iÚ
 
¡»am
 
to
 
wr™e
o.</param>

753 </
memb”
>

754 <
memb”
 
Çme
="M:ProtoBuf.Meta.TypeModel.Serialize(System.IO.Stream,System.Object,ProtoBuf.SerializationContext)">

755 <
summ¬y
>

756 
Wr™es
 
a
 
´ÙocŞ
-
bufãr
 
»´e£Á©iÚ
 
of
 
the
 
giv’
 
š¡ªû
 
to
h
suµl›d
 
¡»am
.

757 </
summ¬y
>

758 <
·¿m
 
Çme
="v®ue">
The
 
exi¡šg
 
š¡ªû
 
to
 
be
 
	`£rŸlized
 (
ÿÂÙ
 b
nuÎ
).</param>

759 <
·¿m
 
Çme
="de¡">
The
 
de¡š©iÚ
 
¡»am
 
to
 
wr™e
o.</param>

760 <
·¿m
 
Çme
="cÚ‹xt">
Add™iÚ®
 
šfÜm©iÚ
 
about
 
this
 
£rŸliz©iÚ
 
İ”©iÚ
.</param>

761 </
memb”
>

762 <
memb”
 
Çme
="M:ProtoBuf.Meta.TypeModel.Serialize(ProtoBuf.ProtoWriter,System.Object)">

763 <
summ¬y
>

764 
Wr™es
 
a
 
´ÙocŞ
-
bufãr
 
»´e£Á©iÚ
 
of
 
the
 
giv’
 
š¡ªû
 
to
h
suµl›d
 
wr™”
.

765 </
summ¬y
>

766 <
·¿m
 
Çme
="v®ue">
The
 
exi¡šg
 
š¡ªû
 
to
 
be
 
	`£rŸlized
 (
ÿÂÙ
 b
nuÎ
).</param>

767 <
·¿m
 
Çme
="de¡">
The
 
de¡š©iÚ
 
wr™”
 
to
 
wr™e
o.</param>

768 </
memb”
>

769 <
memb”
 
Çme
="M:ProtoBuf.Meta.TypeModel.DeserializeWithLengthPrefix(System.IO.Stream,System.Object,System.Type,ProtoBuf.PrefixStyle,System.Int32)">

770 <
summ¬y
>

771 
Aµl›s
 
a
 
´ÙocŞ
-
bufãr
 
¡»am
 
to
 
ª
 
exi¡šg
 
	`š¡ªû
 (
Ü
 
nuÎ
), 
usšg
 
Ëngth
-
´efixed


772 
d©a
 - 
u£ful
 
w™h
 
ÃtwÜk
 
IO
.

773 </
summ¬y
>

774 <
·¿m
 
Çme
="ty³">
The
 
ty³
 
bešg
 
m”ged
.</param>

775 <
·¿m
 
Çme
="v®ue">
The
 
exi¡šg
 
š¡ªû
 
to
 
be
 
	`modif›d
 (
ÿn
 b
nuÎ
).</param>

776 <
·¿m
 
Çme
="sourû">
The
 
bš¬y
 
¡»am
 
to
 
­¶y
Ø
the
 
	`š¡ªû
 (
ÿÂÙ
 
be
 
nuÎ
).</param>

777 <
·¿m
 
Çme
="¡yË">
How
 
to
 
’code
 
the
 
Ëngth
 
´efix
.</param>

778 <
·¿m
 
Çme
="f›ldNumb”">
The
 
g
 
u£d
 
as
 
a
 
´efix
 
to
 
—ch
 
	`»cÜd
 (
Úly
 u£d 
w™h
 
ba£
-128 
¡yË
 
´efixes
).</param>

779 <
»tuºs
>
The
 
upd©ed
 
š¡ªû
; 
this
 
may
 
be
 
difã»Á
 
to
 
the
 in¡ªû 
¬gum’t
 

780 
e™h”
 
the
 
Üigš®
 
š¡ªû
 
was
 
nuÎ
, 
Ü
h
¡»am
 
defšes
 
a
 
known
 
sub
-
ty³
 
of
he

781 
Üigš®
 
š¡ªû
.</
»tuºs
>

782 </
memb”
>

783 <
memb”
 
Çme
="M:ProtoBuf.Meta.TypeModel.DeserializeWithLengthPrefix(System.IO.Stream,System.Object,System.Type,ProtoBuf.PrefixStyle,System.Int32,ProtoBuf.Serializer.TypeResolver)">

784 <
summ¬y
>

785 
Aµl›s
 
a
 
´ÙocŞ
-
bufãr
 
¡»am
 
to
 
ª
 
exi¡šg
 
	`š¡ªû
 (
Ü
 
nuÎ
), 
usšg
 
Ëngth
-
´efixed


786 
d©a
 - 
u£ful
 
w™h
 
ÃtwÜk
 
IO
.

787 </
summ¬y
>

788 <
·¿m
 
Çme
="ty³">
The
 
ty³
 
bešg
 
m”ged
.</param>

789 <
·¿m
 
Çme
="v®ue">
The
 
exi¡šg
 
š¡ªû
 
to
 
be
 
	`modif›d
 (
ÿn
 b
nuÎ
).</param>

790 <
·¿m
 
Çme
="sourû">
The
 
bš¬y
 
¡»am
 
to
 
­¶y
Ø
the
 
	`š¡ªû
 (
ÿÂÙ
 
be
 
nuÎ
).</param>

791 <
·¿m
 
Çme
="¡yË">
How
 
to
 
’code
 
the
 
Ëngth
 
´efix
.</param>

792 <
·¿m
 
Çme
="ex³ùedF›ld">
The
 
g
 
u£d
 
as
 
a
 
´efix
 
to
 
—ch
 
	`»cÜd
 (
Úly
 u£d 
w™h
 
ba£
-128 
¡yË
 
´efixes
).</param>

793 <
·¿m
 
Çme
="»sŞv”">
U£d
 
to
 
»sŞve
 
ty³s
 
Ú
 
a
 
³r
-
f›ld
 
basis
.</param>

794 <
»tuºs
>
The
 
upd©ed
 
š¡ªû
; 
this
 
may
 
be
 
difã»Á
 
to
 
the
 in¡ªû 
¬gum’t
 

795 
e™h”
 
the
 
Üigš®
 
š¡ªû
 
was
 
nuÎ
, 
Ü
h
¡»am
 
defšes
 
a
 
known
 
sub
-
ty³
 
of
he

796 
Üigš®
 
š¡ªû
.</
»tuºs
>

797 </
memb”
>

798 <
memb”
 
Çme
="M:ProtoBuf.Meta.TypeModel.DeserializeWithLengthPrefix(System.IO.Stream,System.Object,System.Type,ProtoBuf.PrefixStyle,System.Int32,ProtoBuf.Serializer.TypeResolver,System.Int32@)">

799 <
summ¬y
>

800 
Aµl›s
 
a
 
´ÙocŞ
-
bufãr
 
¡»am
 
to
 
ª
 
exi¡šg
 
	`š¡ªû
 (
Ü
 
nuÎ
), 
usšg
 
Ëngth
-
´efixed


801 
d©a
 - 
u£ful
 
w™h
 
ÃtwÜk
 
IO
.

802 </
summ¬y
>

803 <
·¿m
 
Çme
="ty³">
The
 
ty³
 
bešg
 
m”ged
.</param>

804 <
·¿m
 
Çme
="v®ue">
The
 
exi¡šg
 
š¡ªû
 
to
 
be
 
	`modif›d
 (
ÿn
 b
nuÎ
).</param>

805 <
·¿m
 
Çme
="sourû">
The
 
bš¬y
 
¡»am
 
to
 
­¶y
Ø
the
 
	`š¡ªû
 (
ÿÂÙ
 
be
 
nuÎ
).</param>

806 <
·¿m
 
Çme
="¡yË">
How
 
to
 
’code
 
the
 
Ëngth
 
´efix
.</param>

807 <
·¿m
 
Çme
="ex³ùedF›ld">
The
 
g
 
u£d
 
as
 
a
 
´efix
 
to
 
—ch
 
	`»cÜd
 (
Úly
 u£d 
w™h
 
ba£
-128 
¡yË
 
´efixes
).</param>

808 <
·¿m
 
Çme
="»sŞv”">
U£d
 
to
 
»sŞve
 
ty³s
 
Ú
 
a
 
³r
-
f›ld
 
basis
.</param>

809 <
·¿m
 
Çme
="by‹sR—d">
R‘uºs
 
the
 
numb”
 
of
 
by‹s
 
cÚsumed
 
by
 
this
 
	`İ”©iÚ
 (
šşudes
 
Ëngth
-
´efix
 
ov”h—ds
 
ªd
 
ªy
 
sk³d
 
d©a
).</param>

810 <
»tuºs
>
The
 
upd©ed
 
š¡ªû
; 
this
 
may
 
be
 
difã»Á
 
to
 
the
 in¡ªû 
¬gum’t
 

811 
e™h”
 
the
 
Üigš®
 
š¡ªû
 
was
 
nuÎ
, 
Ü
h
¡»am
 
defšes
 
a
 
known
 
sub
-
ty³
 
of
he

812 
Üigš®
 
š¡ªû
.</
»tuºs
>

813 </
memb”
>

814 <
memb”
 
Çme
="M:ProtoBuf.Meta.TypeModel.DeserializeItems(System.IO.Stream,System.Type,ProtoBuf.PrefixStyle,System.Int32,ProtoBuf.Serializer.TypeResolver)">

815 <
summ¬y
>

816 
R—ds
 
a
 
£qu’û
 
of
 
cÚ£cutive
 
Ëngth
-
´efixed
 
™ems
 
äom
‡ 
¡»am
, 
usšg


817 
e™h”
 
ba£
-128 
Ü
 
fixed
-
Ëngth
 
´efixes
. 
Ba£
-128…»fixe 
w™h
 
a
 
g


818 
¬e
 
dœeùly
 
com·¿bË
 
to
 
£rŸlizšg
 
muÉË
 
™ems
 
š
 
sucûssiÚ


819 (
u£
 
the
 <
£e
 
üef
="F:PrÙoBuf.S”Ÿliz”.Li¡I‹mTag"/> 
g
 
to
 
emuÏ‹
h
im¶ic™
 
behaviÜ


820 
wh’
 
£rŸlizšg
 
a
 
li¡
/
¬¿y
). 
Wh’
‡ 
g
 
is


821 
¥ecif›d
, 
ªy
 
»cÜds
 
w™h
 
difã»Á
 
gs
 
¬e
 
s’y
 
om™‹d
. 
The


822 
g
 
is
 
ignÜed
. 
The
ag i 
ignÜes
 
fixed
-
Ëngth
 
´efixes
.

823 </
summ¬y
>

824 <
·¿m
 
Çme
="sourû">
The
 
bš¬y
 
¡»am
 
cÚššg
 
the
 
£rŸlized
 
»cÜds
.</param>

825 <
·¿m
 
Çme
="¡yË">
The
 
´efix
 
¡yË
 
u£d
 
š
 
the
 
d©a
.</param>

826 <
·¿m
 
Çme
="ex³ùedF›ld">
The
 
g
 
of
 
»cÜds
 
to
  (
nÚ
-
pos™ive
, 
th’
 
no
ag 
is


827 
ex³ùed
 
ªd
 
®l
 
»cÜds
 
¬e
 
»tuºed
).</
·¿m
>

828 <
·¿m
 
Çme
="»sŞv”">
On
 
a
 
f›ld
-
by
-f›ld 
basis
, 
the
 
ty³
 
of
 
objeù
 
to
 
	`de£rŸlize
 (
ÿn
 
be
 
nuÎ
 "ty³" 
is
 
¥ecif›d
). </param>

829 <
·¿m
 
Çme
="ty³">
The
 
ty³
 
of
 
objeù
 
to
 
	`de£rŸlize
 (
ÿn
 
be
 
nuÎ
 "»sŞv”" 
is
 
¥ecif›d
).</param>

830 <
»tuºs
>
The
 
£qu’û
 
of
 
de£rŸlized
 
objeùs
.</returns>

831 </
memb”
>

832 <
memb”
 
Çme
="M:ProtoBuf.Meta.TypeModel.DeserializeItems(System.IO.Stream,System.Type,ProtoBuf.PrefixStyle,System.Int32,ProtoBuf.Serializer.TypeResolver,ProtoBuf.SerializationContext)">

833 <
summ¬y
>

834 
R—ds
 
a
 
£qu’û
 
of
 
cÚ£cutive
 
Ëngth
-
´efixed
 
™ems
 
äom
‡ 
¡»am
, 
usšg


835 
e™h”
 
ba£
-128 
Ü
 
fixed
-
Ëngth
 
´efixes
. 
Ba£
-128…»fixe 
w™h
 
a
 
g


836 
¬e
 
dœeùly
 
com·¿bË
 
to
 
£rŸlizšg
 
muÉË
 
™ems
 
š
 
sucûssiÚ


837 (
u£
 
the
 <
£e
 
üef
="F:PrÙoBuf.S”Ÿliz”.Li¡I‹mTag"/> 
g
 
to
 
emuÏ‹
h
im¶ic™
 
behaviÜ


838 
wh’
 
£rŸlizšg
 
a
 
li¡
/
¬¿y
). 
Wh’
‡ 
g
 
is


839 
¥ecif›d
, 
ªy
 
»cÜds
 
w™h
 
difã»Á
 
gs
 
¬e
 
s’y
 
om™‹d
. 
The


840 
g
 
is
 
ignÜed
. 
The
ag i 
ignÜes
 
fixed
-
Ëngth
 
´efixes
.

841 </
summ¬y
>

842 <
·¿m
 
Çme
="sourû">
The
 
bš¬y
 
¡»am
 
cÚššg
 
the
 
£rŸlized
 
»cÜds
.</param>

843 <
·¿m
 
Çme
="¡yË">
The
 
´efix
 
¡yË
 
u£d
 
š
 
the
 
d©a
.</param>

844 <
·¿m
 
Çme
="ex³ùedF›ld">
The
 
g
 
of
 
»cÜds
 
to
  (
nÚ
-
pos™ive
, 
th’
 
no
ag 
is


845 
ex³ùed
 
ªd
 
®l
 
»cÜds
 
¬e
 
»tuºed
).</
·¿m
>

846 <
·¿m
 
Çme
="»sŞv”">
On
 
a
 
f›ld
-
by
-f›ld 
basis
, 
the
 
ty³
 
of
 
objeù
 
to
 
	`de£rŸlize
 (
ÿn
 
be
 
nuÎ
 "ty³" 
is
 
¥ecif›d
). </param>

847 <
·¿m
 
Çme
="ty³">
The
 
ty³
 
of
 
objeù
 
to
 
	`de£rŸlize
 (
ÿn
 
be
 
nuÎ
 "»sŞv”" 
is
 
¥ecif›d
).</param>

848 <
»tuºs
>
The
 
£qu’û
 
of
 
de£rŸlized
 
objeùs
.</returns>

849 <
·¿m
 
Çme
="cÚ‹xt">
Add™iÚ®
 
šfÜm©iÚ
 
about
 
this
 
£rŸliz©iÚ
 
İ”©iÚ
.</param>

850 </
memb”
>

851 <
memb”
 
Çme
="M:ProtoBuf.Meta.TypeModel.DeserializeItems``1(System.IO.Stream,ProtoBuf.PrefixStyle,System.Int32)">

852 <
summ¬y
>

853 
R—ds
 
a
 
£qu’û
 
of
 
cÚ£cutive
 
Ëngth
-
´efixed
 
™ems
 
äom
‡ 
¡»am
, 
usšg


854 
e™h”
 
ba£
-128 
Ü
 
fixed
-
Ëngth
 
´efixes
. 
Ba£
-128…»fixe 
w™h
 
a
 
g


855 
¬e
 
dœeùly
 
com·¿bË
 
to
 
£rŸlizšg
 
muÉË
 
™ems
 
š
 
sucûssiÚ


856 (
u£
 
the
 <
£e
 
üef
="F:PrÙoBuf.S”Ÿliz”.Li¡I‹mTag"/> 
g
 
to
 
emuÏ‹
h
im¶ic™
 
behaviÜ


857 
wh’
 
£rŸlizšg
 
a
 
li¡
/
¬¿y
). 
Wh’
‡ 
g
 
is


858 
¥ecif›d
, 
ªy
 
»cÜds
 
w™h
 
difã»Á
 
gs
 
¬e
 
s’y
 
om™‹d
. 
The


859 
g
 
is
 
ignÜed
. 
The
ag i 
ignÜes
 
fixed
-
Ëngth
 
´efixes
.

860 </
summ¬y
>

861 <
ty³·¿m
 
Çme
="T">
The
 
ty³
 
of
 
objeù
 
to
 
de£rŸlize
.</typeparam>

862 <
·¿m
 
Çme
="sourû">
The
 
bš¬y
 
¡»am
 
cÚššg
 
the
 
£rŸlized
 
»cÜds
.</param>

863 <
·¿m
 
Çme
="¡yË">
The
 
´efix
 
¡yË
 
u£d
 
š
 
the
 
d©a
.</param>

864 <
·¿m
 
Çme
="ex³ùedF›ld">
The
 
g
 
of
 
»cÜds
 
to
  (
nÚ
-
pos™ive
, 
th’
 
no
ag 
is


865 
ex³ùed
 
ªd
 
®l
 
»cÜds
 
¬e
 
»tuºed
).</
·¿m
>

866 <
»tuºs
>
The
 
£qu’û
 
of
 
de£rŸlized
 
objeùs
.</returns>

867 </
memb”
>

868 <
memb”
 
Çme
="M:ProtoBuf.Meta.TypeModel.DeserializeItems``1(System.IO.Stream,ProtoBuf.PrefixStyle,System.Int32,ProtoBuf.SerializationContext)">

869 <
summ¬y
>

870 
R—ds
 
a
 
£qu’û
 
of
 
cÚ£cutive
 
Ëngth
-
´efixed
 
™ems
 
äom
‡ 
¡»am
, 
usšg


871 
e™h”
 
ba£
-128 
Ü
 
fixed
-
Ëngth
 
´efixes
. 
Ba£
-128…»fixe 
w™h
 
a
 
g


872 
¬e
 
dœeùly
 
com·¿bË
 
to
 
£rŸlizšg
 
muÉË
 
™ems
 
š
 
sucûssiÚ


873 (
u£
 
the
 <
£e
 
üef
="F:PrÙoBuf.S”Ÿliz”.Li¡I‹mTag"/> 
g
 
to
 
emuÏ‹
h
im¶ic™
 
behaviÜ


874 
wh’
 
£rŸlizšg
 
a
 
li¡
/
¬¿y
). 
Wh’
‡ 
g
 
is


875 
¥ecif›d
, 
ªy
 
»cÜds
 
w™h
 
difã»Á
 
gs
 
¬e
 
s’y
 
om™‹d
. 
The


876 
g
 
is
 
ignÜed
. 
The
ag i 
ignÜes
 
fixed
-
Ëngth
 
´efixes
.

877 </
summ¬y
>

878 <
ty³·¿m
 
Çme
="T">
The
 
ty³
 
of
 
objeù
 
to
 
de£rŸlize
.</typeparam>

879 <
·¿m
 
Çme
="sourû">
The
 
bš¬y
 
¡»am
 
cÚššg
 
the
 
£rŸlized
 
»cÜds
.</param>

880 <
·¿m
 
Çme
="¡yË">
The
 
´efix
 
¡yË
 
u£d
 
š
 
the
 
d©a
.</param>

881 <
·¿m
 
Çme
="ex³ùedF›ld">
The
 
g
 
of
 
»cÜds
 
to
  (
nÚ
-
pos™ive
, 
th’
 
no
ag 
is


882 
ex³ùed
 
ªd
 
®l
 
»cÜds
 
¬e
 
»tuºed
).</
·¿m
>

883 <
»tuºs
>
The
 
£qu’û
 
of
 
de£rŸlized
 
objeùs
.</returns>

884 <
·¿m
 
Çme
="cÚ‹xt">
Add™iÚ®
 
šfÜm©iÚ
 
about
 
this
 
£rŸliz©iÚ
 
İ”©iÚ
.</param>

885 </
memb”
>

886 <
memb”
 
Çme
="M:ProtoBuf.Meta.TypeModel.SerializeWithLengthPrefix(System.IO.Stream,System.Object,System.Type,ProtoBuf.PrefixStyle,System.Int32)">

887 <
summ¬y
>

888 
Wr™es
 
a
 
´ÙocŞ
-
bufãr
 
»´e£Á©iÚ
 
of
 
the
 
giv’
 
š¡ªû
 
to
h
suµl›d
 
¡»am
,

889 
w™h
 
a
 
Ëngth
-
´efix
. 
This
 
is
 
u£ful
 
sock‘
 
´og¿mmšg
,

890 
as
 
De£rŸlizeW™hL’gthP»fix
 
ÿn
 
be
 
u£d
 
to
 
»ad
 
the
 
sšgË
 
objeù
 
back


891 
äom
 
ª
 
Úgošg
 
¡»am
.

892 </
summ¬y
>

893 <
·¿m
 
Çme
="ty³">
The
 
ty³
 
bešg
 
£rŸlized
.</param>

894 <
·¿m
 
Çme
="v®ue">
The
 
exi¡šg
 
š¡ªû
 
to
 
be
 
	`£rŸlized
 (
ÿÂÙ
 b
nuÎ
).</param>

895 <
·¿m
 
Çme
="¡yË">
How
 
to
 
’code
 
the
 
Ëngth
 
´efix
.</param>

896 <
·¿m
 
Çme
="de¡">
The
 
de¡š©iÚ
 
¡»am
 
to
 
wr™e
o.</param>

897 <
·¿m
 
Çme
="f›ldNumb”">
The
 
g
 
u£d
 
as
 
a
 
´efix
 
to
 
—ch
 
	`»cÜd
 (
Úly
 u£d 
w™h
 
ba£
-128 
¡yË
 
´efixes
).</param>

898 </
memb”
>

899 <
memb”
 
Çme
="M:ProtoBuf.Meta.TypeModel.SerializeWithLengthPrefix(System.IO.Stream,System.Object,System.Type,ProtoBuf.PrefixStyle,System.Int32,ProtoBuf.SerializationContext)">

900 <
summ¬y
>

901 
Wr™es
 
a
 
´ÙocŞ
-
bufãr
 
»´e£Á©iÚ
 
of
 
the
 
giv’
 
š¡ªû
 
to
h
suµl›d
 
¡»am
,

902 
w™h
 
a
 
Ëngth
-
´efix
. 
This
 
is
 
u£ful
 
sock‘
 
´og¿mmšg
,

903 
as
 
De£rŸlizeW™hL’gthP»fix
 
ÿn
 
be
 
u£d
 
to
 
»ad
 
the
 
sšgË
 
objeù
 
back


904 
äom
 
ª
 
Úgošg
 
¡»am
.

905 </
summ¬y
>

906 <
·¿m
 
Çme
="ty³">
The
 
ty³
 
bešg
 
£rŸlized
.</param>

907 <
·¿m
 
Çme
="v®ue">
The
 
exi¡šg
 
š¡ªû
 
to
 
be
 
	`£rŸlized
 (
ÿÂÙ
 b
nuÎ
).</param>

908 <
·¿m
 
Çme
="¡yË">
How
 
to
 
’code
 
the
 
Ëngth
 
´efix
.</param>

909 <
·¿m
 
Çme
="de¡">
The
 
de¡š©iÚ
 
¡»am
 
to
 
wr™e
o.</param>

910 <
·¿m
 
Çme
="f›ldNumb”">
The
 
g
 
u£d
 
as
 
a
 
´efix
 
to
 
—ch
 
	`»cÜd
 (
Úly
 u£d 
w™h
 
ba£
-128 
¡yË
 
´efixes
).</param>

911 <
·¿m
 
Çme
="cÚ‹xt">
Add™iÚ®
 
šfÜm©iÚ
 
about
 
this
 
£rŸliz©iÚ
 
İ”©iÚ
.</param>

912 </
memb”
>

913 <
memb”
 
Çme
="M:ProtoBuf.Meta.TypeModel.Deserialize(System.IO.Stream,System.Object,System.Type)">

914 <
summ¬y
>

915 
Aµl›s
 
a
 
´ÙocŞ
-
bufãr
 
¡»am
 
to
 
ª
 
exi¡šg
 
	`š¡ªû
 (
which
 
may
 
be
 
nuÎ
).

916 </
summ¬y
>

917 <
·¿m
 
Çme
="ty³">
The
 
	$ty³
 (
šşudšg
 
šh”™ªû
è
to
 
cÚsid”
.</
·¿m
>

918 <
·¿m
 
Çme
="v®ue">
The
 
exi¡šg
 
š¡ªû
 
to
 
be
 
	`modif›d
 (
ÿn
 b
nuÎ
).</param>

919 <
·¿m
 
Çme
="sourû">
The
 
bš¬y
 
¡»am
 
to
 
­¶y
Ø
the
 
	`š¡ªû
 (
ÿÂÙ
 
be
 
nuÎ
).</param>

920 <
»tuºs
>
The
 
upd©ed
 
š¡ªû
; 
this
 
may
 
be
 
difã»Á
 
to
 
the
 in¡ªû 
¬gum’t
 

921 
e™h”
 
the
 
Üigš®
 
š¡ªû
 
was
 
nuÎ
, 
Ü
h
¡»am
 
defšes
 
a
 
known
 
sub
-
ty³
 
of
he

922 
Üigš®
 
š¡ªû
.</
»tuºs
>

923 </
memb”
>

924 <
memb”
 
Çme
="M:ProtoBuf.Meta.TypeModel.Deserialize(System.IO.Stream,System.Object,System.Type,ProtoBuf.SerializationContext)">

925 <
summ¬y
>

926 
Aµl›s
 
a
 
´ÙocŞ
-
bufãr
 
¡»am
 
to
 
ª
 
exi¡šg
 
	`š¡ªû
 (
which
 
may
 
be
 
nuÎ
).

927 </
summ¬y
>

928 <
·¿m
 
Çme
="ty³">
The
 
	$ty³
 (
šşudšg
 
šh”™ªû
è
to
 
cÚsid”
.</
·¿m
>

929 <
·¿m
 
Çme
="v®ue">
The
 
exi¡šg
 
š¡ªû
 
to
 
be
 
	`modif›d
 (
ÿn
 b
nuÎ
).</param>

930 <
·¿m
 
Çme
="sourû">
The
 
bš¬y
 
¡»am
 
to
 
­¶y
Ø
the
 
	`š¡ªû
 (
ÿÂÙ
 
be
 
nuÎ
).</param>

931 <
»tuºs
>
The
 
upd©ed
 
š¡ªû
; 
this
 
may
 
be
 
difã»Á
 
to
 
the
 in¡ªû 
¬gum’t
 

932 
e™h”
 
the
 
Üigš®
 
š¡ªû
 
was
 
nuÎ
, 
Ü
h
¡»am
 
defšes
 
a
 
known
 
sub
-
ty³
 
of
he

933 
Üigš®
 
š¡ªû
.</
»tuºs
>

934 <
·¿m
 
Çme
="cÚ‹xt">
Add™iÚ®
 
šfÜm©iÚ
 
about
 
this
 
£rŸliz©iÚ
 
İ”©iÚ
.</param>

935 </
memb”
>

936 <
memb”
 
Çme
="M:ProtoBuf.Meta.TypeModel.Deserialize(System.IO.Stream,System.Object,System.Type,System.Int32)">

937 <
summ¬y
>

938 
Aµl›s
 
a
 
´ÙocŞ
-
bufãr
 
¡»am
 
to
 
ª
 
exi¡šg
 
	`š¡ªû
 (
which
 
may
 
be
 
nuÎ
).

939 </
summ¬y
>

940 <
·¿m
 
Çme
="ty³">
The
 
	$ty³
 (
šşudšg
 
šh”™ªû
è
to
 
cÚsid”
.</
·¿m
>

941 <
·¿m
 
Çme
="v®ue">
The
 
exi¡šg
 
š¡ªû
 
to
 
be
 
	`modif›d
 (
ÿn
 b
nuÎ
).</param>

942 <
·¿m
 
Çme
="sourû">
The
 
bš¬y
 
¡»am
 
to
 
­¶y
Ø
the
 
	`š¡ªû
 (
ÿÂÙ
 
be
 
nuÎ
).</param>

943 <
·¿m
 
Çme
="Ëngth">
The
 
numb”
 
of
 
by‹s
 
to
 
cÚsume
.</param>

944 <
»tuºs
>
The
 
upd©ed
 
š¡ªû
; 
this
 
may
 
be
 
difã»Á
 
to
 
the
 in¡ªû 
¬gum’t
 

945 
e™h”
 
the
 
Üigš®
 
š¡ªû
 
was
 
nuÎ
, 
Ü
h
¡»am
 
defšes
 
a
 
known
 
sub
-
ty³
 
of
he

946 
Üigš®
 
š¡ªû
.</
»tuºs
>

947 </
memb”
>

948 <
memb”
 
Çme
="M:ProtoBuf.Meta.TypeModel.Deserialize(System.IO.Stream,System.Object,System.Type,System.Int32,ProtoBuf.SerializationContext)">

949 <
summ¬y
>

950 
Aµl›s
 
a
 
´ÙocŞ
-
bufãr
 
¡»am
 
to
 
ª
 
exi¡šg
 
	`š¡ªû
 (
which
 
may
 
be
 
nuÎ
).

951 </
summ¬y
>

952 <
·¿m
 
Çme
="ty³">
The
 
	$ty³
 (
šşudšg
 
šh”™ªû
è
to
 
cÚsid”
.</
·¿m
>

953 <
·¿m
 
Çme
="v®ue">
The
 
exi¡šg
 
š¡ªû
 
to
 
be
 
	`modif›d
 (
ÿn
 b
nuÎ
).</param>

954 <
·¿m
 
Çme
="sourû">
The
 
bš¬y
 
¡»am
 
to
 
­¶y
Ø
the
 
	`š¡ªû
 (
ÿÂÙ
 
be
 
nuÎ
).</param>

955 <
·¿m
 
Çme
="Ëngth">
The
 
numb”
 
of
 
by‹s
 
to
 
	`cÚsume
 (
Ü
 -1Ø
»ad
Ø
the
 
’d
 oàth
¡»am
).</param>

956 <
»tuºs
>
The
 
upd©ed
 
š¡ªû
; 
this
 
may
 
be
 
difã»Á
 
to
 
the
 in¡ªû 
¬gum’t
 

957 
e™h”
 
the
 
Üigš®
 
š¡ªû
 
was
 
nuÎ
, 
Ü
h
¡»am
 
defšes
 
a
 
known
 
sub
-
ty³
 
of
he

958 
Üigš®
 
š¡ªû
.</
»tuºs
>

959 <
·¿m
 
Çme
="cÚ‹xt">
Add™iÚ®
 
šfÜm©iÚ
 
about
 
this
 
£rŸliz©iÚ
 
İ”©iÚ
.</param>

960 </
memb”
>

961 <
memb”
 
Çme
="M:ProtoBuf.Meta.TypeModel.Deserialize(ProtoBuf.ProtoReader,System.Object,System.Type)">

962 <
summ¬y
>

963 
Aµl›s
 
a
 
´ÙocŞ
-
bufãr
 
»ad”
 
to
 
ª
 
exi¡šg
 
	`š¡ªû
 (
which
 
may
 
be
 
nuÎ
).

964 </
summ¬y
>

965 <
·¿m
 
Çme
="ty³">
The
 
	$ty³
 (
šşudšg
 
šh”™ªû
è
to
 
cÚsid”
.</
·¿m
>

966 <
·¿m
 
Çme
="v®ue">
The
 
exi¡šg
 
š¡ªû
 
to
 
be
 
	`modif›d
 (
ÿn
 b
nuÎ
).</param>

967 <
·¿m
 
Çme
="sourû">
The
 
»ad”
 
to
 
­¶y
Ø
the
 
	`š¡ªû
 (
ÿÂÙ
 
be
 
nuÎ
).</param>

968 <
»tuºs
>
The
 
upd©ed
 
š¡ªû
; 
this
 
may
 
be
 
difã»Á
 
to
 
the
 in¡ªû 
¬gum’t
 

969 
e™h”
 
the
 
Üigš®
 
š¡ªû
 
was
 
nuÎ
, 
Ü
h
¡»am
 
defšes
 
a
 
known
 
sub
-
ty³
 
of
he

970 
Üigš®
 
š¡ªû
.</
»tuºs
>

971 </
memb”
>

972 <
memb”
 
Çme
="M:ProtoBuf.Meta.TypeModel.TryDeserializeAuxiliaryType(ProtoBuf.ProtoReader,ProtoBuf.DataFormat,System.Int32,System.Type,System.Object@,System.Boolean,System.Boolean,System.Boolean,System.Boolean)">

973 <
summ¬y
>

974 
This
 
is
 
the
 
mÜe
 "com¶‘e" 
v”siÚ
 
of
 
De£rŸlize
, 
which
 
hªdËs
 
sšgË
 
š¡ªûs
 oà
m­³d
 
ty³s
.

975 
The
 
v®ue
 
is
 
»ad
 
as
 
a
 
com¶‘e
 
f›ld
, 
šşudšg
 f›ld-
h—d”
 
	`ªd
 (
sub
-
objeùs
)‡

976 
Ëngth
-
´efix
..
kmc


978 
In
 
add™iÚ
 
to
 
th©
, 
this
 
´ovides
 
suµÜt
 :

979 - 
basic
 
v®ues
; 
šdividu®
 / 
¡ršg
 / 
Guid
 / 
‘c


980 - 
ILi¡
 
£ts
 
of
 
ªy
 
ty³
 
hªdËd
 
by
 
TryDe£rŸlizeAuxŸryTy³


981 </
summ¬y
>

982 </
memb”
>

983 <
memb”
 
Çme
="M:ProtoBuf.Meta.TypeModel.Create">

984 <
summ¬y
>

985 
C»©es
 
a
 
Ãw
 
ruÁime
 
mod–
, 
to
 
which
 
the
 
ÿÎ”


986 
ÿn
 
add
 
suµÜt
 
a
 
¿nge
 
of
 
ty³s
. 
A
 
mod–


987 
ÿn
 
be
 
u£d
 "a is", 
Ü
 cª b
comped
 

988 
İtim®
 
³rfÜmªû
.

989 </
summ¬y
>

990 </
memb”
>

991 <
memb”
 
Çme
="M:ProtoBuf.Meta.TypeModel.ResolveProxies(System.Type)">

992 <
summ¬y
>

993 
Aµl›s
 
commÚ
 
´oxy
 
sûÇrios
, 
»sŞvšg
 
the
 
aùu®
 
ty³
 
to
 
cÚsid”


994 </
summ¬y
>

995 </
memb”
>

996 <
memb”
 
Çme
="M:ProtoBuf.Meta.TypeModel.IsDefined(System.Type)">

997 <
summ¬y
>

998 
Indiÿ‹s
 
wh‘h”
 
the
 
suµl›d
 
ty³
 
is
 
ex¶ic™ly
 
mod–Ëd
 
by
h
mod–


999 </
summ¬y
>

1000 </
memb”
>

1001 <
memb”
 
Çme
="M:ProtoBuf.Meta.TypeModel.GetKey(System.Type@)">

1002 <
summ¬y
>

1003 
Provides
 
the
 
key
 
th©
 
»´e£Ás
 
a
 
giv’
 
ty³
 
š
h
cu¼’t
 
mod–
.

1004 
The
 
ty³
 
is
 
®so
 
nÜm®ized
 
´ox›s
 
©
 
the
 
§me
 
time
.

1005 </
summ¬y
>

1006 </
memb”
>

1007 <
memb”
 
Çme
="M:ProtoBuf.Meta.TypeModel.GetKeyImpl(System.Type)">

1008 <
summ¬y
>

1009 
Provides
 
the
 
key
 
th©
 
»´e£Ás
 
a
 
giv’
 
ty³
 
š
h
cu¼’t
 
mod–
.

1010 </
summ¬y
>

1011 </
memb”
>

1012 <
memb”
 
Çme
="M:ProtoBuf.Meta.TypeModel.Serialize(System.Int32,System.Object,ProtoBuf.ProtoWriter)">

1013 <
summ¬y
>

1014 
Wr™es
 
a
 
´ÙocŞ
-
bufãr
 
»´e£Á©iÚ
 
of
 
the
 
giv’
 
š¡ªû
 
to
h
suµl›d
 
¡»am
.

1015 </
summ¬y
>

1016 <
·¿m
 
Çme
="key">
R•»£Ás
 
the
 
	$ty³
 (
šşudšg
 
šh”™ªû
è
to
 
cÚsid”
.</
·¿m
>

1017 <
·¿m
 
Çme
="v®ue">
The
 
exi¡šg
 
š¡ªû
 
to
 
be
 
	`£rŸlized
 (
ÿÂÙ
 b
nuÎ
).</param>

1018 <
·¿m
 
Çme
="de¡">
The
 
de¡š©iÚ
 
¡»am
 
to
 
wr™e
o.</param>

1019 </
memb”
>

1020 <
memb”
 
Çme
="M:ProtoBuf.Meta.TypeModel.Deserialize(System.Int32,System.Object,ProtoBuf.ProtoReader)">

1021 <
summ¬y
>

1022 
Aµl›s
 
a
 
´ÙocŞ
-
bufãr
 
¡»am
 
to
 
ª
 
exi¡šg
 
	`š¡ªû
 (
which
 
may
 
be
 
nuÎ
).

1023 </
summ¬y
>

1024 <
·¿m
 
Çme
="key">
R•»£Ás
 
the
 
	$ty³
 (
šşudšg
 
šh”™ªû
è
to
 
cÚsid”
.</
·¿m
>

1025 <
·¿m
 
Çme
="v®ue">
The
 
exi¡šg
 
š¡ªû
 
to
 
be
 
	`modif›d
 (
ÿn
 b
nuÎ
).</param>

1026 <
·¿m
 
Çme
="sourû">
The
 
bš¬y
 
¡»am
 
to
 
­¶y
Ø
the
 
	`š¡ªû
 (
ÿÂÙ
 
be
 
nuÎ
).</param>

1027 <
»tuºs
>
The
 
upd©ed
 
š¡ªû
; 
this
 
may
 
be
 
difã»Á
 
to
 
the
 in¡ªû 
¬gum’t
 

1028 
e™h”
 
the
 
Üigš®
 
š¡ªû
 
was
 
nuÎ
, 
Ü
h
¡»am
 
defšes
 
a
 
known
 
sub
-
ty³
 
of
he

1029 
Üigš®
 
š¡ªû
.</
»tuºs
>

1030 </
memb”
>

1031 <
memb”
 
Çme
="M:ProtoBuf.Meta.TypeModel.DeepClone(System.Object)">

1032 <
summ¬y
>

1033 
C»©e
 
a
 
d“p
 
şÚe
 
of
 
the
 
suµl›d
 
š¡ªû
; 
ªy
 
sub
-
™ems
 
¬e
 
®so
 
şÚed
.

1034 </
summ¬y
>

1035 </
memb”
>

1036 <
memb”
 
Çme
="M:ProtoBuf.Meta.TypeModel.ThrowUnexpectedSubtype(System.Type,System.Type)">

1037 <
summ¬y
>

1038 
Indiÿ‹s
 
th©
 
ª
 
šh”™ªû
 
Œ“
 
exi¡s
, 
the
 
exaù
 
ty³
 
’couÁ”ed
 
was
 
nÙ


1039 
¥ecif›d
 
š
 
th©
 
h›¿rchy
 
ªd
 
ÿÂÙ
 
be
 
´oûs£d
.

1040 </
summ¬y
>

1041 </
memb”
>

1042 <
memb”
 
Çme
="M:ProtoBuf.Meta.TypeModel.ThrowUnexpectedType(System.Type)">

1043 <
summ¬y
>

1044 
Indiÿ‹s
 
th©
 
the
 
giv’
 
ty³
 
was
 
nÙ
 
ex³ùed
, 
ªd
 
ÿÂÙ
 
be
 
´oûs£d
.

1045 </
summ¬y
>

1046 </
memb”
>

1047 <
memb”
 
Çme
="M:ProtoBuf.Meta.TypeModel.ThrowCannotCreateInstance(System.Type)">

1048 <
summ¬y
>

1049 
Indiÿ‹s
 
th©
 
the
 
giv’
 
ty³
 
ÿÂÙ
 
be
 
cÚ¡ruùed
; 
™
 
may
 
¡l
 b
possibË
 
to


1050 
de£rŸlize
 
što
 
exi¡šg
 
š¡ªûs
.

1051 </
summ¬y
>

1052 </
memb”
>

1053 <
memb”
 
Çme
="M:ProtoBuf.Meta.TypeModel.CanSerializeContractType(System.Type)">

1054 <
summ¬y
>

1055 
R‘uºs
 
Œue
 
the
 
ty³
 
suµl›d
 
is
 
e™h”
 
a
 
»cogni£d
 
cÚŒaù
ype,

1056 
Ü
 
a
 *
li¡
* 
of
‡ 
»cogni£d
 
cÚŒaù
 
ty³
.

1057 </
summ¬y
>

1058 <
»m¬ks
>
NÙe
 
th©
 
´im™ives
 
®ways
  
çl£
, 
ev’
 
though
 
the
 
’gše


1059 
wl
, 
fÜûd
, 
Œy
 
to
 
£rŸlize
 
such
</
»m¬ks
>

1060 <
»tuºs
>
True
 
this
 
ty³
 
is
 
»cogni£d
 
as
 
a
 
£rŸlizabË
 
’t™y
, 
çl£
</returns>

1061 </
memb”
>

1062 <
memb”
 
Çme
="M:ProtoBuf.Meta.TypeModel.CanSerialize(System.Type)">

1063 <
summ¬y
>

1064 
R‘uºs
 
Œue
 
the
 
ty³
 
suµl›d
 
is
 
a
 
basic
y³ 
w™h
 
šbut
 
hªdlšg
,

1065 
a
 
»cogni£d
 
cÚŒaù
 
ty³
, 
Ü
‡ *
li¡
* 
of
‡ 
basic
 / contractype.

1066 </
summ¬y
>

1067 </
memb”
>

1068 <
memb”
 
Çme
="M:ProtoBuf.Meta.TypeModel.CanSerializeBasicType(System.Type)">

1069 <
summ¬y
>

1070 
R‘uºs
 
Œue
 
the
 
ty³
 
suµl›d
 
is
 
a
 
basic
y³ 
w™h
 
šbut
 
hªdlšg
,

1071 
Ü
 
a
 *
li¡
* 
of
‡ 
basic
 
ty³
 
w™h
 
šbut
 
hªdlšg


1072 </
summ¬y
>

1073 </
memb”
>

1074 <
memb”
 
Çme
="M:ProtoBuf.Meta.TypeModel.GetSchema(System.Type)">

1075 <
summ¬y
>

1076 
Sugge¡
 
a
 .
´Ùo
 
defš™iÚ
 
the
 
giv’
 
ty³


1077 </
summ¬y
>

1078 <
·¿m
 
Çme
="ty³">
The
 
ty³
 
to
 
g’”©e
 
a
 .
´Ùo
 
defš™iÚ
 , 
Ü
 <
c
>
nuÎ
</c>Øg’”©¨.´ÙØ
th©
 
»´e£Ás
 
the
 
’tœe
 
mod–
</param>

1079 <
»tuºs
>
The
 .
´Ùo
 
defš™iÚ
 
as
 
a
 
¡ršg
</returns>

1080 </
memb”
>

1081 <
memb”
 
Çme
="M:ProtoBuf.Meta.TypeModel.CreateFormatter(System.Type)">

1082 <
summ¬y
>

1083 
C»©es
 
a
 
Ãw
 
IFÜm©‹r
 
th©
 
u£s
 
´ÙocŞ
-
bufãr
 [
de
]
£rŸliz©iÚ
.

1084 </
summ¬y
>

1085 <
»tuºs
>
A
 
Ãw
 
IFÜm©‹r
 
to
 
be
 
u£d
 
duršg
 [
de
]
£rŸliz©iÚ
.</returns>

1086 <
·¿m
 
Çme
="ty³">
The
 
ty³
 
of
 
objeù
 
to
 
be
 [
de
]
de£rŸlized
 
by
 
the
 
fÜm©‹r
.</param>

1087 </
memb”
>

1088 <
memb”
 
Çme
="E:ProtoBuf.Meta.TypeModel.DynamicTypeFormatting">

1089 <
summ¬y
>

1090 
U£d
 
to
 
´ovide
 
cu¡om
 
£rviûs
 
wr™šg
 
ªd
 
·rsšg
 
ty³
 
Çmes
 
wh’
 
usšg
 
dyÇmic
 
ty³s
. 
BÙh
…¬sšg‡nd 
fÜm©tšg


1091 
¬e
 
´ovided
 
Ú
 
a
 
sšgË
 
API
 
as
 
™
 
is
 
es£ÁŸl
 
th©
 
bÙh
‡» 
m­³d
 
id’tiÿÎy
 
©
 
®l
 
times
.

1092 </
summ¬y
>

1093 </
memb”
>

1094 <
memb”
 
Çme
="T:ProtoBuf.Meta.TypeModel.CallbackType">

1095 <
summ¬y
>

1096 
Indiÿ‹s
 
the
 
ty³
 
of
 
ÿÎback
 
to
 
be
 
u£d


1097 </
summ¬y
>

1098 </
memb”
>

1099 <
memb”
 
Çme
="F:ProtoBuf.Meta.TypeModel.CallbackType.BeforeSerialize">

1100 <
summ¬y
>

1101 
Invoked
 
befÜe
 
ª
 
objeù
 
is
 
£rŸlized


1102 </
summ¬y
>

1103 </
memb”
>

1104 <
memb”
 
Çme
="F:ProtoBuf.Meta.TypeModel.CallbackType.AfterSerialize">

1105 <
summ¬y
>

1106 
Invoked
 
aá”
 
ª
 
objeù
 
is
 
£rŸlized


1107 </
summ¬y
>

1108 </
memb”
>

1109 <
memb”
 
Çme
="F:ProtoBuf.Meta.TypeModel.CallbackType.BeforeDeserialize">

1110 <
summ¬y
>

1111 
Invoked
 
befÜe
 
ª
 
objeù
 
is
 
	`de£rŸlized
 (
Ü
 
wh’
 
a
 
Ãw
 
š¡ªû
 i 
ü—‹d
)

1112 </
summ¬y
>

1113 </
memb”
>

1114 <
memb”
 
Çme
="F:ProtoBuf.Meta.TypeModel.CallbackType.AfterDeserialize">

1115 <
summ¬y
>

1116 
Invoked
 
aá”
 
ª
 
objeù
 
is
 
de£rŸlized


1117 </
summ¬y
>

1118 </
memb”
>

1119 <
memb”
 
Çme
="M:ProtoBuf.Meta.RuntimeTypeModel.GetTypes">

1120 <
summ¬y
>

1121 
R‘uºs
 
a
 
£qu’û
 
of
 
the
 
Ty³
 
š¡ªûs
 
th©
 
ÿn
 
be


1122 
´oûs£d
 
by
 
this
 
mod–
.

1123 </
summ¬y
>

1124 </
memb”
>

1125 <
memb”
 
Çme
="M:ProtoBuf.Meta.RuntimeTypeModel.GetSchema(System.Type)">

1126 <
summ¬y
>

1127 
Sugge¡
 
a
 .
´Ùo
 
defš™iÚ
 
the
 
giv’
 
ty³


1128 </
summ¬y
>

1129 <
·¿m
 
Çme
="ty³">
The
 
ty³
 
to
 
g’”©e
 
a
 .
´Ùo
 
defš™iÚ
 , 
Ü
 <
c
>
nuÎ
</c>Øg’”©¨.´ÙØ
th©
 
»´e£Ás
 
the
 
’tœe
 
mod–
</param>

1130 <
»tuºs
>
The
 .
´Ùo
 
defš™iÚ
 
as
 
a
 
¡ršg
</returns>

1131 </
memb”
>

1132 <
memb”
 
Çme
="M:ProtoBuf.Meta.RuntimeTypeModel.Add(System.Type,System.Boolean)">

1133 <
summ¬y
>

1134 
Adds
 
suµÜt
 
ª
 
add™iÚ®
 
ty³
 
š
 
this
 
mod–
, 
İtiÚ®ly


1135 
­µlyšg
 
šbut
 
·‰”ns
. 
If
 
the
 
ty³
 
is
 
®»ady
 
known
 
to
he

1136 
mod–
, 
the
 
exi¡šg
 
ty³
 
is
 
»tuºed
 **
w™hout
** 
­¶yšg


1137 
ªy
 
add™iÚ®
 
behaviour
.

1138 </
summ¬y
>

1139 <
»m¬ks
>
Inbut
 
·‰”ns
 
šşude
:

1140 [
PrÙoCÚŒaù
]/[
	`PrÙoMemb”
(
n
)]

1141 [
D©aCÚŒaù
]/[
	`D©aMemb”
(
Ord”
=
n
)]

1142 [
XmlTy³
]/[
	`XmlEËm’t
(
Ord”
=
n
)]

1143 [
On
{
Des
|
S
}”Ÿliz{šg|ed}]

1144 
ShouldS”Ÿlize
*

	@script/battle/battle.lua

1 
loÿl
 
	gskyÃt
 = 
»quœe
 "skynet"

2 
loÿl
 
bË_š£¹
 = 
bË
.
š£¹


4 
loÿl
 
room


5 
loÿl
 
m­


6 
loÿl
 
¶ay”s


8 
loÿl
 
cmd
 = {}

9 
loÿl
 
guid2un™
 = {}

10 
£tm‘©abË
(
guid2un™
, {
__mode
 = "v"})

12 
	g»quœe
 "battle.unit"

13 
	g»quœe
 "battle.map"

14 
loÿl
 
	gm­_mªag”
 = 
»quœe
 "battle.map_manager"

16 
loÿl
 
jsÚ
 = 
»quœe
 "cjson"

18 
funùiÚ
 
cmd
.
	$š™
(
_room
)

19 
room
 = 
_room


20 
skyÃt
.
	$dump
(
room
)

21 
¶ay”s
 = 
room
.players

23 
	$š™_m­
()

24 
¶ay”_id
, 
¶ay”
 
š
 
	$·œs
(
¶ay”s
) do

25 
¶ay”
.
lßded
 = 0

26 
’d


27 
’d


29 
funùiÚ
 
cmd
.
	$još_b©e
(
¶ay”_id
)

30 
loÿl
 
¶ay”
 = 
¶ay”s
[
¶ay”_id
]

31 
nÙ
 
¶ay”
 
th’


32  
çl£


33 
’d


34 
¶ay”
.
lßded
 = 100

36 
	$check_lßd_fšished
(è
th’


37 
	$¡¬t
()

38 
’d


39  
Œue


40 
’d


42 
funùiÚ
 
	$check_lßd_fšished
()

43 
_
, 
¶ay”
 
š
 
	$·œs
(
¶ay”s
) do

44 
¶ay”
.
lßded
 < 100 
th’


45  
çl£


46 
’d


47 
’d


48  
Œue


49 
’d


51 
funùiÚ
 
	$š™_m­
()

52 
loÿl
 
m­_id
 = 
room
.map_id

53 
m­
 = 
M­
.
	$Ãw
(
m­_id
)

54 
m­
:
	$š™
()

55 
_
, 
lše
 
š
 
	$aœs
(
m­
.
tes
) do

56 
_
, 
te
 
š
 
	$aœs
(
lše
) do

57 
te
.
un™_id
 ~ğ201 
th’


58 
guid2un™
[
te
.
guid
] =ile

59 
’d


60 
’d


61 
’d


63 
’d


65 
funùiÚ
 
	$¡¬t
()

66 
loÿl
 
tbl
 = {
un™Li¡
={}
	}
}

67 
loÿl
 
	gcouÁ
 = 0

69 
_
, 
un™
 
š
 
	$·œs
(
guid2un™
) do

70 
	`bË_š£¹
(
tbl
.
un™Li¡
, {

71 
guid
 = 
un™
.guid,

72 
un™Id
 = 
un™
.
un™_id
,

73 
x
 = 
un™
.
pos™iÚ
.x,

74 
y
 = 
un™
.
pos™iÚ
.y,

75 
o
 = 
un™
.
pos™iÚ
.o,

76 
d©a
 = 
jsÚ
.
	`’code
(
un™
:
	`g‘_d©a
()è
	}
})

77 
couÁ
 >ğ100 
th’


78 
couÁ
 = 0

79 
brßdÿ¡
("S2C_C»©eUn™",
tbl
)

80 
	gtbl
 = {
un™Li¡
={}}

81 
	gskyÃt
.
	$¦“p
(2)

82 
’d


83 
couÁ
 = count + 1

84 
’d


85 
	`brßdÿ¡
("S2C_C»©eUn™",
tbl
)

86 
	`brßdÿ¡
("S2C_S¹B©e", {
	}
})

87 
’d


89 
funùiÚ
 
	$brßdÿ¡
(
mes§ge_ty³
, 
tbl
)

90 
¶ay”_id
, 
_
 
š
 
	$·œs
(
¶ay”s
) do

91 
skyÃt
.
	`ÿÎ
(".ag’t"..
¶ay”_id
, "lua", "£nd_·ckage", 
mes§ge_ty³
, 
tbl
)

92 
’d


93 
’d


95 
skyÃt
.
	`¡¬t
(
	$funùiÚ
()

96 
skyÃt
.
	`di¥©ch
("lua", 
	$funùiÚ
(
_
,_, 
commªd
, ...)

97 
loÿl
 
f
 = 
cmd
[
commªd
]

98 
skyÃt
.
	`»t
(skyÃt.
	`·ck
(
	$f
(...)))

99 
’d
)

100 
’d
)

	@script/battle/battle_handler.lua

3 
loÿl
 
	gCMD
 = {}

5 
funùiÚ
 
CMD
.
	$C2S_H–lo
(
·ckage
)

6 
	`´št
("ş›Á say h–lo"..
·ckage
.
a
)

7 
’d


9 
funùiÚ
 
CMD
.
	$Reque¡_C»©eRoom
(
·ckage
, 
¶ay”
)

10  {
»suÉ
 = 
Œue
}

11 
’d


49  
	gCMD


	@script/battle/map.lua

2 
loÿl
 
	gskyÃt
 = 
»quœe
 "skynet"

3 
loÿl
 
bË_š£¹
 = 
bË
.
š£¹


5 
loÿl
 
m­_mªag”
 = 
»quœe
 "battle.map_manager"

7 
M­
 = 
	$şass
()

9 
funùiÚ
 
M­
:
	$ùÜ
(
m­_id
)

10 
skyÃt
.
	`log
("m­_id"..
m­_id
)

11 
£lf
.
m­_id
 = map_id

12 
£lf
.
width
 = 0

13 
£lf
.
height
 = 0

14 
£lf
.
tes
 = {
	}
}

15 
’d


17 
funùiÚ
 
M­
:
	$š™
()

18 
loÿl
 
m­_d©a
 = 
m­_mªag”
.
	$g‘_m­_d©a
(
£lf
.
m­_id
)

19 
skyÃt
.
	`log
("lßdšg m­ "..
£lf
.
m­_id
)

20 
£lf
.
width
 = 
m­_d©a
.width

21 
£lf
.
height
 = 
m­_d©a
.height

23 
loÿl
 
i
 = 1

24 
y
=1, 
£lf
.
height
 do

25 
loÿl
 
lše
 = {
	}
}

26 
x
=1, 
	g£lf
.
width
 do

27 
loÿl
 
	gun™_id
 = 
m­_d©a
.
blocks
[
i
]

28 
loÿl
 
te
 = 
Te
.
	$Ãw
(
un™_id
, 
x
, 
y
)

29 
	$bË_š£¹
(
lše
, 
te
)

30 
i
 = i + 1

31 
’d


32 
	$bË_š£¹
(
£lf
.
tes
, 
lše
)

33 
’d


34 --
skyÃt
.
	$dump
(
£lf
.
tes
)

35 
£lf
.
m­_d©a
 = map_data

36 
’d


39 
Te
 = 
	$şass
(
Un™
)

41 
funùiÚ
 
Te
:
	$ùÜ
(
un™_id
, 
x
, 
y
)

42 
£lf
.
un™_id
 = unit_id

43 
£lf
.
pos™iÚ
 = {
x
 = x, 
y
 = y, 
o
 = 0
	}
}

44 
	g£lf
.
	gblock
 = 
m­_mªag”
.
	$g‘_m­_block
(
un™_id
)

45 
’d


47 
funùiÚ
 
Te
:
	$g‘_d©a
()

49 
	}
}

50 
’d


	@script/battle/map_manager.lua

1 
loÿl
 
	gskyÃt
 = 
»quœe
 "skynet"

2 
loÿl
 
jsÚ
 = 
»quœe
 "cjson"

3 
loÿl
 
d©aûÁ”
 = 
»quœe
 "datacenter"

5 
loÿl
 
M
 = {}

7 
funùiÚ
 
M
.
	$lßd_m­s
()

8 
skyÃt
.
	`log
("load map")

9 
loÿl
 
dœ
 = 
WORKSPACE
.."data/Map/"

10 
loÿl
 
s
 = 
io
.
	`pİ’
("l ".. 
dœ
)

11 
loÿl
 
feLi¡s
 = 
s
:
	`»ad
("*all")

12 
¡¬t_pos
 = 1

13 
Œue
 do

14 
loÿl
 
_
,
’d_pos
, 
f’ame
 = 
¡ršg
.
	`fšd
(
feLi¡s
, "([^\n\r]+.txt)", 
¡¬t_pos
)

15 
nÙ
 
’d_pos
 
th’


17 
’d


18 
loÿl
 
_
,_, 
id_¡r
 = 
¡ršg
.
	`fšd
(
f’ame
, "(%d+)")

19 
loÿl
 
m­_id
 = 
	$tÚumb”
(
id_¡r
)

20 
m­_id
 
th’


21 
loÿl
 
fe
 = 
io
.
	`İ’
(
dœ
..
f’ame
, "r")

22 
loÿl
 
¡r
 = 
fe
:
	`»ad
("*a")

23 
loÿl
 
d©a
 = 
jsÚ
.
	$decode
(
¡r
)

24 
fe
:
	$şo£
()

25 
skyÃt
.
	`log
("lßd m­ d©a: "..
f’ame
)

26 
d©aûÁ”
.
	`£t
("id2m­_d©a", 
	`tÚumb”
(
m­_id
), 
d©a
)

27 
’d


29 
¡¬t_pos
 = 
’d_pos
 + 1

30 
’d


31 
’d


33 
funùiÚ
 
	$lßd_m­_block
()

34 
loÿl
 
fe
 = 
io
.
	`İ’
(
WORKSPACE
.."data/Map/MapBlock.txt", "r")

35 
loÿl
 
¡r
 = 
fe
:
	`»ad
("*a")

36 
d©aûÁ”
.
	`£t
("id2block", 
jsÚ
.
	$decode
(
¡r
))

37 
fe
:
	$şo£
()

38 
’d


40 
funùiÚ
 
M
.
	$g‘_m­_d©a
(
m­_id
)

41  
d©aûÁ”
.
	`g‘
("id2m­_d©a", 
m­_id
)

42 
’d


44 
funùiÚ
 
M
.
	$g‘_m­_block
(
block_id
)

45  
d©aûÁ”
.
	`£t
("id2block", 
block_id
)

46 
’d


48  
M


	@script/battle/unit.lua

2 
	gUn™
 = 
şass
()

4 --
glob®
 
unique
 
id


5 
loÿl
 
auto_id
 = 0

6 
funùiÚ
 
	$auto_guid
()

7 
auto_id
 =‡uto_id + 1

8  
auto_id


9 
’d


11 
funùiÚ
 
Un™
:
	$ùÜ
()

12 
£lf
.
guid
 = 
	$auto_guid
()

13 
£lf
.
un™_id
 = 0

14 
£lf
.
pos™iÚ
 = {
x
 = 0, 
y
 = 0, 
o
 = 0
	}
}

15 
	g’d


18 
funùiÚ
 
	gUn™
:
	$g‘_d©a
()

19  {
	}
}

20 
’d


	@script/behavior_tree/behavior_node.lua

2 
	gBehaviÜNode
 = 
	$şass
()

3 
funùiÚ
 
BehaviÜNode
:
	`ùÜ
()

5 
£lf
.
doc
 = {

6 
Çme
 = "", --

7 
nickÇme
 = "", -- èŠ‚ç‚¹åç§°(
XX
èŠ‚ç‚¹)

8 
desüibe
 = "", -- èŠ‚ç‚¹æè¿°(
bababa
...)

9 
şassify
 = "", -- èŠ‚ç‚¹åˆ†ç±»(è¡Œä¸ºèŠ‚ç‚¹)

10 
¬gs_desc
 = {}, -- è¾“å…¥(
a
/å¸¸é‡//0, 
¯
/å˜é‡/
key
/)

11 
lim™
 = 0, -- å­èŠ‚ç‚¹é™åˆ¶

12 
¡yË
 = "default", -- èŠ‚ç‚¹æ ·å¼

13 
	}
}

14 
’d


15 
funùiÚ
 
	gBehaviÜNode
:
	$š™
(
node_d©a
, 
Œ“
)

16 
£lf
.
Œ“
 =ree

17 
£lf
.
d©a
 = 
node_d©a


18 
£lf
.
node_id
 = 
node_d©a
.
nodeId


19 
£lf
.
chd»n
 = {
	}
}

20 
_
, 
chd_d©a
 
š
 
	$aœs
(
node_d©a
.
chd»n
) do

21 
loÿl
 
node_Çme
 = 
chd_d©a
.
Çme


22 
nÙ
 
_G
[
node_Çme
] 
th’


23 
	`´št
("behaviÜ‚odnÙƒxi¡: "..
node_Çme
)

25 
’d


26 
loÿl
 
chd
 = 
_G
[
node_Çme
].
	$Ãw
()

27 
chd
:
	$š™
(
chd_d©a
, 
Œ“
)

28 
bË
.
	$š£¹
(
£lf
.
chd»n
, 
chd
)

29 
’d


30 
’d


31 
funùiÚ
 
BehaviÜNode
:
	$exec
()

32 
£lf
:
	$befÜe_run
()

33 
£lf
:
	$run
()

34 
£lf
:
	$aá”_run
()

35 
’d


36 
funùiÚ
 
BehaviÜNode
:
	$befÜe_run
()

37 
i
, 
desc
 
š
 
	$aœs
(
£lf
.
doc
.
¬gs_desc
) do

38 
loÿl
 
¬r
 = 
¡ršg
.
	`¥l™
(
desc
, '/')

39 
loÿl
 
key
 = 
¬r
[1]

40 
loÿl
 
t
 = 
¬r
[3]

41 
loÿl
 
v¬_æag
 = 
£lf
.
d©a
[
i
]

42 
loÿl
 
¬g
 = 
£lf
.
d©a
[
i
]

43 
loÿl
 
v®ue
 = 
n


44 
v¬_æag
 
th’


45 
v®ue
 = 
£lf
.
Œ“
:
	$g‘_v¬
(
¬g
)

47 
t
 =ğ"št" 
Ü
 =ğ"æßt" 
th’


48 
v®ue
 = 
	$tÚumb”
(
¬g
)

50 
v®ue
 = 
¬g


51 
’d


52 
’d


53 
£lf
[
key
] = 
v®ue


54 
’d


55 
’d


56 
funùiÚ
 
BehaviÜNode
:
	$run
()

57  
Œue


58 
’d


59 
funùiÚ
 
BehaviÜNode
:
	$aá”_run
()

60 
i
 , 
desc
 
š
 
	$aœs
(
£lf
.
doc
.
¬gs_desc
) do

61 
loÿl
 
¬r
 = 
¡ršg
.
	`¥l™
(
desc
, '/')

62 
loÿl
 
key
 = 
¬r
[1]

63 
loÿl
 
t
 = 
¬r
[3]

64 
loÿl
 
v¬_æag
 = 
£lf
.
d©a
[
i
]

65 
loÿl
 
¬g
 = 
£lf
.
d©a
[
i
]

66 
loÿl
 
v®ue
 = 
£lf
[
key
]

68 
v¬_æag
 
th’


69 
£lf
.
Œ“
:
	$£t_v¬
(
¬g
, 
v®ue
)

70 
’d


72 
’d


73 
’d


75 
»quœe
 "behavior_tree/node/common"

76 
»quœe
 "behavior_tree/node/map"

77 
»quœe
 "behavior_tree/node/ai"

	@script/behavior_tree/behavior_tree.lua

2 
	gBehaviÜT»e
 = 
	$şass
()

4 
funùiÚ
 
BehaviÜT»e
:
	$ùÜ
(
Œ“_d©a
, 
owÃr
)

5 
£lf
.
d©a
 = 
Œ“_d©a


6 
£lf
.
Œ“_id
 = 
Œ“_d©a
.tree_id

7 
£lf
.
owÃr
 = owner

8 
£lf
.
v¬s
 = {
	}
}

9 
loÿl
 
roÙ_Çme
 = 
Œ“_d©a
.
roÙ
.
Çme


10 
nÙ
 
_G
[
roÙ_Çme
] 
th’


11 
´št
("behaviÜ‚odnÙƒxi¡: "..
roÙ_Çme
)

13 
’d


14 
£lf
.
roÙ
 = 
_G
[
Œ“_d©a
.roÙ.
Çme
].
	$Ãw
()

15 
£lf
.
roÙ
:
	$š™
(
Œ“_d©a
.
roÙ
, 
£lf
)

17 
’d


19 
funùiÚ
 
BehaviÜT»e
:
	$exec
()

20 
£lf
.
roÙ
:
	$exec
()

21 
’d


23 
funùiÚ
 
BehaviÜT»e
:
	$g‘_v¬
(
key
)

24 
£lf
.
v¬s
[
key
] 
th’


25  
£lf
.
v¬s
[
key
]

26 
’d


27 
£lf
.
owÃr
 
th’


28  
£lf
.
owÃr
[
key
]

29 
’d


30 
’d


32 
funùiÚ
 
BehaviÜT»e
:
	$£t_v¬
(
key
, 
v®ue
)

33 
£lf
.
v¬s
[
key
] 
th’


34 
£lf
.
v¬s
[
key
] = 
v®ue


36 
’d


37 
£lf
.
owÃr
 
ªd
 s–f.owÃr[
key
] 
th’


38 
£lf
.
owÃr
[
key
] = 
v®ue


39 
’d


40 
£lf
.
v¬s
[
key
] = 
v®ue


41 
’d


	@script/behavior_tree/bt_manager.lua

2 
	g»quœe
 "behavior_tree.behavior_node"

3 
	g»quœe
 "behavior_tree.behavior_tree"

5 
loÿl
 
	gjsÚ
 = 
»quœe
 "cjson"

6 
loÿl
 
d©aûÁ”
 = 
»quœe
 "datacenter"

8 
loÿl
 
M
 = {}

10 
funùiÚ
 
M
.
	$expÜt_node_doc
()

11 
loÿl
 
d©a
 = "["

12 
Çme
, 
c
 
š
 
	$·œs
(
_G
) do

13 
	`ty³
(
c
è=ğ"bË" 
ªd
 c.
su³r
 =ğ
BehaviÜNode
 
th’


14 
loÿl
 
obj
 = 
c
.
	$Ãw
()

15 
loÿl
 
doc
 = 
obj
.doc

16 
doc
 
th’


17 
doc
.
Çme
 =‚ame

18 
d©a
 = d©¨.. 
jsÚ
.
	`’code
(
doc
) .. ",\n"

19 
’d


20 
’d


21 
’d


23 
d©a
 ~ğ"[" 
th’


24 
d©a
 = 
¡ršg
.
	`sub
(data, 1,-3)

25 
d©a
 = data .. "]"

26 
’d


28 
loÿl
 
fe
 = 
io
.
	`İ’
(
WORKSPACE
.."data/Btree/node_doc.txt", "w")

29 
fe
:
	$wr™e
(
d©a
)

30 
fe
:
	$şo£
()

31 
’d


33 
funùiÚ
 
M
.
	$lßd_Œ“s
()

34 
loÿl
 
id2Œ“_d©a
 = {
	}
}

35 
loÿl
 
dœ
 = 
WORKSPACE
.."data/Btree/Tree/"

36 
loÿl
 
s
 = 
io
.
pİ’
("l ".. 
dœ
)

37 
loÿl
 
feLi¡s
 = 
s
:
»ad
("*all")

38 
¡¬t_pos
 = 1

39 
Œue
 do

40 
_
,
	g’d_pos
, 
	gf’ame
 = 
¡ršg
.
fšd
(
feLi¡s
, "([^\n\r]+.txt)", 
¡¬t_pos
)

41 
nÙ
 
’d_pos
 
th’


43 
’d


44 
loÿl
 
	gfe
 = 
io
.
İ’
(
dœ
..
f’ame
, "r")

45 
loÿl
 
	g¡r
 = 
fe
:
»ad
("*a")

46 
loÿl
 
d©a
 = 
jsÚ
.
	$decode
(
¡r
)

47 
id2Œ“_d©a
[
d©a
.
Œ“Id
] = data

48 
fe
:
	$şo£
()

49 
	`´št
("lßd behaviÜ»e: "..
f’ame
)

50 
¡¬t_pos
 = 
’d_pos
 + 1

51 
’d


52 
d©aûÁ”
.
	`£t
("id2Œ“_d©a", 
id2Œ“_d©a
)

53 
’d


55 
funùiÚ
 
M
.
	$ü—‹_Œ“
(
Œ“_id
, 
owÃr
)

56 
loÿl
 
Œ“_d©a
 = 
d©aûÁ”
.
	`g‘
("id2Œ“_d©a", 
Œ“_id
)

57 
nÙ
 
Œ“_d©a
 
th’


58 
	`´št
("behaviÜ»nÙƒxi¡,»e_id:"..
Œ“_id
)

60 
’d


61  
BehaviÜT»e
.
	$Ãw
(
Œ“_d©a
, 
owÃr
)

62 
’d


64  
M


	@script/behavior_tree/node/ai.lua

	@script/behavior_tree/node/common.lua

3 
	gRoÙ
 = 
	$şass
(
BehaviÜNode
)

4 
funùiÚ
 
RoÙ
:
	$ùÜ
()

5 
£lf
.
doc
 = {

6 
nickÇme
 = "æ ¹èŠ‚ç‚¹",

7 
desüibe
 = "AIçš„æ ¹èŠ‚ç‚¹,æ‰§è¡Œæ‰€æœ‰å­èŠ‚ç‚¹",

8 
¬gs_desc
 = {"rate/int/100/æ‰§è¡Œé¢‘ç‡(æ¯«ç§’æ¬¡)"},

9 
şassify
 = "å¤åˆèŠ‚ç‚¹",

10 
lim™
 = 999,

11 
¡yË
 = "green",

12 
	}
}

13 
’d


14 
funùiÚ
 
	gRoÙ
:
	$run
()

15 
_
, 
chd
 
š
 
	$aœs
(
£lf
.
chd»n
) do

16 
chd
:
	$run
()

17 
’d


18  
Œue


19 
’d


22 
Sequ’û
 = 
	$şass
(
BehaviÜNode
)

23 
funùiÚ
 
Sequ’û
:
	$ùÜ
()

24 
£lf
.
doc
 = {

25 
nickÇme
 = "é¡ºåºæ‰§è¡Œ",

26 
desüibe
 = "æ‰§è¡Œæ‰€æœ‰å­èŠ‚ç‚¹ç›´åˆ°è¿”å›false",

27 
şassify
 = "å¤åˆèŠ‚ç‚¹",

28 
lim™
 = 999,

29 
¡yË
 = "blue",

30 
	}
}

31 
’d


32 
funùiÚ
 
	gSequ’û
:
	$run
()

33 
_
, 
chd
 
š
 
	$aœs
(
£lf
.
chd»n
) do

34 
nÙ
 
chd
:
	$run
(è
th’


35  
çl£


36 
’d


37 
’d


38  
Œue


39 
’d


41 
S–eùÜ
 = 
	$şass
(
BehaviÜNode
)

42 
funùiÚ
 
S–eùÜ
:
	$ùÜ
()

43 
£lf
.
doc
 = {

44 
nickÇme
 = "é€‰æ‹©æ‰§è¡Œ",

45 
desüibe
 = "æ‰§è¡Œæ‰€æœ‰å­èŠ‚ç‚¹ç›´åˆ°è¿”å›true",

46 
şassify
 = "å¤åˆèŠ‚ç‚¹",

47 
lim™
 = 999,

48 
¡yË
 = "blue",

49 
	}
}

50 
’d


51 
funùiÚ
 
	gS–eùÜ
:
	$run
()

52 
_
, 
chd
 
š
 
	$aœs
(
£lf
.
chd»n
) do

53 
chd
:
	$run
(è
th’


54  
Œue


55 
’d


56 
’d


57  
çl£


58 
’d


	@script/behavior_tree/node/map.lua

2 
	gRoÙ
 = 
	$şass
(
BehaviÜNode
)

3 
funùiÚ
 
RoÙ
:
	$ùÜ
()

4 
£lf
.
doc
 = {

5 
nickÇme
 = "æ ¹èŠ‚ç‚¹",

6 
desüibe
 = "AIçš„æ ¹èŠ‚ç‚¹,æ‰§è¡Œæ‰€æœ‰å­èŠ‚ç‚¹",

7 
¬gs_desc
 = {"rate/int/100/æ‰§è¡Œé¢‘ç‡(æ¯«ç§’æ¬¡)"},

8 
şassify
 = "å¤åˆèŠ‚ç‚¹",

9 
lim™
 = 999,

10 
¡yË
 = "green",

11 
	}
}

12 
’d


13 
funùiÚ
 
	gRoÙ
:
	$run
()

14 
_
, 
chd
 
š
 
	$aœs
(
£lf
.
chd»n
) do

15 
chd
:
	$run
()

16 
’d


17  
Œue


18 
’d


	@script/data_manager/data_manager.lua

1 
loÿl
 
	gskyÃt
 = 
»quœe
 "skynet"

2 
loÿl
 
d©aûÁ”
 = 
»quœe
 "datacenter"

3 
loÿl
 
M
 = {}

5 
loÿl
 
´Ùobuf
 = 
»quœe
 "protobuf"

7 
funùiÚ
 
M
.
	$lßd_d©as
()

8 
loÿl
 
dœ
 = 
WORKSPACE
.."data/"

9 
loÿl
 
s
 = 
io
.
	`pİ’
("l ".. 
dœ
)

10 
loÿl
 
feLi¡s
 = 
s
:
	`»ad
("*all")

11 
¡¬t_pos
 = 1

12 
Œue
 do

13 
_
,
’d_pos
, 
f’ame
 = 
¡ršg
.
	`fšd
(
feLi¡s
, "([^\n\r]+.by‹s)", 
¡¬t_pos
)

14 
nÙ
 
’d_pos
 
th’


16 
’d


17 
loÿl
 
tbl_Çme
 = 
¡ršg
.
	`sub
(
f’ame
, 1, -7)

18 
loÿl
 
fe
 = 
io
.
	`İ’
(
dœ
..
f’ame
, "r")

19 
loÿl
 
¡r
 = 
fe
:
	`»ad
("*a")

20 
´Ùobuf
.
	`»gi¡”_fe
("../b©e_c™y/´Ùo/"..
tbl_Çme
..".pb" )

21 
loÿl
 
d©a
 = 
´Ùobuf
.
	`decode
("Ba£."..
tbl_Çme
.."_ARRAY", 
¡r
)

22 
fe
:
	$şo£
()

23 
d©aûÁ”
.
	`£t
("Çme2tbl", 
tbl_Çme
, 
d©a
)

24 
¡¬t_pos
 = 
’d_pos
 + 1

25 
’d


26 
’d


28 
funùiÚ
 
M
.
	$g‘_d©a
(
Çme
)

29  
d©aûÁ”
.
	`g‘
("Çme2tbl", 
Çme
)

30 
’d


32  
M


	@script/global.lua

1 
loÿl
 
	g´št
 = 
´št


2 
loÿl
 
tcÚÿt
 = 
bË
.
cÚÿt


3 
loÿl
 
tš£¹
 = 
bË
.
š£¹


4 
loÿl
 
¤•
 = 
¡ršg
.
»p


5 
loÿl
 
ty³
 =ype

6 
loÿl
 
·œs
 =…airs

7 
loÿl
 
to¡ršg
 =ostring

8 
loÿl
 
Ãxt
 =‚ext

11 
WORKSPACE
 = "../battle_city/"

13 
UNIT_TYPE_ERROR
 = 0

14 
UNIT_TYPE_TILE
 = 1

15 
UNIT_TYPE_PLAYER
 = 2

16 
UNIT_TYPE_TANK
 = 3

17 
UNIT_TYPE_BULLET
 = 4

20 
loÿl
 
skyÃt
 = 
»quœe
 "skynet"

21 
skyÃt
.
log
 = skyÃt.
”rÜ


23 
funùiÚ
 
	$_dump_tbl
(
roÙ
)

24 
	`ty³
(
roÙ
è~ğ"bË" 
th’


26 
’d


28 
loÿl
 
ÿche
 = { [
roÙ
] = "." 
	}
}

29 
loÿl
 
funùiÚ
 
	$_dump
(
t
,
¥aû
,
Çme
)

30 
loÿl
 
‹mp
 = {
	}
}

31 
k
,
v
 
š
 
	$·œs
(
t
) do

32 
loÿl
 
key
 = 
	$to¡ršg
(
k
)

33 
ÿche
[
v
] 
th’


34 
	`tš£¹
(
‹mp
,"+" .. 
key
 .. " {" .. 
ÿche
[
v
].."}")

35 
–£if
 
	`ty³
(
v
è=ğ"bË" 
th’


36 
loÿl
 
Ãw_key
 = 
Çme
 .. "." .. 
key


37 
ÿche
[
v
] = 
Ãw_key


38 
	`tš£¹
(
‹mp
,"+" .. 
key
 .. 
	`_dump
(
v
,
¥aû
 .. (
	$Ãxt
(
t
,
k
è
ªd
 "|" 
Ü
 " " ).. 
	`¤•
(" ",#key),
Ãw_key
))

40 
	`tš£¹
(
‹mp
,"+" .. 
key
 .. " [" .. 
	`to¡ršg
(
v
).."]")

41 
’d


42 
’d


43  
	`tcÚÿt
(
‹mp
,"\n"..
¥aû
)

44 
’d


45  
	`_dump
(
roÙ
, "","")

46 
’d


47 
skyÃt
.
dump
 = 
	$funùiÚ
(
roÙ
)

48 
skyÃt
.
	`log
("\n"..
	$_dump_tbl
(
roÙ
))

49 
’d


51 
loÿl
 
_şass
={
	}
}

53 
funùiÚ
 
	$şass
(
su³r
, 
şass_Çme
)

54 
loÿl
 
şass_ty³
={
	}
}

55 
şass_ty³
.
ùÜ
=
çl£


56 
şass_ty³
.
su³r
=super

57 
şass_ty³
.
Ãw
=
	$funùiÚ
(...)

58 
loÿl
 
obj
={
	}
}

60 
loÿl
 
ü—‹


61 
ü—‹
 = 
	$funùiÚ
(
c
,...)

62 
c
.
su³r
 
th’


63 
	$ü—‹
(
c
.
su³r
,...)

64 
’d


65 
c
.
ùÜ
 
th’


66 
c
.
	$ùÜ
(
obj
,...)

67 
’d


68 
’d


70 
	$ü—‹
(
şass_ty³
,...)

71 
’d


72 
	`£tm‘©abË
(
obj
,{ 
__šdex
=
_şass
[
şass_ty³
] 
	}
})

73  
obj


74 
’d


75 
loÿl
 
	gvtbl
={}

76 
_şass
[
şass_ty³
]=
vtbl


78 
£tm‘©abË
(
şass_ty³
,{
__Ãwšdex
=
funùiÚ
(
t
,
k
,
v
)

79 
vtbl
[
k
]=
v


80 
’d
})

82 
su³r
 
th’


83 
£tm‘©abË
(
vtbl
,{
__šdex
=
funùiÚ
(
t
,
k
)

84 
loÿl
 
»t
=
_şass
[
su³r
][
k
]

85 
vtbl
[
k
]=
»t


86  
»t


87 
’d
})

88 
’d


90  
şass_ty³


91 
’d


93 
funùiÚ
 
by‹s_to_št
(
¡r
,
’dŸn
,sigÃdè-- 
u£
 
Ëngth
 
of
 
¡ršg
 
to
 
	gd‘”mše
 8,16,32,64 
b™s


94 
loÿl
 
	gt
={
¡r
:
by‹
(1,-1)}

95 
’dŸn
=="big" 
th’
 --
»v”£
 
by‹s


96 
loÿl
 
‰
={}

97 
k
=1,#t do

98 
	g‰
[#t-
k
+1]=
t
[k]

99 
’d


100 
t
=
‰


101 
’d


102 
loÿl
 
n
=0

103 
k
=1,#t do

104 
	gn
=
n
+
t
[
k
]*2^((k-1)*8)

105 
’d


106 sigÃd 
th’


107 
n
 = (À> 2^(#t-1è-1è
ªd
 (À- 2^#tè
Ü
‚ -- 
Ï¡
 
b™
 
£t
, 
	gÃg©ive
.

108 
’d


109  
n


110 
’d


112 
funùiÚ
 
	$št_to_by‹s
(
num
,
’dŸn
,signed)

113 
num
<0 
ªd
 
nÙ
 sigÃd 
th’
‚um=-num 
´št
"w¬nšg, drİpšg sigÀäom‚umb” cÚv”tšgØunsigÃd" 
’d


114 
loÿl
 
»s
={
	}
}

115 
loÿl
 
n
 = 
m©h
.
û
(
£Ëù
(2,m©h.
äexp
(
num
))/8è-- 
numb”
 
of
 
by‹s
 
to
 
be
 
	gu£d
.

116 sigÃd 
ªd
 
	gnum
 < 0 
th’


117 
	gnum
 = 
num
 + 2^
n


118 
’d


119 
k
=
n
,1,-1 dØ-- 256 = 2^8 
b™s
 
³r
 .

120 
loÿl
 
mul
=2^(8*(
k
-1))

121 
»s
[
k
]=
m©h
.
æoÜ
(
num
/
mul
)

122 
num
òum-
»s
[
k
]*
mul


123 
’d


124 
	$as£¹
(
num
==0)

125 
’dŸn
 =ğ"big" 
th’


126 
loÿl
 
t
={
	}
}

127 
k
=1,
n
 do

128 
	gt
[
k
]=
»s
[
n
-k+1]

129 
’d


130 
»s
=
t


131 
’d


132  
¡ršg
.(
	$uÅack
(
»s
))

133 
’d


136 
funùiÚ
 
¡ršg
.
	$¥l™
(
s
, 
d–im
)

137 
	`ty³
(
d–im
è~ğ"¡ršg" 
Ü
 
¡ršg
.
	`Ën
(d–imè<ğ0 
th’


139 
’d


141 
loÿl
 
¡¬t
 = 1

142 
loÿl
 
t
 = {
	}
}

143 
Œue
 do

144 
loÿl
 
pos
 = 
¡ršg
.
fšd
 (
s
, 
d–im
, 
¡¬t
, 
Œue
è-- 
¶aš
 find

145 
nÙ
 
pos
 
th’


147 
’d


149 
	gbË
.
š£¹
 (
t
, 
¡ršg
.
sub
 (
s
, 
¡¬t
, 
pos
 - 1))

150 
	g¡¬t
 = 
pos
 + 
¡ršg
.
	$Ën
 (
d–im
)

151 
’d


152 
bË
.
	`š£¹
 (
t
, 
¡ršg
.
	$sub
 (
s
, 
¡¬t
))

154  
t


155 
’d


	@script/player/player.lua

1 
loÿl
 
	gskyÃt
 = 
»quœe
 "skynet"

3 
PÏy”
 = 
	$şass
()

5 
»quœe
 "player.player_test"

6 
»quœe
 "player.player_room"

8 
funùiÚ
 
PÏy”
:
	$ùÜ
()

9 
	`´št
("player‚ew")

10 
£lf
.
¶ay”_id
 = 
skyÃt
.
	`ÿÎ
(".db", "lua", "auto_player_id")

11 
£lf
.
¶ay”_Çme
 = 
	$to¡ršg
(
£lf
.
¶ay”_id
)

12 
£lf
.
room_id
 = 0

13 
’d


15 
funùiÚ
 
PÏy”
:
	$logš
()

16 
	`´št
("player†ogin")

17 
’d


19 
funùiÚ
 
PÏy”
:
	$logout
()

20 
	`´št
("player†ogout")

21 
’d


23 
funùiÚ
 
PÏy”
:
	$£nd
(
mes§ge_ty³
, 
tbl
)

24 
skyÃt
.
	`ÿÎ
(".ag’t"..
£lf
.
¶ay”_id
, "lua", "£nd_·ckage", 
mes§ge_ty³
, 
tbl
)

25 
’d


27 
funùiÚ
 
PÏy”
:
	$½c
(
£lf
)

29 
’d


31 
funùiÚ
 
	`PÏy”_§ve
(
£lf
)

32 --
skyÃt
.
	`ÿÎ
(".db", "lua", "§ve_¶ay”", 
£lf
)

33 
’d


	@script/player/player_handler.lua

2 
loÿl
 
	gskyÃt
 = 
»quœe
 "skynet"

3 
loÿl
 
bË_š£¹
 = 
bË
.
š£¹


5 
loÿl
 
cmd
 = {}

7 
funùiÚ
 
cmd
.
	$C2S_H–lo
(
·ckage
)

8 
	`´št
("ş›Á say h–lo"..
·ckage
.
a
)

9 
’d


11 
funùiÚ
 
cmd
.
	$Reque¡_C»©eRoom
(
·ckage
, 
¶ay”
)

12 
¶ay”
.
room_id
 ~ğ0 
th’


13  {
»suÉ
 = 
çl£
}

14 
’d


15 
loÿl
 
	groom_id
 = 
¶ay”
:
	$ü—‹_room
()

16  {
»suÉ
 = 
Œue
, 
roomId
 = 
room_id
}

17 
’d


19 
funùiÚ
 
	gcmd
.
	$Reque¡_RoomLi¡
(
·ckage
, 
¶ay”
)

20 
loÿl
 
¡¬t_idx
 = 
·ckage
.
¡¬tIdx


21 
loÿl
 
’d_idx
 = 
·ckage
.
’dIdx


22 
loÿl
 
room_li¡
 = 
skyÃt
.
	`ÿÎ
(".lobby", "lua", "g‘_room_li¡", 
¡¬t_idx
, 
’d_idx
)

23 
loÿl
 
tbl
 = {
	}
}

24 
_
, 
room
 
š
 
	$aœs
(
room_li¡
) do

25 
	`bË_š£¹
(
tbl
, {

26 
roomId
 = 
room
.
room_id
,

27 
roomName
 = 
room
.
room_Çme
,

28 
tÙ®CouÁ
 = 
room
.
tÙ®_couÁ
,

29 
cu¼’tCouÁ
 = 
room
.
cur_couÁ
,

30 
	}
})

31 
	g’d


32 --
dump_tbl
({
roomLi¡
 = 
tbl
})

33  {
	groomLi¡
 = 
tbl
}

34 
’d


36 
funùiÚ
 
	gcmd
.
	$Reque¡_JošRoom
(
·ckage
, 
¶ay”
)

37 
loÿl
 
»t
 = 
¶ay”
:
	$još_room
(
·ckage
.
roomId
)

38  {
»suÉ
 = 
»t
}

39 
’d


41 
funùiÚ
 
cmd
.
	$Reque¡_Qu™Room
(
·ckage
, 
¶ay”
)

42 
loÿl
 
»t
 = 
¶ay”
:
	$qu™_room
()

43  {
»suÉ
 = 
»t
}

44 
’d


46 
funùiÚ
 
cmd
.
	$Reque¡_P»·»Game
(
·ckage
, 
¶ay”
)

47 
loÿl
 
»t
 = 
¶ay”
:
	$´•¬e_game
(
·ckage
.
æag
)

48  {
»suÉ
 = 
»t
}

49 
’d


51 
funùiÚ
 
cmd
.
	$Reque¡_S¹Game
(
·ckage
, 
¶ay”
)

52 
loÿl
 
»t
 = 
¶ay”
:
	$¡¬t_game
()

53  {
»suÉ
 = 
»t
}

54 
’d


56 
funùiÚ
 
cmd
.
	$C2S_Brßdÿ¡RoomD©a
(
·ckage
, 
¶ay”
)

57 
¶ay”
.
room_id
 =ğ0 
th’


58 
	`´št
("player‚ot in„oom")

60 
’d


61 
skyÃt
.
	`ÿÎ
(".lobby", "lua", "brßdÿ¡_room_d©a", 
¶ay”
.
room_id
)

62 
’d


92  
cmd


	@script/player/player_room.lua

1 
loÿl
 
	gskyÃt
 = 
»quœe
 "skynet"

3 
funùiÚ
 
PÏy”
:
	$ü—‹_room
()

4 
£lf
.
room_id
 ~ğ0 
th’


5  
çl£


6 
’d


8 
loÿl
 
room_id
 = 
skyÃt
.
	`ÿÎ
(".lobby", "lua", "ü—‹_room", 
£lf
.
¶ay”_Çme
.."çš„æˆ¿é—´", s–f.
¶ay”_id
)

9 
room_id
 =ğ0 
th’


10  
çl£


11 
’d


13 
£lf
:
	$još_room
(
room_id
)

14 
£lf
:
	$´•¬e_game
(
Œue
)

15 
skyÃt
.
	`ÿÎ
(".lobby", "lua", "brßdÿ¡_room_d©a", 
room_id
)

16  
Œue


17 
’d


19 
funùiÚ
 
PÏy”
:
	$još_room
(
room_id
)

20 
£lf
.
room_id
 ~ğ0 
th’


21  
çl£


22 
’d


23 
loÿl
 
»t
 = 
skyÃt
.
	`ÿÎ
(".lobby", "lua", "još_room", 
room_id
, 
£lf
.
¶ay”_id
, s–f.
¶ay”_Çme
)

24 
»t
 
th’


25 
£lf
.
room_id
 =„oom_id

27 
	`´št
("player cannot join„oom")

28 
’d


29 
	`´št
("¶ay”"..
£lf
.
¶ay”_id
.." još„oom"..
room_id
)

30  
»t


31 
’d


33 
funùiÚ
 
PÏy”
:
	$qu™_room
()

34 
£lf
.
room_id
 =ğ0 
th’


35  
çl£


36 
’d


37 
loÿl
 
»t
 = 
skyÃt
.
	`ÿÎ
(".lobby", "lua", "qu™_room", 
£lf
.
room_id
, s–f.
¶ay”_id
)

38 
»t
 
th’


39 
£lf
.
room_id
 = 0

40 
’d


41  
»t


42 
’d


44 
funùiÚ
 
PÏy”
:
	$´•¬e_game
(
æag
)

45 
£lf
.
room_id
 =ğ0 
th’


46  
çl£


47 
’d


48  
skyÃt
.
	`ÿÎ
(".lobby", "lua", "´•¬e_game", 
£lf
.
room_id
, s–f.
¶ay”_id
, 
æag
)

49 
’d


51 
funùiÚ
 
PÏy”
:
	$¡¬t_game
()

52 
£lf
.
room_id
 =ğ0 
th’


53  
çl£


54 
’d


55  
skyÃt
.
	`ÿÎ
(".lobby", "lua", "¡¬t_game", 
£lf
.
room_id
, s–f.
¶ay”_id
)

56 
’d


	@script/player/player_test.lua

1 
loÿl
 
	gskyÃt
 = 
»quœe
 "skynet"

3 
funùiÚ
 
	$¶ay”_‹¡
()

4 
	`´št
("playerest")

5 
’d


	@service/agent.lua

1 
	g»quœe
 "skynet.manager"

3 
loÿl
 
	gskyÃt
 = 
»quœe
 "skynet"

4 
loÿl
 
Ãack
 = 
»quœe
 "netpack"

5 
loÿl
 
sock‘
 = 
»quœe
 "socket"

6 
loÿl
 
¥rÙo
 = 
»quœe
 "sproto"

7 
loÿl
 
¥rÙŞßd”
 = 
»quœe
 "sprotoloader"

8 
loÿl
 
´Ùobuf
 = 
»quœe
 "protobuf"

9 
loÿl
 
bË_š£¹
 = 
bË
.
š£¹


11 
»quœe
 "player.player"

13 
loÿl
 
WATCHDOG


14 
loÿl
 
ho¡


15 
loÿl
 
£nd_»que¡


17 
loÿl
 
¶ay”_hªdËr
 = 
»quœe
 "player.player_handler"

18 
loÿl
 
cmd
 = {}

19 
loÿl
 
REQUEST
 = {}

20 
loÿl
 
ş›Á_fd


21 
loÿl
 
¶ay”


22 
loÿl
 
b©e
 -- æˆ˜æ–—æœåŠ¡åœ°å€

24 
skyÃt
.
»gi¡”_´ÙocŞ
 {

25 
Çme
 = "client",

26 
	gid
 = 
skyÃt
.
PTYPE_CLIENT
,

27 
	guÅack
 = 
funùiÚ
 (
msg
, 
sz
)

28 
	gskyÃt
.
log
(
msg
)

29  
	gskyÃt
.
to¡ršg
(
msg
, 
sz
)

30 
	g’d
,

31 
	gdi¥©ch
 = 
funùiÚ
 (
£ssiÚ
, 
add»ss
, 
bufãr
, ...)

32 
loÿl
 
	gmsg
 = 
´Ùobuf
.
decode
("Mes§ge", 
bufãr
)

33 
	g_
, 
p
 
š
 
aœs
(
msg
.
·ckageLi¡
) do

34 
	gskyÃt
.
log
("»c›v·ckage",
p
.
Çme
)

35 
loÿl
 
	gµ
 = 
´Ùobuf
.
decode
(
p
.
Çme
,….
d©a
)

36 
loÿl
 
	gf
 = 
cmd
[
p
.
Çme
] 
Ü
 
¶ay”_hªdËr
[p.name]

37 
nÙ
 
f
 
th’


38 
´št
("mes§ghªdË¸nÙƒxi¡. Package:"..
p
.
Çme
)

40 
’d


41 
loÿl
 
»t
 = 
f
(
µ
, 
¶ay”
)

42 
	gp
.
	g½cId
 ~ğ0 
th’


43 
£nd_·ckage
("Re¥Ú£"..
¡ršg
.
sub
(
p
.
Çme
, 8, -1), 
»t
,….
½cId
)

44 
’d


46 
’d


48 
	g’d


51 
funùiÚ
 
	gcmd
.
	$logš_¡¬t
(
cÚf
)

52 
loÿl
 
fd
 = 
cÚf
.
ş›Á


53 
loÿl
 
g©e
 = 
cÚf
.gate

54 
WATCHDOG
 = 
cÚf
.
w©chdog


55 
ş›Á_fd
 = 
fd


56 
	`´št
("login start")

58 
skyÃt
.
	`ÿÎ
(
g©e
, "lua", "fÜw¬d", 
fd
)

59 
’d


61 
funùiÚ
 
cmd
.
	$ma¡”_¡¬t
(
cÚf
)

62 
loÿl
 
fd
 = 
cÚf
.
ş›Á


63 
loÿl
 
g©e
 = 
cÚf
.gate

64 
WATCHDOG
 = 
cÚf
.
w©chdog


65 
ş›Á_fd
 = 
fd


66 
	`´št
("master start")

68 
skyÃt
.
	`ÿÎ
(
g©e
, "lua", "fÜw¬d", 
fd
)

69 
	`£nd_·ckage
("S2C_LßdSûÃ", {
Çme
 = "Lobby"
	}
})

70 --
	$£nd_h–lo
()

71 
’d


73 
funùiÚ
 
cmd
.
	$b©e_¡¬t
(
cÚf
)

74 
loÿl
 
fd
 = 
cÚf
.
ş›Á


75 
loÿl
 
g©e
 = 
cÚf
.gate

76 
WATCHDOG
 = 
cÚf
.
w©chdog


77 
ş›Á_fd
 = 
fd


78 
	`´št
("battle start")

80 
skyÃt
.
	`ÿÎ
(
g©e
, "lua", "fÜw¬d", 
fd
)

81 
	`£nd_·ckage
("S2C_LßdSûÃ", {
Çme
 = "B©e"
	}
})

82 --
	$£nd_h–lo
()

83 
’d


85 
funùiÚ
 
cmd
.
	$C2S_Logš
(
p
)

86 
skyÃt
.
	`log
("client†ogin")

87 
loÿl
 
»suÉ
, 
add»ss
, 
pÜt
, 
¶ay”_id
 = 
skyÃt
.
	`ÿÎ
(".logš","lua","logš",
p
.
accouÁName
,….
accouÁPwd
)

88 
	`£nd_·ckage
("S2C_Logš", {
»suÉ
 =„esuÉ, 
add»ss
 =‡dd»ss, 
pÜt
 =…Üt, 
¶ay”Id
 = 
¶ay”_id
})

89 
	gskyÃt
.
ÿÎ
(
WATCHDOG
, "lua", "şo£", 
ş›Á_fd
)

90 
	gskyÃt
.
	$ex™
()

91 
’d


93 
funùiÚ
 
cmd
.
	$C2S_OÆše
(
p
)

94 
loÿl
 
¶ay”_id
 = 
p
.
¶ay”Id


95 
¶ay”
 = 
skyÃt
.
	`ÿÎ
(".db", "lua", "qu”y_¶ay”", 
¶ay”_id
)

96 
nÙ
 
¶ay”
 
th’


97 
¶ay”
 = 
PÏy”
.
	$Ãw
()

98 
’d


100 
skyÃt
.(".ag’t"..
¶ay”
.
¶ay”_id
)

101 
	`´št
("»gi¡”‡g’t"..
¶ay”
.
¶ay”_id
)

102 
	`£nd_·ckage
("S2C_Online", {

103 
»suÉ
 = 
Œue
,

104 
¶ay”Id
 =
¶ay”
.
¶ay”_id
,

105 
¶ay”Name
 = 
¶ay”
.
¶ay”_Çme


106 
	}
})

107 
’d


109 
funùiÚ
 
	gcmd
.
	$C2S_JošB©e
(
p
)

110 
loÿl
 
¶ay”_id
 = 
p
.
¶ay”Id


111 
b©e
 = 
p
.battle

112 
skyÃt
.(".ag’t"..
¶ay”_id
)

113 
loÿl
 
»t
 = 
skyÃt
.
	`ÿÎ
(
b©e
, "lua", "još_b©e", 
¶ay”_id
)

114 
»t
 
th’


115 
’d


116 
’d


118 
funùiÚ
 
	$£nd_h–lo
()

119 
skyÃt
.
	`fÜk
(
	$funùiÚ
()

120 
Œue
 do

121 
	`£nd_·ckage
("S2C_Pšg",{
time
 = 
os
.
	`time
()
	}
})

122 --
£nd_·ckage
("S2C_LßdSûÃ", {
Çme
 = "Lobby"})

123 
	gskyÃt
.
	$¦“p
(500)

124 
’d


125 
’d
)

126 
’d


128 
´Ùobuf
.
»gi¡”_fe
 "../battle_city/proto/Msg.pb"

129 
loÿl
 
msgCache
 = {
·ckageLi¡
 = {}
	}
}

130 
funùiÚ
 
¿w_£nd_·ckage
()

131 --
	gskyÃt
.
log
("raw_send_package")

132 #msgCache.
	g·ckageLi¡
 =ğ0 
th’


134 
’d


135 
sock‘
.
wr™e
(
ş›Á_fd
, 
´Ùobuf
.
’code
("Mes§ge",
msgCache
))

136 
	gmsgCache
.
	g·ckageLi¡
 = {}

137 
’d


139 
funùiÚ
 
£nd_·ckage
(
mes§ge_ty³
, 
tbl
, 
½c_id
)

140 --
	gskyÃt
.
log
("send_package")

141 
	g½c_id
 = 
½c_id
 
Ü
 0

142 
bufãr
 = 
´Ùobuf
.
	$’code
(
mes§ge_ty³
, 
tbl
)

143 
	`bË_š£¹
(
msgCache
.
·ckageLi¡
, {
Çme
 = 
mes§ge_ty³
, 
½cId
 = 
½c_id
, 
d©a
 = 
bufãr
})

144 
	gskyÃt
.
	$¦“p
(1)

145 
	$¿w_£nd_·ckage
()

147 
’d


149 
cmd
.
£nd_·ckage
 = send_package

151 
funùiÚ
 
cmd
.
	`discÚÃù
()

152 -- 
todo
: dØ
som‘hšg
 
befÜe
 
ex™


153 
¶ay”
 
th’


154 
¶ay”
:
	`qu™_room
(player)

155 --
¶ay”
:
	$§ve
(
¶ay”
)

156 
’d


157 
skyÃt
.
	$ex™
()

158 
’d


160 
skyÃt
.
	`¡¬t
(
	$funùiÚ
()

161 
skyÃt
.
	`di¥©ch
("lua", 
	$funùiÚ
(
_
,_, 
commªd
, ...)

162 
loÿl
 
f
 = 
cmd
[
commªd
]

163 
skyÃt
.
	`»t
(skyÃt.
	`·ck
(
	$f
(...)))

164 
’d
)

165 
’d
)

	@service/agentpool.lua

1 
loÿl
 
	gskyÃt
 = 
»quœe
 "skynet"

2 
»quœe
 "skynet.manager"

4 
loÿl
 
cÚfig
 = 
»quœe
 "config"

5 
loÿl
 
£rviû_Çme
 = ...

6 
loÿl
 
g©e_li¡
 = 
cÚfig
[
£rviû_Çme
].gate_list

7 
loÿl
 
ag’t_¡¬t_func
 = 
£rviû_Çme
 .. "_start"

9 
loÿl
 
cmd
 = {}

10 
loÿl
 
w©chdog_li¡
 = {}

12 
loÿl
 
idx
 = 1

13 
funùiÚ
 
cmd
.
»que¡_g©e_add»ss
()

14 --
´št
("request_gate_address")

15 
loÿl
 
w©chdog
 = 
w©chdog_li¡
[
idx
]

16 
idx
, 
w©chdog
 
š
 
	$aœs
(
w©chdog_li¡
) do

17 
loÿl
 
»t
 = 
skyÃt
.
	`ÿÎ
(
w©chdog
, "lua", "is_full")

18 
»t
 
th’


19 
loÿl
 
cÚf
 = 
g©e_li¡
[
idx
]

20  
cÚf
.
add»ss
, cÚf.
pÜt


21 
’d


22 
’d


24 
’d


26 
skyÃt
.
	`¡¬t
(
	$funùiÚ
()

27 
skyÃt
.
	`di¥©ch
("lua", 
	$funùiÚ
(
_
,_,
commªd
, ...)

28 
loÿl
 
f
 = 
cmd
[
commªd
]

29 
skyÃt
.
	`»t
(skyÃt.
	`·ck
(
	$f
(...)))

30 
’d
)

31 
skyÃt
.".agentpool"

33 
i
, 
cÚf
 
š
 
	$aœs
(
g©e_li¡
) do

34 
loÿl
 
w©chdog
 = 
skyÃt
.
	`Ãw£rviû
("watchdog")

35 
skyÃt
.
	`ÿÎ
(
w©chdog
, "lua", "¡¬t", 
cÚf
, 
ag’t_¡¬t_func
)

36 
bË
.
	$š£¹
(
w©chdog_li¡
, 
w©chdog
)

37 
’d


38 
’d
)

	@service/battlemng.lua

1 
loÿl
 
	gskyÃt
 = 
»quœe
 "skynet"

2 
loÿl
 
şu¡”
 = 
»quœe
 "cluster"

3 
loÿl
 
cÚfig
 = 
»quœe
 "config"

4 
loÿl
 
cÚfig
 = cÚfig.
b©e


6 
»quœe
 "skynet.manager"

7 
loÿl
 
d©a_mªag”
 = 
»quœe
 "data_manager.data_manager"

8 
loÿl
 
bt_mªag”
 = 
»quœe
 "behavior_tree.bt_manager"

9 
loÿl
 
m­_mªag”
 = 
»quœe
 "battle.map_manager"

11 
loÿl
 
cmd
 = {}

13 
funùiÚ
 
cmd
.
	$ü—‹
(
room
)

14 
loÿl
 
add»ss
, 
pÜt
 = 
skyÃt
.
	`ÿÎ
(".agentpool", "lua", "request_gate_address")

15 
nÙ
 
add»ss
 
Ü
‚Ù 
pÜt
 
th’


17 
’d


18 
loÿl
 
b©e
 = 
skyÃt
.
	`Ãw£rviû
("battle")

19 
skyÃt
.
	`ÿÎ
(
b©e
, "lua", "š™", 
room
)

20  
b©e
, 
add»ss
, 
pÜt


21 
’d


23 
funùiÚ
 
cmd
.
	$abÜt
()

24 
skyÃt
.
	`log
("battle server will be stop")

25 
skyÃt
.
	`fÜk
(
	$funùiÚ
()

26 
skyÃt
.
	$¦“p
(1)

27 
skyÃt
.
	$abÜt
()

28 
’d
)

29 
’d


31 
skyÃt
.
	`¡¬t
(
	$funùiÚ
()

32 
skyÃt
.
	`di¥©ch
("lua", 
	$funùiÚ
(
_
,_, 
commªd
, ...)

33 
loÿl
 
f
 = 
cmd
[
commªd
]

34 
skyÃt
.
	`»t
(skyÃt.
	`·ck
(
	$f
(...)))

35 
’d
)

36 
skyÃt
.".battlemng"

37 
şu¡”
.
İ’
 "battlemng"

40 
d©a_mªag”
.
	$lßd_d©as
()

41 
bt_mªag”
.
	$expÜt_node_doc
()

42 
bt_mªag”
.
	$lßd_Œ“s
()

43 
m­_mªag”
.
	$lßd_m­s
()

46 
loÿl
 
ag’oŞ
 = 
skyÃt
.
	`unique£rviû
("agentpool", "battle")

48 
’d
)

	@service/db.lua

1 
loÿl
 
	gskyÃt
 = 
»quœe
 "skynet"

2 
loÿl
 
mÚgo
 = 
»quœe
 "mongo"

3 
loÿl
 
bsÚ
 = 
»quœe
 "bson"

5 
loÿl
 
ho¡
, 
	gdb_Çme
 = ...

7 
funùiÚ
 
	$cŞËùiÚ
(
Çme
)

8 
loÿl
 
db
 = 
mÚgo
.
	`ş›Á
({
ho¡
 = 
	}
ho¡})

9  
	gdb
[
db_Çme
][
Çme
]

10 
’d


12 
funùiÚ
 
	$g‘_glob®_d©a
(
key
)

13 
loÿl
 
cŞ
 = 
	`cŞËùiÚ
("base")

14 
loÿl
 
tbl
 = 
cŞ
:
	`fšdOÃ
({
bË_Çme
 = "glob®"
	}
})

15  
tbl
[
key
]

16 
’d


18 
funùiÚ
 
	$§ve_glob®_d©a
(
key
, 
v®ue
)

19 
loÿl
 
cŞ
 = 
	`cŞËùiÚ
("base")

20 
loÿl
 
upd©e_doc
 = {
	}
}

21 
upd©e_doc
[
key
] = 
v®ue


22  
cŞ
:
fšdAndModify
({
qu”y
 = {
bË_Çme
 = "glob®"}, 
upd©e
 = {["$£t"] = 
upd©e_doc
}})

23 
’d


25 
loÿl
 
	gcmd
 = {}

26 
funùiÚ
 
cmd
.
	$qu”y_accouÁ
(
accouÁ_Çme
, 
accouÁ_pwd
)

27 
loÿl
 
cŞ
 = 
	`cŞËùiÚ
("account")

28 
loÿl
 
»t
 = 
cŞ
:
	`fšdOÃ
({
Çme
 = 
accouÁ_Çme
})

29 
nÙ
 
»t
 
th’


30 
cŞ
:
§ã_š£¹
({
Çme
 = 
accouÁ_Çme
, 
pwd
 = 
accouÁ_pwd
})

31 
	g»t
 = 
cŞ
:
fšdOÃ
({
Çme
 = 
accouÁ_Çme
})

32 
’d


33  
»t


34 
’d


36 
funùiÚ
 
cmd
.
	$§ve_accouÁ
(
accouÁ
)

37 
loÿl
 
cŞ
 = 
	`cŞËùiÚ
("account")

38  
cŞ
:
	`fšdAndModify
({
qu”y
 = {
Çme
 = 
accouÁ
.Çme}, 
upd©e
 = 
	}
accouÁ})

39 
’d


41 
funùiÚ
 
	gcmd
.
	$qu”y_¶ay”
(
¶ay”_id
)

42 
loÿl
 
cŞ
 = 
	`cŞËùiÚ
("player")

43  
cŞ
:
	`fšdOÃ
({
¶ay”_id
 = 
	}
¶ay”_id})

44 
’d


46 
funùiÚ
 
cmd
.
	$§ve_¶ay”
(
¶ay”
)

47 
loÿl
 
cŞ
 = 
	`cŞËùiÚ
("player")

48  
cŞ
:
	`fšdAndModify
({
qu”y
 = {
¶ay”_id
 = 
¶ay”
.¶ay”_id}, 
upd©e
 = 
	}
¶ay”})

49 
’d


51 
funùiÚ
 
	gcmd
.
	$auto_¶ay”_id
()

52 
loÿl
 
auto_id
 = 
	`g‘_glob®_d©a
("auto_¶ay”_id"è
Ü
 0

53 
auto_id
 =‡uto_id + 1

54 
	`§ve_glob®_d©a
("auto_¶ay”_id", 
auto_id
)

55  
auto_id


56 
’d


58 
skyÃt
.
	`¡¬t
(
	$funùiÚ
()

59 
skyÃt
.
	`di¥©ch
("lua", 
	$funùiÚ
(
_
,_, 
commªd
, ...)

60 
loÿl
 
f
 = 
cmd
[
commªd
]

61 
skyÃt
.
	`»t
(skyÃt.
	`·ck
(
	$f
(...)))

62 
’d
)

63 
’d
)

	@service/lobby.lua

2 
loÿl
 
	gskyÃt
 = 
»quœe
 "skynet"

3 
loÿl
 
şu¡”
 = 
»quœe
 "cluster"

4 
»quœe
 "skynet.manager"

6 
loÿl
 
bË_š£¹
 = 
bË
.
š£¹


7 
loÿl
 
bË_»move
 = 
bË
.
»move


9 
loÿl
 
auto_room_id
 = 10001

10 
loÿl
 
rooms
 = {}

11 
loÿl
 
room_li¡
 = {}

13 
loÿl
 
cmd
 = {}

14 
funùiÚ
 
cmd
.
	$ü—‹_room
(
room_Çme
, 
¶ay”_id
)

15 
loÿl
 
room
 = {
	}
}

16 
room
.
m­_id
 = 1

17 
room
.
room_id
 = 
auto_room_id


18 
room
.
room_Çme
 =„oom_name

19 
room
.
tÙ®_couÁ
 = 2

20 
room
.
cur_couÁ
 = 0

21 
room
.
¶ay”s
 = {}

22 
room
.
¡©us
 = "waiting"

23 
room
.
ÿ±aš
 = 
¶ay”_id


25 
rooms
[
room
.
room_id
] =„oom

26 
	$bË_š£¹
(
room_li¡
, 
room
)

27 
auto_room_id
 =‡uto_room_id + 1

28  
room
.
room_id


29 
’d


31 
funùiÚ
 
cmd
.
	$g‘_room_li¡
(
¡¬t_idx
, 
’d_idx
)

32 
loÿl
 
tbl
 = {
	}
}

33 
i
 = 
¡¬t_idx
, 
	g’d_idx
, 1 do

34 
	gi
 > #room_li¡ 
th’


35  
tbl


36 
’d


37 
	$bË_š£¹
(
tbl
, 
room_li¡
[
i
])

38 
’d


39  
tbl


40 
’d


42 
funùiÚ
 
cmd
.
	$još_room
(
room_id
, 
¶ay”_id
, 
¶ay”_Çme
)

43 
loÿl
 
room
 = 
rooms
[
room_id
]

44 
nÙ
 
room
 
Ü
„oom.
¶ay”s
[
¶ay”_id
] 
th’


45  
çl£


46 
’d


47 
loÿl
 
¶ay”
 = {

48 
¶ay”_id
 =…layer_id,

49 
¶ay”_Çme
 =…layer_name,

50 
»ady
 = 
çl£


51 
	}
}

52 
	groom
.
	g¶ay”s
[
¶ay”_id
] = 
¶ay”


53 
room
.
cur_couÁ
 =„oom.cur_count + 1

55 
	$brßdÿ¡_room_d©a
(
room
)

56  
Œue


57 
’d


59 
funùiÚ
 
cmd
.
	$qu™_room
(
room_id
, 
¶ay”_id
)

60 
loÿl
 
room
 = 
rooms
[
room_id
]

61 
room
.
¶ay”s
[
¶ay”_id
] = 
n


62 
	$check_em±y
(
room
è
th’


63 
rooms
[
room_id
] = 
n


64 
’d


65 
room
.
cur_couÁ
 =„oom.cur_count - 1

66  
Œue


67 
’d


69 
funùiÚ
 
cmd
.
	$brßdÿ¡_room_d©a
(
room_id
)

70 
loÿl
 
room
 = 
rooms
[
room_id
]

71 
	$brßdÿ¡_room_d©a
(
room
)

72 
’d


74 
funùiÚ
 
cmd
.
	$´•¬e_game
(
room_id
, 
¶ay”_id
, 
æag
)

75 
loÿl
 
room
 = 
rooms
[
room_id
]

76 
nÙ
 
room
 
th’
  
çl£
 
’d


77 
loÿl
 
¶ay”
 = 
room
.
¶ay”s
[
¶ay”_id
]

78 
nÙ
 
¶ay”
 
th’
  
çl£
 
’d


79 
¶ay”
.
»ady
 = 
æag


80 
’d


82 
funùiÚ
 
cmd
.
	$¡¬t_game
(
room_id
, 
¶ay”_id
)

83 
loÿl
 
room
 = 
rooms
[
room_id
]

84 
nÙ
 
room
 
th’
  
çl£
 
’d


85 
room
.
ÿ±aš
 ~ğ
¶ay”_id
 
th’


86  
çl£


87 
’d


88 
loÿl
 
b©e
, 
add»ss
, 
pÜt
 = 
şu¡”
.
	`ÿÎ
("b©emng", ".b©emng", "ü—‹", 
room
)

89 
b©e
 ~ğ0 
th’


90 
room
.
¡©us
 = "loading"

91 
	`brßdÿ¡
(
room
, "S2C_LßdB©e", {
b©e
 = b©e, 
add»ss
 =‡dd»ss, 
pÜt
 = 
	}
port})

93  
çl£


94 
’d


96  
Œue


97 
’d


99 
funùiÚ
 
	gcmd
.
	$abÜt
()

100 
skyÃt
.
	`fÜk
(
	$funùiÚ
()

101 
	`´št
("lobby server will be stop")

102 
skyÃt
.
	$¦“p
(100)

103 
skyÃt
.
	$abÜt
()

104 
’d
)

105 
’d


107 
funùiÚ
 
	$check_em±y
(
room
)

108 
	$Ãxt
(
room
.
¶ay”s
è
th’


110 
’d


111 
rooms
[
room
.
room_id
] = 
n


112 
i
,
v
 
š
 
	$aœs
(
room_li¡
) do

113 
v
 =ğ
room
 
th’


114 
	$bË_»move
(
room_li¡
, 
i
)

115 
’d


116 
’d


117 
’d


119 
funùiÚ
 
	$brßdÿ¡_room_d©a
(
room
)

120 
loÿl
 
tbl
 = {

121 
roomId
 = 
room
.
room_id
,

122 
roomName
 = 
room
.
room_Çme
,

123 
ÿ±ŸnId
 = 
room
.
ÿ±aš
,

124 
¶ay”Li¡
 = {}

125 
	}
}

126 
	g_
, 
¶ay”
 
š
 
	$·œs
(
room
.
¶ay”s
) do

127 
	`bË_š£¹
(
tbl
.
¶ay”Li¡
, {

128 
¶ay”Id
 = 
¶ay”
.
¶ay”_id
,

129 
¶ay”Name
 = 
¶ay”
.
¶ay”_Çme
,

130 
»ady
 = 
¶ay”
.ready,

131 
	}
})

132 
’d


133 
brßdÿ¡
(
room
, "S2C_RoomD©a", 
tbl
)

134 
’d


136 
funùiÚ
 
	$brßdÿ¡
(
room
, 
mes§ge_ty³
, 
tbl
)

137 
	`´št
("broadcast")

138 
¶ay”_id
, 
_
 
š
 
	$·œs
(
room
.
¶ay”s
) do

139 
	`´št
("ÿÎ‡g’t"..
¶ay”_id
)

140 
skyÃt
.
	`ÿÎ
(".ag’t"..
¶ay”_id
, "lua", "£nd_·ckage", 
mes§ge_ty³
, 
tbl
)

141 
’d


142 
’d


144 
funùiÚ
 
	$£nd_·ckage
(
¶ay”_id
, 
mes§ge_ty³
, 
tbl
)

145 
skyÃt
.
	`ÿÎ
(".ag’t"..
¶ay”_id
, "lua", "£nd_·ckage", 
mes§ge_ty³
, 
tbl
)

146 
’d


148 
skyÃt
.
	`¡¬t
(
	$funùiÚ
()

149 
skyÃt
.
	`di¥©ch
("lua", 
	$funùiÚ
(
_
,_,
commªd
, ...)

150 
loÿl
 
f
 = 
cmd
[
commªd
]

151 
skyÃt
.
	`»t
(skyÃt.
	`·ck
(
	$f
(...)))

152 
’d
)

153 
skyÃt
.".lobby"

154 
’d
)

	@service/login.lua

1 
loÿl
 
	gskyÃt
 = 
»quœe
 "skynet"

2 
loÿl
 
şu¡”
 = 
»quœe
 "cluster"

3 
loÿl
 
cÚfig
 = 
»quœe
 "config"

4 
cÚfig
 = cÚfig.
logš


5 
loÿl
 
cmd
 = {}

7 
»quœe
 "skynet.manager"

8 
»quœe
 "player.player"

10 
loÿl
 
db


12 
funùiÚ
 
cmd
.
	$logš
(
accouÁ_Çme
, 
accouÁ_pwd
)

13 
loÿl
 
accouÁ
 = 
skyÃt
.
	`ÿÎ
(
db
, "lua", "qu”y_accouÁ", 
accouÁ_Çme
, 
accouÁ_pwd
)

14 
nÙ
 
accouÁ
 
Ü
‡ccouÁ.
pwd
 ~ğ
accouÁ_pwd
 
th’


15 
	`´št
("logš fa,‡ccouÁ‚ame:"..
accouÁ_Çme
)

16  
çl£


17 
’d


18 
add»ss
, 
pÜt
 = 
şu¡”
.
	`ÿÎ
("master", ".agentpool","request_gate_address")

19  
Œue
, 
add»ss
, 
pÜt
, 
accouÁ
.
¶ay”_id


20 --[[ 
loÿl
 
¶ay”
 = 
skyÃt
.
	`ÿÎ
(
db
, "lua", "qu”y_¶ay”", 
accouÁ
.
¶ay”_id
)

21 
nÙ
 
¶ay”
 
th’


22 
¶ay”
 = 
	$¶ay”_Ãw
()

23 
’d


24  
accouÁ
, 
¶ay”
]]

25 
’d


27 
funùiÚ
 
cmd
.
	$logout
()

29 
’d


31 
funùiÚ
 
cmd
.
	$»gi¡”_accouÁ
(
accouÁ_Çme
, 
accouÁ_pwd
)

33 
’d


35 
funùiÚ
 
cmd
.
	$abÜt
()

36 
	`´št
("login server will be stop")

37 
skyÃt
.
	`fÜk
(
	$funùiÚ
()

38 
skyÃt
.
	$¦“p
(1)

39 
skyÃt
.
	$abÜt
()

40 
’d
)

41 
’d


44 
skyÃt
.
	`¡¬t
(
	$funùiÚ
()

45 
skyÃt
.
	`di¥©ch
("lua", 
	$funùiÚ
(
_
,_, 
commªd
, ...)

46 
loÿl
 
f
 = 
cmd
[
commªd
]

47 
skyÃt
.
	`»t
(skyÃt.
	`·ck
(
	$f
(...)))

48 
’d
)

49 
skyÃt
.".login"

50 
şu¡”
.
İ’
 "login"

52 
db
 = 
skyÃt
.
	`Ãw£rviû
("db", 
cÚfig
.db.
add»ss
, cÚfig.db.
db_Çme
)

54 
loÿl
 
w©chdog
 = 
skyÃt
.
	`Ãw£rviû
("watchdog")

55 
skyÃt
.
	`ÿÎ
(
w©chdog
, "lua", "¡¬t", 
cÚfig
.
g©e_li¡
[1], "login_start")

56 
’d
)

	@service/master.lua

1 
loÿl
 
	gskyÃt
 = 
»quœe
 "skynet"

2 
loÿl
 
şu¡”
 = 
»quœe
 "cluster"

3 
loÿl
 
´Ùobuf
 = 
»quœe
 "protobuf"

4 
loÿl
 
cÚfig
 = 
»quœe
 "config"

5 
loÿl
 
jsÚ
 = 
»quœe
 "cjson"

6 
cÚfig
 = cÚfig.
ma¡”


8 
»quœe
 "skynet.manager"

9 
»quœe
 "player.player"

10 
loÿl
 
d©a_mªag”
 = 
»quœe
 "data_manager.data_manager"

11 
loÿl
 
bt_mªag”
 = 
»quœe
 "behavior_tree.bt_manager"

12 
loÿl
 
m­_mªag”
 = 
»quœe
 "battle.map_manager"

14 
loÿl
 
cmd
 = {}

16 
funùiÚ
 
cmd
.
	$abÜt
()

17 
skyÃt
.
	`log
("master server will be stop")

18 
skyÃt
.
	`fÜk
(
	$funùiÚ
()

19 
skyÃt
.
	$¦“p
(1)

20 
skyÃt
.
	$abÜt
()

21 
’d
)

22 
’d


24 
skyÃt
.
	`¡¬t
(
	$funùiÚ
()

25 
skyÃt
.
	`di¥©ch
("lua", 
	$funùiÚ
(
_
,_, 
commªd
, ...)

26 
loÿl
 
f
 = 
cmd
[
commªd
]

27 
skyÃt
.
	`»t
(skyÃt.
	`·ck
(
	$f
(...)))

28 
’d
)

29 
skyÃt
.".master"

30 
şu¡”
.
İ’
 "master"

32 --
loÿl
 
cÚsŞe
 = 
skyÃt
.
	`Ãw£rviû
("console")

33 --
skyÃt
.
	`Ãw£rviû
("debug_console",8000)

35 
loÿl
 
d©aûÁ”
 = 
»quœe
 "datacenter"

36 --
d©aûÁ”
.
	$ü—‹
()

38 
loÿl
 
db
 = 
skyÃt
.
	`Ãw£rviû
("db", 
cÚfig
.db.
add»ss
, cÚfig.db.
db_Çme
)

39 
skyÃt
.
	`Çme
(".db",
db
)

41 
loÿl
 
lobby
 = 
skyÃt
.
	`unique£rviû
("lobby")

43 
loÿl
 
ag’oŞ
 = 
skyÃt
.
	`unique£rviû
("agentpool", "master")

45 
skyÃt
.
	`log
("load datas")

46 
d©a_mªag”
.
	$lßd_d©as
()

48 
bt_mªag”
.
	$expÜt_node_doc
()

49 
bt_mªag”
.
	`lßd_Œ“s
()

50 --
loÿl
 
¶ay”
 = 
PÏy”
.
	`Ãw
()

51 -- 
loÿl
 
Œ“
 = 
bt_mªag”
.
	`ü—‹_Œ“
(1, 
¶ay”
)

52 -- 
Œ“
:
	$exec
()

54 
m­_mªag”
.
	$lßd_m­s
()

56 
skyÃt
.
	`log
("haha")

57 
’d
)

	@service/stop.lua

1 
loÿl
 
	gskyÃt
 = 
»quœe
 "skynet"

2 
loÿl
 
şu¡”
 = 
»quœe
 "cluster"

4 
»quœe
 "skynet.manager"

6 
skyÃt
.
¡¬t
(
	$funùiÚ
()

7 
skyÃt
.".stop"

8 
şu¡”
.
İ’
 "stop"

9 
skyÃt
.
	`log
("stop‡ll server")

10 
	`pÿÎ
(
	$funùiÚ
 (è
şu¡”
.
	`ÿÎ
("ma¡”", ".ma¡”", "abÜt"è
’d
è
th’


11 
skyÃt
.
	`log
("master stop!")

13 
skyÃt
.
	`log
("cannot stop master")

14 
’d


15 
	`pÿÎ
(
	$funùiÚ
 (è
şu¡”
.
	`ÿÎ
("b©emng", ".b©emng", "abÜt"è
’d
è
th’


16 
skyÃt
.
	`log
("battlemng stop!")

18 
skyÃt
.
	`log
("cannot stop battle")

19 
’d


20 
	`pÿÎ
(
	$funùiÚ
 (è
şu¡”
.
	`ÿÎ
("logš", ".logš", "abÜt"è
’d
è
th’


21 
skyÃt
.
	`log
("login stop!")

23 
skyÃt
.
	`log
("cannot stop†ogin")

24 
’d


26 
skyÃt
.
	$¦“p
(10)

27 
skyÃt
.
	`log
("Done!")

28 
skyÃt
.
	$abÜt
()

29 
’d
)

	@service/util/build_db.lua

1 
loÿl
 
	gskyÃt
 = 
»quœe
 "skynet"

2 
loÿl
 
mÚgo
 = 
»quœe
 "mongo"

3 
loÿl
 
bsÚ
 = 
»quœe
 "bson"

5 
loÿl
 
ho¡
, 
	gdb_Çme
 = "127.0.0.1", "battle_city"

7 
	gskyÃt
.
¡¬t
(
	$funùiÚ
()

8 
loÿl
 
db
 = 
mÚgo
.
	`ş›Á
({
ho¡
 = 
	}
ho¡})[
db_Çme
]

9 
db
.
ba£
:
drİIndex
("*")

10 
db
.
ba£
:
’su»Index
({
bË_Çme
 = 1}, {
unique
 = 
Œue
})

11 
loÿl
 
»t
 = 
db
.
ba£
:
fšdOÃ
({
bË_Çme
 = "global"})

12 
nÙ
 
»t
 
th’


13 
db
.
ba£
:
§ã_š£¹
({
bË_Çme
 = "glob®", 
auto_¶ay”_id
 = 0})

14 
’d


15 
db
.
accouÁ
:
drİIndex
("*")

16 
db
.
accouÁ
:
’su»Index
({
Çme
 = 1}, {
unique
 = 
Œue
})

17 
db
.
¶ay”
:
drİIndex
("*")

18 
db
.
¶ay”
:
’su»Index
({
¶ay”_id
 = 1}, {
unique
 = 
Œue
})

19 
’d
)

	@service/util/module.lua

1 
loÿl
 
	gskyÃt
 = 
»quœe
 "skynet"

3 
loÿl
 
moduËs
 = {}

4 
loÿl
 
cmd
 = {}

5 
funùiÚ
 
cmd
.
	$g‘_moduË
(
moduË_Çme
)

6  
moduËs
[
moduË_Çme
]

7 
’d


	@service/util/userlog.lua

1 
loÿl
 
	gskyÃt
 = 
»quœe
 "skynet"

2 
»quœe
 "skynet.manager"

4 
skyÃt
.
»gi¡”_´ÙocŞ
 {

5 
Çme
 = "text",

6 
	gid
 = 
skyÃt
.
PTYPE_TEXT
,

7 
	guÅack
 = 
skyÃt
.
to¡ršg
,

8 
	gdi¥©ch
 = 
funùiÚ
(
_
, 
add»ss
, 
msg
)

9 
´št
(
¡ršg
.
fÜm©
("%x(%.2f): %s", 
add»ss
, 
skyÃt
.
time
(), 
msg
))

10 
	g’d


13 
	gskyÃt
.
¡¬t
(
	$funùiÚ
()

14 
skyÃt
.".logger"

15 
’d
)

	@service/watchdog.lua

1 
loÿl
 
	gskyÃt
 = 
»quœe
 "skynet"

2 
loÿl
 
Ãack
 = 
»quœe
 "netpack"

4 
loÿl
 
cmd
 = {}

5 
loÿl
 
SOCKET
 = {}

6 
loÿl
 
g©e


7 
loÿl
 
cÚfig


8 
loÿl
 
ag’t
 = {}

9 
loÿl
 
ag’t_couÁ
 = 0

10 
loÿl
 
ag’t_¡¬t_cmd


12 
funùiÚ
 
SOCKET
.
	$İ’
(
fd
, 
addr
)

13 
skyÃt
.
	`”rÜ
("New cl›Á from : " .. 
addr
)

14 
ag’t
[
fd
] = 
skyÃt
.
	`Ãw£rviû
("agent")

15 
skyÃt
.
	`ÿÎ
(
ag’t
[
fd
], "lua", 
ag’t_¡¬t_cmd
, { 
g©e
 = g©e, 
ş›Á
 = fd, 
w©chdog
 = skyÃt.
	`£lf
(è
	}
})

16 
	gag’t_couÁ
 = 
ag’t_couÁ
 + 1

17 
’d


19 
loÿl
 
funùiÚ
 
	$şo£_ag’t
(
fd
)

20 
loÿl
 
a
 = 
ag’t
[
fd
]

21 
ag’t
[
fd
] = 
n


22 
ag’t_couÁ
 =‡gent_count - 1

23 
a
 
th’


24 
skyÃt
.
	`ÿÎ
(
g©e
, "lua", "kick", 
fd
)

25 -- 
discÚÃù
 
Ãv”
 

26 
skyÃt
.
	`£nd
(
a
, "lua", "disconnect")

27 
’d


28 
’d


30 
funùiÚ
 
SOCKET
.
	$şo£
(
fd
)

31 
	`´št
("sock‘ clo£",
fd
)

32 
	$şo£_ag’t
(
fd
)

33 
’d


35 
funùiÚ
 
SOCKET
.
	$”rÜ
(
fd
, 
msg
)

36 
	`´št
("sock‘ƒ¼Ü",
fd
, 
msg
)

37 
	$şo£_ag’t
(
fd
)

38 
’d


40 
funùiÚ
 
SOCKET
.
	`w¬nšg
(
fd
, 
size
)

41 -- 
size
 
K
 
by‹s
 
havn
't send out in fd

42 
	`´št
("sock‘ w¬nšg", 
fd
, 
size
)

43 
’d


45 
funùiÚ
 
SOCKET
.
	$d©a
(
fd
, 
msg
)

46 
’d


48 
funùiÚ
 
cmd
.
	$¡¬t
(
cÚf
, 
cmd
)

49 
cÚfig
 = 
cÚf


50 
ag’t_¡¬t_cmd
 = 
cmd


51 
skyÃt
.
	`ÿÎ
(
g©e
, "lua", "İ’" , 
cÚf
)

52 
’d


54 
funùiÚ
 
cmd
.
	$şo£
(
fd
)

55 
	$şo£_ag’t
(
fd
)

56 
’d


58 
funùiÚ
 
cmd
.
	$is_fuÎ
()

59 
ag’t_couÁ
 >ğ
cÚfig
.
maxş›Á
 
th’


60  
çl£


62  
Œue


63 
’d


64 
’d


66 
skyÃt
.
	`¡¬t
(
	$funùiÚ
()

67 
skyÃt
.
	`di¥©ch
("lua", 
	$funùiÚ
(
£ssiÚ
, 
sourû
, 
commªd
, 
subcmd
, ...)

68 
commªd
 =ğ"sock‘" 
th’


69 
loÿl
 
f
 = 
SOCKET
[
subcmd
]

70 
	`f
(...)

71 -- 
sock‘
 
­i
 
dÚ
't‚eed„eturn

73 
loÿl
 
f
 = 
	$as£¹
(
cmd
[
commªd
])

74 
skyÃt
.
	`»t
(skyÃt.
	`·ck
(
	$f
(
subcmd
, ...)))

75 
’d


76 
’d
)

78 
g©e
 = 
skyÃt
.
	`Ãw£rviû
("gate")

79 
’d
)

	@
1
.
0
36
936
config/clustername.lua
config/config.lua
luaclib/lua_cjson.c
luaclib/pbc-lua53.c
lualib/datacenter.lua
lualib/protobuf.lua
proto/ClientProto/ProtoGen/protobuf-net.xml
script/battle/battle.lua
script/battle/battle_handler.lua
script/battle/map.lua
script/battle/map_manager.lua
script/battle/unit.lua
script/behavior_tree/behavior_node.lua
script/behavior_tree/behavior_tree.lua
script/behavior_tree/bt_manager.lua
script/behavior_tree/node/ai.lua
script/behavior_tree/node/common.lua
script/behavior_tree/node/map.lua
script/data_manager/data_manager.lua
script/global.lua
script/player/player.lua
script/player/player_handler.lua
script/player/player_room.lua
script/player/player_test.lua
service/agent.lua
service/agentpool.lua
service/battlemng.lua
service/db.lua
service/lobby.lua
service/login.lua
service/master.lua
service/stop.lua
service/util/build_db.lua
service/util/module.lua
service/util/userlog.lua
service/watchdog.lua
